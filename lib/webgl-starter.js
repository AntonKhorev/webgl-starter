!function(){"use strict";function t(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function e(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return e&&r(t.prototype,e),n&&r(t,n),t}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){function n(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}return t}if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&n(t,e)}function o(t,e){return t.raw=e,t}!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,r){var i=function(){function t(e,r,i,o){var a=this;n(this,t),this.option=e,this.$dragged=null,this.$entries=$("<div class='entries'>").append(e.entries.map(function(t){return a.writeDraggableSubOption(t,r,i)}));var s=$("<div class='buttons'>");e.availableTypes.forEach(function(t,n){n&&s.append(" "),s.append($("<button type='button'>").html(i("options."+e.fullName+"."+t+".add")).click(function(){a.$entries.append(a.writeDraggableSubOption(e.makeEntry(t),r,i)),a.updateArrayEntries()}))}),this.$output=e.$=$("<fieldset class='option'>").append("<legend>"+i("options."+e.fullName)+"</legend>",this.$entries,s)}return t.prototype.canDeleteEntry=function(t){return!0},t.prototype.updateArrayEntries=function(){this.option.entries=this.$entries.children().map(function(){return $(this).data("option")}).get()},t.prototype.writeDraggableSubOption=function(t,e,n){var r=this,i=function(t){t.prev().before(t),r.updateArrayEntries()},o=function(t){t.next().after(t),r.updateArrayEntries()},a=function(t){r.canDeleteEntry(t)&&(t.remove(),r.updateArrayEntries())},s=this;return $("<div class='draggable-with-handle'>").data("option",t).append(e(t)," ",$("<span draggable='true' tabindex='0' title='"+n("options-output.drag.tip")+"'>").append("<span>"+n("options-output.drag")+"</span>").on("dragstart",function(t){s.$dragged=$(this).parent(),t.originalEvent.dataTransfer.effectAllowed="move",t.originalEvent.dataTransfer.setData("Text",name),t.originalEvent.dataTransfer.setDragImage&&t.originalEvent.dataTransfer.setDragImage(s.$dragged[0],0,0),setTimeout(function(){s.$dragged.addClass("ghost")},0)}).on("touchstart",function(t){var e=$(this).parent();return e.addClass("ghost"),!1}).on("touchmove",function(t){var e=$(this).parent(),n=e.height(),r=e.offset().top,a=t.originalEvent.touches[0].pageY,s=e.prev();s.length&&a<r&&a-s.offset().top<n&&i(e);var u=e.next();return u.length&&a>r+n&&a-u.offset().top>u.height()-n&&o(e),!1}).on("touchend touchcancel",function(t){var e=$(this).parent();e.removeClass("ghost")}).keydown(function(t){var e=$(this),n=e.parent();return 38==t.keyCode?(i(n),e.focus(),!1):40==t.keyCode?(o(n),e.focus(),!1):void 0})," ",$("<button class='delete' title='"+n("options-output.delete.tip")+"'>").append("<span>"+n("options-output.delete")+"</span>").click(function(){a($(this).parent())}).keydown(function(t){if(13==t.keyCode||32==t.keyCode)return a($(this).parent()),!1})).on("dragover",function(t){t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="move";var e=$(this);if(s.$dragged)if(e.next().is(s.$dragged)){var n=s.$dragged.height(),r=t.pageY-e.offset().top;r<n&&i(s.$dragged)}else if(e.nextAll().is(s.$dragged))i(s.$dragged);else if(e.prev().is(s.$dragged)){var a=e.height(),u=s.$dragged.height(),p=t.pageY-e.offset().top;p>a-u&&o(s.$dragged)}else e.prevAll().is(s.$dragged)&&o(s.$dragged)}).on("drop",function(t){t.preventDefault()}).on("dragend",function(t){t.preventDefault(),s.$dragged&&(s.$dragged.removeClass("ghost"),s.$dragged=null)})},t}();e.exports=i},{}],2:[function(t,e,n){e.exports=function(t){return function(e){var n="code-output",r={en:{save:"Save source code",run:"Run in new window","open.codepen":"Open in CodePen","open.jsfiddle":"Open in JSFiddle","open.plunker":"Open in Plunker","section.html":"HTML","section.css":"CSS","section.js":"JavaScript",embedded:"embedded in HTML source code","mode.full":"complete HTML","mode.body":"only HTML body","mode.embed":"embed in HTML","mode.paste":"extract to paste into HTML later","mode.file":"extract to load as external resource",formatting:"Formatting","formatting.indent":"indent with tabs","formatting.indentNumber":"spaces per indent","formatting.jsSemicolons":"JavaScript semicolons","warning.no-hljs":"<a href=https://highlightjs.org/>highlight.js</a> (hosted on <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>) is not loaded. Syntax highlighting is disabled."},ru:{save:"Сохранить исходный код",run:"Запустить в новом окне","open.codepen":"Открыть в CodePen","open.jsfiddle":"Открыть в JSFiddle","open.plunker":"Открыть в Plunker","section.html":"HTML","section.css":"CSS","section.js":"JavaScript",embedded:"встроен в код HTML","mode.full":"полностью","mode.body":"только <code>body</code>","mode.embed":"встроить в HTML","mode.paste":"извлечь для последующей вставки в HTML","mode.file":"извлечь для загрузки в качестве внешнего ресурса",formatting:"Форматирование","formatting.indent":"отступы с помощью tab","formatting.indentNumber":"пробелов в отступе","formatting.jsSemicolons":"<code>;</code> в JavaScript","warning.no-hljs":"<a href=https://highlightjs.org/>highlight.js</a> (с сервера <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>) не загружен. Подсветка синтаксиса отключена."}};for(var i in r[t])e[n+"."+i]=r[t][i];return e}}},{}],3:[function(t,r,i){var o=t(8),a=t(5),s=function(t){return"data:text/html;charset=utf-8,"+encodeURIComponent(t)},u=function(t,e){var n={},r=function(r){Object.defineProperty(n,r,{get:function(){return t[r]},set:function(n){t[r]=n,e()}})};for(var i in t)r(i);return n},p=function(){function r(e,i){var s=this;n(this,r),this.formatting=u(this.defaultFormatting,function(){s.update.flush(),s.applyUpdatedCode(i)}),this.sectionModes=u({html:"full",css:"embed",js:"embed"},function(){s.update.flush(),s.applyUpdatedCode(i)}),this._code=e(),this.update=o(function(){s._code=e(),s.applyUpdatedCode(i)},200),this.initDomProps();var p=function(){var e=s,n=void 0,r=void 0,o=function(){var e="\t";if(!n.prop("checked")){var i=4;r[0].checkValidity()&&(i=Number(r.val())),e=t(29)(" ")(i)}s.formatting.indent=e};return $("<details>").append("<summary>"+i("code-output.formatting")+"</summary>",$("<div>").append($("<label>").append(n=$("<input type='checkbox'>").prop("checked","\t"==s.formatting.indent).change(o)," "+i("code-output.formatting.indent"))),$("<div>").append($("<label>").append(r=$("<input type='number' min='0' max='32' required>").val("\t"==s.formatting.indent?4:s.formatting.indent.length).on("input change",o)," "+i("code-output.formatting.indentNumber"))),$("<div>").append($("<label>").append($("<input type='checkbox'>").prop("checked",s.formatting.jsSemicolons).change(function(){e.formatting.jsSemicolons=this.checked})," "+i("code-output.formatting.jsSemicolons")))).each(a)},l=function(t){return $("<details open>").append(s.writeSectionSummary(t,i),s.$sectionCode[t]=$("<div class='code'>")).each(a)},c=$("<div class='code-output'>").append(this.writeButtons(i)).append(p(),l("html"),l("css"),l("js"));window.hljs||c.append("<p>"+i("code-output.warning.no-hljs")+"</p>"),c.append(this.writeButtons(i)),this.applyUpdatedCode(i),this.$output=c}return r.prototype.initDomProps=function(){this.$sectionCode={},this.$saveButtons={}},r.prototype.applyUpdatedCode=function(t){var e=this.code.extractSections(this.sectionModes);for(var n in e){if("embed"==this.sectionModes[n])this.$sectionCode[n].empty().append("<p>"+t("code-output.embedded")+"</p>");else{var r=void 0;this.$sectionCode[n].empty().append($("<pre>").append(r=$("<code class='"+n+"'>"))),r.html(e[n].getHtml(this.formatting).join("\n")),window.hljs&&hljs.highlightBlock(r[0])}"html"!=n&&this.$saveButtons[n].prop("disabled","embed"==this.sectionModes[n])}},r.prototype.writeButtons=function(t){var e=this,n=function(t,e,n){var r=$("<form method='post' action='"+t+"' target='"+e+"'>");for(var i in n)r.append($("<input type='hidden'>").attr("name",i).val(n[i]));r.appendTo("body").submit().remove()};return $("<div>").append($("<button type='button'>"+t("code-output.run")+"</button>").click(function(){var t=e.code.get(e.formatting).join("\n");if(navigator.msSaveOrOpenBlob){var n=window.open("","generatedCode");n.document.open(),n.document.write(t),n.document.close()}else window.open(s(t),"generatedCode")})," ",$("<button type='button'>"+t("code-output.open.codepen")+"</button>").click(function(){var t=e.code.extractSections({html:"body",css:"paste",js:"paste"}),r=function(n){return t[n].get(e.formatting).join("\n")};n("http://codepen.io/pen/define/","codepenGeneratedCode",{data:JSON.stringify({html:r("html"),css:r("css"),js:r("js"),title:e.code.title})})})," ",$("<button type='button'>"+t("code-output.open.jsfiddle")+"</button>").click(function(){var t=e.code.extractSections({html:"body",css:"paste",js:"paste"}),r=function(n){return t[n].get(e.formatting).join("\n")};n("http://jsfiddle.net/api/post/library/pure/","jsfiddleGeneratedCode",{html:r("html"),css:r("css"),js:r("js"),title:e.code.title,wrap:"b"})})," ",$("<button type='button'>"+t("code-output.open.plunker")+"</button>").click(function(){var t,r=e.code.extractSections({html:"full",css:"file",js:"file"}),i=function(t){return r[t].get(e.formatting).join("\n")};n("http://plnkr.co/edit/?p=preview","plunkerGeneratedCode",(t={},t["files[index.html]"]=i("html"),t["files["+r.css.filename+"]"]=i("css"),t["files["+r.js.filename+"]"]=i("js"),t.private=!0,t))}))},r.prototype.writeSectionSummary=function(t,e){var n=this,r=$("<summary>"+e("code-output.section."+t)+"</summary>");return r.append(" ",$("<select>").append(("html"==t?["full","body"]:["embed","paste","file"]).map(function(t){return $("<option>").val(t).html(e("code-output.mode."+t))})).val(this.sectionModes[t]).change(function(){n.sectionModes[t]=this.value})," ",this.$saveButtons[t]=$("<button type='button'>"+e("code-output.save")+"</button>").click(function(){var e=n.code.extractSections(n.sectionModes)[t],r=new Blob([e.get(n.formatting).join("\n")],{type:e.mimeType});if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(r,e.filename);else{var i=$("<a>").attr({download:e.filename,href:URL.createObjectURL(r)}).appendTo("body");i.get(0).click(),i.remove()}})),r},e(r,[{key:"code",get:function(){return this.update.flush(),this._code}},{key:"defaultFormatting",get:function(){return{indent:"\t",jsSemicolons:!1}}}]),r}();r.exports=p},{29:29,5:5,8:8}],4:[function(t,e,r){var i=function(){function t(e,r,i){n(this,t),this.filename=e,this.mimeType=r,this.lines=i}return t.prototype.get=function(t){return this.lines.get(t)},t.prototype.getHtml=function(t){return this.lines.getHtml(t)},t}();e.exports=i},{}],5:[function(t,e,n){var r="open"in document.createElement("details");e.exports=function(){var t=$(this);if(t.on("click","summary :input, summary a[href]",function(t){t.preventDefault()}),!r){var e=function(){t.attr("open")?t.removeAttr("open"):t.attr("open","")},n=13,i=32,o=function(t){return $(t.target).closest("summary, :input, a[href]").is("summary")};t.addClass("polyfill").children("summary").attr("tabindex",0).click(function(t){o(t)&&e()}).keydown(function(t){if(o(t)&&(t.keyCode==n||t.keyCode==i))return e(),!1})}}},{}],6:[function(t,e,n){var r=t(7);e.exports=function(t){return t.split(".").map(function(t,e){return e>0?r(t):t}).join("")}},{7:7}],7:[function(t,e,n){e.exports=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},{}],8:[function(t,e,n){e.exports=function(t,e){var n=null,r=function(){clearTimeout(n),n=setTimeout(function(){n=null,t()},e)};return r.flush=function(){n&&(n=null,t())},r}},{}],9:[function(t,e,n){e.exports=function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return String(t).replace(/[&<>"']/g,function(t){return e[t]})}},{}],10:[function(t,e,n){var r=t(11),i=function(t,e){return r([t],e)[0]};i.html=function(t,e){return r.html([t],e)[0]},i.js=function(t,e){return r.js([t],e)[0]},i.glsl=function(t,e){return r.glsl([t],e)[0]},e.exports=i},{11:11}],11:[function(t,e,n){var r=function(t,e,n,r){var i=0;n&&(i=1);var o=!1;for(var a in t){var s=void 0;if(void 0!==e)s=e;else{if(void 0===t[a].precision)throw new Error("formatNumbers received no precision");s=t[a].precision}var u=Number(t[a]),p=u.toFixed(s);Number(p)<0&&(o=!0),s>0&&(s-=p.match(/0*$/)[0].length),s>i&&(i=s)}var l=Array.isArray(t)?[]:{};for(var c in t){var f=Number(t[c]),h=f.toFixed(i);Number(h)>=0&&"-"==h.charAt(0)&&(h=h.slice(1)),!r&&o&&f>0&&(h="+"+h),l[c]=h}return l},i=function(t,e){return r(t,e)};i.html=function(t,e){return r(t,e,!1,!0)},i.js=function(t,e){return r(t,e)},i.glsl=function(t,e){return r(t,e,!0)},e.exports=i},{}],12:[function(t,e,r){var i=function t(e,r,i,o){n(this,t),this.option=e,this.$output=e.$=$("<fieldset class='option'>").append("<legend>"+i("options."+e.fullName)+"</legend>",e.entries.map(r))};e.exports=i},{}],13:[function(t,e,n){e.exports=function(t){function e(t,i){var o=r.exec(t);o?!function(){var t=o[1],n=o[2],a=o[3],s=n.split(","),u=r.exec(i);u?!function(){var n=u[1],r=u[2],i=u[3],o=r.split(",");s.forEach(function(s,u){if(""!=r){var p=o[u];e(t+s+a,n+p+i)}else e(t+s+a,n+s+i)})}():s.forEach(function(n){e(t+n+a,i)})}():n[t]=i}var n={},r=/^([^{]*)\{([^}]*)\}(.*)$/;for(var i in t)e(i,t[i]);return n}},{}],14:[function(t,e,n){e.exports=function(t){return function(e){for(var n in e)e[n]=e[n].replace(/\[\[(.*?)\]\]/g,function(e,n){var r=void 0,i=void 0,o=n.indexOf("|");return o<0?(r=n,i=n):(r=n.slice(0,o),i=n.slice(o+1)),"<a href='https://"+t+".wikipedia.org/wiki/"+r.replace(/ /g,"_")+"'>"+i+"</a>"});return e}}},{}],15:[function(t,e,n){var r=t(9);e.exports=function(e){return function(n){var i="en";n=n||i,n=n.split("-")[0];var o=e[n];void 0===o&&(n=i,o=e[n]);var a=function(t){if(void 0!==o[t])return o[t];throw new Error("undefined string "+t)};a.lang=n,a.has=function(t){return void 0!==o[t]},"en"==n?(a.number=function(t){return String(t).replace("-","−")},a.pluralSuffix=function(e){var n=String(e);if(t(28)(n)("."))return"2";var r=Number(e);return 1==Math.abs(r)?"1":"2"}):"ru"==n&&(a.number=function(t){return String(t).replace("-","−").replace(".",",")},a.pluralSuffix=function(e){var n=String(e);if(t(28)(n)("."))return"2";var r="1"===n.slice(-2,-1);return"1"!==n.slice(-1)||r?t(28)("234")(n.slice(-1))&&!r?"2":"5":"1"}),a.plural=function(t,e){return a(e+"."+a.pluralSuffix(t))};var s=function(t){return 1==t.length&&/^\W/.test(t)},u=function(t,e,n){void 0===n&&(n=function(t,e){return"<abbr title='"+r(e)+"'>"+t+"</abbr>"});var i=void 0;i="1/second"==e?a("units.second.a")+"<sup>−1</sup>":a("units."+e+".a");var o=a.plural(t,"units."+e);return n(i,o)};return a.numberWithUnits=function(t,e,n){var r=a.number(t);return void 0===e?r:s(e)?r+e:r+" "+u(t,e,n)},a.numberWithoutUnits=function(t,e){var n=a.number(t);return void 0!==e&&s(e)?n+e:n},a.numberUnits=function(t,e,n){return void 0===e||s(e)?"":u(t,e,n)},a}}},{28:28,9:9}],16:[function(t,e,o){var a=t(19),s=function(e){function o(t,i){n(this,o);var a=r(this,e.call(this,t));return void 0!==i?a.level=i:a.level=1,a}return i(o,e),o.prototype.doGet=function(n,r){var i="\t";void 0!==n.indent&&(i=n.indent);var o=t(29)(i)(this.level);return e.prototype.doGet.call(this,n,r).map(function(t){return o+t})},o}(a);e.exports=s},{19:19,29:29}],17:[function(t,e,o){var a=t(9),s=t(19),u=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.doGet=function(t,e){for(var n=[],r=!0,i=function(){r?r=!1:n.push("")},o=this.data,u=0;u<o.length;u++){var p=o[u];if(p instanceof s){var l=p.doGet(t,e);l.length>0&&(i(),n.push.apply(n,l))}else if("string"==typeof p){i();var c=e?a(p):p;n.push(c)}}return n},e}(s);e.exports=u},{19:19,9:9}],18:[function(t,e,o){var a=t(19),s=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.processStringInGet=function(t,e){return e.jsSemicolons?t.replace(/^;/,""):t.replace(/;$/,"")},e}(a);e.exports=s},{19:19}],19:[function(t,e,r){var i=t(9),o={},a=function(){function e(t){if(n(this,e),!Array.isArray(t))throw new TypeError("attempted to construct Lines with non-array data argument");this.data=t}return e.prototype.isDataEmpty=function(){for(var t=this.data,n=0;n<t.length;n++){var r=t[n];if(r instanceof e){if(!r.isEmpty())return!1}else if("string"==typeof r)return!1}return!0},e.prototype.processStringInGet=function(t,e){return t},e.prototype.doGet=function(n,r){for(var a=[],s=!1,u=this.data,p=0;p<u.length;p++){var l=u[p];if(l===o)s=!0;else if(l instanceof e){var c=l.doGet(n,r);s&&c.length>0&&a.push(a.pop()+c.shift()),a.push.apply(a,c),s=!1}else if("string"==typeof l){var f=this.processStringInGet(l,n);void 0!==n.indent&&"\t"!=n.indent&&(f=f.replace(/^(\t)+/,function(e){return t(29)(n.indent)(e.length)})),f=r?i(f):f,s?a.push(a.pop()+f):a.push(f),s=!1}}return a},e.b=function(){var t=this,e=arguments,n=[],r=function(){return new(Function.prototype.bind.apply(t,[null].concat([n],Array.prototype.slice.call(e))))},i=function(){return i.a.apply(i,arguments)};return i.a=function(){return n.push.apply(n,arguments),this},i.t=function(){return n.push.apply(n,[o].concat(Array.prototype.slice.call(arguments))),this},i.e=r,i.ae=function(){return this.a.apply(this,arguments).e()},i},e.ba=function(){var t;return(t=this.b()).a.apply(t,arguments)},e.be=function(){return this.b().e()},e.bae=function(){var t;return(t=this.b()).a.apply(t,arguments).e()},e.prototype.isEmpty=function(){return this.isDataEmpty()},e.prototype.get=function(t){return void 0===t&&(t={}),this.doGet(t,!1)},e.prototype.getHtml=function(t){return void 0===t&&(t={}),this.doGet(t,!0)},e.prototype.count=function(){return this.doGet({},!1).length},e.html=function(t){var e=arguments;return t.reduce(function(t,n,r){var i=e[r];switch(t.slice(-1)){case"=":return i===!1?t.replace(/\s+[a-zA-Z0-9-]+=$/,"")+n:i===!0?t.replace(/=$/,"")+n:(i=String(i).replace(/&/g,"&amp;"),""==i?t.replace(/=$/,"")+n:/[\s"'=<>`]/.test(i)?/'/.test(i)?(i=i.replace(/"/g,"&quot;"),t+'"'+i+'"'+n):t+"'"+i+"'"+n:t+i+n);case">":return i=String(i).replace(/&/g,"&amp;").replace(/</g,"&lt;"),t+i+n}throw new Error("invalid character before substitution")})},e}();e.exports=a},{29:29,9:9}],20:[function(t,e,o){var a=t(27),s=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.isEmpty=function(){return this.isDataEmpty()},e.prototype.doGet=function(e,n){return this.isEmpty()?[]:t.prototype.doGet.call(this,e,n)},e}(a);e.exports=s},{27:27}],21:[function(t,o,a){var s={};s.Base=function(){function t(e,r,i,o,a,s){if(n(this,t),this.parent=o,this.name=e,this.fullName=e,o&&null!==o.fullName&&(this.fullName=o.fullName+"."+e),this.updateCallbacks=[],this._$=null,this.isVisible=function(){return!0},a&&(a.register(this),void 0!==r.visibilityData)){"or"!=r.visibilityDataLogic?this.isVisible=function(){for(var t in r.visibilityData){var e=a.options[t].value;if(r.visibilityData[t].indexOf(e)<0)return!1}return!0}:this.isVisible=function(){for(var t in r.visibilityData){var e=a.options[t].value;if(r.visibilityData[t].indexOf(e)>=0)return!0}return!1};for(var u in r.visibilityData)a.declareAffectedBy(this,u)}}return t.make=function(t){for(var e=0,n=0,r=0,i=void 0,o=[],a={},s=arguments.length,u=Array(s>1?s-1:0),p=1;p<s;p++)u[p-1]=arguments[p];for(var l=0;l<u.length;l++){var c=u[l];"string"==typeof c||"number"==typeof c||"boolean"==typeof c?0==e++&&(i=c):Array.isArray(c)?0==n++&&(o=c):c instanceof Object&&0==r++&&(a=c)}var f=this,h=this.collectArgs(i,o,a);return function(e,n,r,i){return new f(t,h,e,n,r,i)}},t.collectArgs=function(t,e,n){return n},t.prototype.updateVisibility=function(){this.$&&this.$.toggle(this.isVisible())},t.prototype.update=function(){this.updateCallbacks.forEach(function(t){t()}),this.parent&&this.parent.update()},t.prototype.addUpdateCallback=function(t){this.updateCallbacks.push(t)},t.prototype.shortenExport=function(t){var e=Object.keys(t);return 1==e.length&&"value"==e[0]?t.value:t},t.prototype.shortenExportAssign=function(t,e,n){var r=Object.keys(t);1==r.length&&"value"==r[0]?e[n]=t.value:r.length>0&&(e[n]=t)},e(t,[{key:"$",get:function(){return this._$},set:function(t){this._$=t,this.updateVisibility()}}]),t}(),s.Input=function(t){function o(e,i,a,s,u,p){n(this,o);var l=r(this,t.apply(this,arguments));return l.defaultValue=i.defaultValue,"object"==typeof a&&(a=a.value),void 0!==a?l._value=a:l._value=l.defaultValue,l}return i(o,t),o.collectArgs=function(e,n,r){return r=Object.create(r),void 0===r.defaultValue&&(r.defaultValue=e),t.collectArgs.call(this,e,n,r)},o.prototype.export=function(){var t={};return this.value!=this.defaultValue&&(t.value=this.value),t},e(o,[{key:"value",get:function(){return this._value},set:function(t){this._value=t,this.update()}}]),o}(s.Base),s.Boolean=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.collectArgs=function(e,n,r){return t.collectArgs.call(this,!!e,n,r)},e.prototype.fix=function(){return this.value},e}(s.Input),s.NonBoolean=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.fix=function(){var t=this.value;return{name:this.name,value:t,valueOf:function(){return t},toString:function(){return String(t)}}},e}(s.Input),s.Factor=function(t){function e(i,o,a,s,u,p){n(this,e);var l=r(this,t.apply(this,arguments));return l.availableValues=o.availableValues,l}return i(e,t),e.collectArgs=function(e,n,r){return r=Object.create(r),void 0===r.availableValues&&(r.availableValues=n),void 0===e&&(e=r.availableValues[0]),t.collectArgs.call(this,e,n,r)},e}(s.NonBoolean),s.Number=function(t){function e(i,o,a,s,u,p){n(this,e);var l=r(this,t.apply(this,arguments));return l.availableMin=o.availableMin,l.availableMax=o.availableMax,l.unit=o.unit,l}return i(e,t),e.collectArgs=function(e,n,r){return r=Object.create(r),void 0===r.availableMin&&(r.availableMin=n[0]),void 0===r.availableMax&&(r.availableMax=n[1]),void 0===e&&(e=r.availableMin),t.collectArgs.call(this,e,n,r)},e.prototype.fix=function(){var e=t.prototype.fix.call(this);return e.precision=this.precision,e.unit=this.unit,e},e}(s.NonBoolean),s.Struct=function(t){function e(i,o,a,s,u,p){n(this,e);var l=r(this,t.apply(this,arguments));return l.entries=o.descriptions.map(function(t){var e=t[1],n=void 0;return"object"==typeof a&&(n=a[e]),p(t,n,l,u)}),l}return i(e,t),e.collectArgs=function(e,n,r){return r=Object.create(r),void 0===r.descriptions&&(r.descriptions=n),t.collectArgs.call(this,e,n,r)},e.prototype.export=function(){for(var t={},e=this.entries,n=0;n<e.length;n++){var r=e[n];r.shortenExportAssign(r.export(),t,r.name)}return t},e.prototype.fix=function(){for(var t=[],e={name:this.name,entries:t},n=this.entries,r=0;r<n.length;r++){var i=n[r];t.push(e[i.name]=i.fix())}return e},e}(s.Base),s.Collection=function(t){function o(e,i,a,s,u,p){n(this,o);var l=r(this,t.apply(this,arguments));l.availableConstructors=new Map,u&&u.enterCollection();for(var c=i.descriptions,f=function(){var t=c[h],e=t[1],n=function(e){return p(t,e,l,u)};l.availableConstructors.set(e,n)},h=0;h<c.length;h++)f();u&&u.exitCollection(),void 0!==i.typePropertyName?l.typePropertyName=i.typePropertyName:l.typePropertyName="type";var d=[];Array.isArray(a)?d=a:"object"==typeof a&&(d=a.value);var m=l.availableTypes[0],v=d.map(function(t){var e=m;"object"==typeof t&&void 0!==t[l.typePropertyName]&&(e=t[l.typePropertyName]);var n=l.availableConstructors.get(e);return n?n(t):null});return l.populateEntries(d,v),l}return i(o,t),o.collectArgs=function(e,n,r){return r=Object.create(r),void 0===r.descriptions&&(r.descriptions=n),void 0===r.typePropertyName&&(r.typePropertyName=e),t.collectArgs.call(this,e,n,r)},o.prototype.map=function(t){return this[this.getElementsPropertyName()].map(t)},o.prototype.setElementExportData=function(t,e){},o.prototype.setElementFixData=function(t,e){},o.prototype.makeEntry=function(t,e){return this.availableConstructors.get(t)(e)},o.prototype.export=function(){var t=this,e=this.availableTypes[0];return{value:this.map(function(n){var r=t.getEntryFromElement(n),i=r.export(),o=r.name;return o!=e&&(i[t.typePropertyName]=o),t.setElementExportData(n,i),r.shortenExport(i)})}},o.prototype.fix=function(){var t,e=this;return t={name:this.name},t[this.getElementsPropertyName()]=this.map(function(t){var n=e.getEntryFromElement(t),r=n.fix();return"object"==typeof r&&(r[e.typePropertyName]=n.name,e.setElementFixData(t,r)),r}),t},e(o,[{key:"availableTypes",get:function(){var t=[];return this.availableConstructors.forEach(function(e,n){t.push(n)}),t}}]),o}(s.Base),s.Void=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.export=function(){return{}},e.prototype.fix=function(){return{name:this.name}},e}(s.Base),s.Checkbox=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e}(s.Boolean),s.Select=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e}(s.Factor),s.Text=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e}(s.Factor),s.Int=function(t){function o(){return n(this,o),r(this,t.apply(this,arguments))}return i(o,t),e(o,[{key:"precision",get:function(){return 0}}]),o}(s.Number),s.Float=function(t){function e(i,o,a,s,u,p){n(this,e);var l=r(this,t.apply(this,arguments));return void 0!==o.precision?l.precision=o.precision:l.availableMax>=100?l.precision=1:l.availableMax>=10?l.precision=2:l.precision=3,l}return i(e,t),e}(s.Number),s.Root=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e}(s.Struct),s.Group=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e}(s.Struct),s.Array=function(t){function o(){return n(this,o),r(this,t.apply(this,arguments))}return i(o,t),o.prototype.getElementsPropertyName=function(){return"entries"},o.prototype.populateEntries=function(t,e){this._entries=e.filter(function(t){return!!t})},o.prototype.getEntryFromElement=function(t){return t},e(o,[{key:"entries",get:function(){return this._entries},set:function(t){this._entries=t,this.update()}}]),o}(s.Collection),o.exports=s},{}],22:[function(t,e,n){e.exports=function(t){return function(e){var n="options-output",r={en:{reset:"Reset",drag:"Drag","drag.tip":"Drag or press ↑/↓ while in focus to reorder items",delete:"Delete","delete.tip":"Delete item"},ru:{reset:"Сбросить",drag:"Перетащить","drag.tip":"Перетаскивайте или нажимайте ↑/↓, пока элемент в фокусе, чтобы изменить порядок элементов",delete:"Удалить","delete.tip":"Удалить элемент"}};for(var i in r[t])e[n+"."+i]=r[t][i];return e}}},{}],23:[function(t,e,r){var i=t(11),o=t(25),a=t(21),s=t(12),u=function(){function t(e,r,i){function o(t){for(var e=t;e=Object.getPrototypeOf(e);){var n=a.get(e.constructor);if(n)return n(t,o,i,r)}}n(this,t);var a=new Map;this.setOptionClassWriters(a),this.$output=o(e.root)}return t.prototype.getLeadLabel=function(t,e,n){return"<label for='"+t+"'>"+e("options."+n.fullName)+":</label><span class='space'> </span>"},t.prototype.setOptionClassWriters=function(t){var e=this;t.set(a.Root,function(t,e,n,r){return t.$=$("<div class='options-output'>").append(t.entries.map(e))}),t.set(a.Group,function(){return(new(Function.prototype.bind.apply(s,[null].concat(Array.prototype.slice.call(arguments))))).$output}),t.set(a.Void,function(t,e,n,r){return t.$=$("<div class='option no-lead'>").html(n("options."+t.fullName))}),t.set(a.Checkbox,function(t,e,n,r){var i=r();return t.$=$("<div class='option no-lead'>").append($("<input type='checkbox' id='"+i+"'>").prop("checked",t.value).change(function(){t.value=$(this).prop("checked")})," <label for='"+i+"'>"+n("options."+t.fullName)+"</label>")}),t.set(a.Select,function(t,n,r,i){var a=function(e){return"options."+t.fullName+"."+e},s=function(e){return"options-info."+t.fullName+"."+e},u=i(),p=void 0;return t.$=$("<div class='option'>").append(e.getLeadLabel(u,r,t),p=$("<select id='"+u+"'>").append(t.availableValues.map(function(t){return $("<option>").val(t).html(r(a(t)))})).val(t.value).change(function(){t.value=this.value})),t.availableValues.some(function(t){return r.has(s(t))})&&!function(){var e=o("info","");t.$.append(" ",e);var n=function(){r.has(s(this.value))?(e.find(".tip-content").html(r(s(this.value))),e.css("display","")):(e.css("display","none"),e.find(".tip-content").empty())};n.call(p[0]),p.change(n)}(),t.$}),t.set(a.Text,function(t,n,r,i){var o=i(),a=i();return t.$=$("<div class='option'>").append(e.getLeadLabel(o,r,t),$("<input type='text' id='"+o+"' list='"+a+"'>").val(t.value).on("input change",function(){t.value=this.value})," ",$("<datalist id='"+a+"'>").append(t.availableValues.map(function(t){return $("<option>").text(t)})))}),t.set(a.Number,function(t,n,r,a){var s=t.precision,u=function(e){return e.attr({min:t.availableMin,max:t.availableMax,step:Math.pow(.1,s).toFixed(s)})},p=function(e,n){return u(e).val(t.value).on("input change",function(){this.checkValidity()&&(n.val(this.value),t.value=parseFloat(this.value))})},l=a(),c=$("<input type='range' id='"+l+"'>"),f=$("<input type='number' required>"),h=i({min:t.availableMin,max:t.availableMax},t.precision);t.$=$("<div class='option'>").append(e.getLeadLabel(l,r,t),$("<span class='nowrap'>").append("<span class='min'>"+r.numberWithUnits(h.min,t.unit)+"</span> ",p(c,f)," <span class='max'>"+r.numberWithUnits(h.max,t.unit)+"</span>")," ",p(f,c)," ",$("<button type='button'>"+r("options-output.reset")+"</button>").click(function(){c.val(t.defaultValue).change()}));var d="options-info."+t.fullName;return r.has(d)&&t.$.append(" ",o("info",r(d))),t.$})},t}();e.exports=u},{11:11,12:12,21:21,25:25}],24:[function(t,r,i){var o=function(){function t(){n(this,t),this.options={},this.affects={},this.inCollection=0}return t.prototype.register=function(t){var e=this;this.inCollection||(this.options[t.fullName]=t,t.addUpdateCallback(function(){e.updateVisibilityAffectedBy(t.fullName)}))},t.prototype.declareAffectedBy=function(t,e){void 0===this.affects[e]&&(this.affects[e]=[]),this.affects[e].push(t)},t.prototype.updateVisibilityAffectedBy=function(t){void 0!==this.affects[t]&&this.affects[t].forEach(function(t){t.updateVisibility()})},t.prototype.enterCollection=function(){this.inCollection+=1},t.prototype.exitCollection=function(){this.inCollection-=1},t}(),a=function(){function r(t){n(this,r);var e=this.optionClasses,i=function(t,n,r,o){var a,s=t[0];if(void 0===e[s])throw new Error("invalid option type '"+s+"'");var u=t.slice(1);return(a=e[s]).make.apply(a,u)(n,r,o,i)};this.root=e.Root.make(null,this.entriesDescription)(t,null,new o,i)}return r.prototype.addUpdateCallback=function(t){this.root.addUpdateCallback(t)},r.prototype.export=function(){return this.root.shortenExport(this.root.export())},r.prototype.fix=function(){return this.root.fix()},e(r,[{key:"optionClasses",get:function(){return t(21)}},{key:"entriesDescription",get:function(){return[]}}]),r}();r.exports=a},{21:21}],25:[function(t,e,n){e.exports=function(t,e){var n=$("<span class='tip-"+t+"' tabindex='0'><span class='tip-content'>"+e+"</span></span>"),r=null,i=0,o=function(t,e){
void 0===e&&(e=200),1==t&&0==i?(clearTimeout(r),r=setTimeout(function(){n.addClass("open")},e)):t==-1&&1==i&&(clearTimeout(r),r=setTimeout(function(){n.removeClass("open")},e)),i+=t};return n.mouseenter(function(){o(1)}).focusin(function(){o(1,0)}).on("mouseleave focusout",function(){o(-1)}),n}},{}],26:[function(t,r,i){var a=o(["<link rel=stylesheet href=",">"],["<link rel=stylesheet href=",">"]),s=o(["<script src=","></script>"],["<script src=","></script>"]),u=o(["<html lang=",">"],["<html lang=",">"]),p=t(19),l=t(20),c=t(4),f=function(){function t(){n(this,t)}return t.prototype.get=function(t){return this.getLines().get(t)},t.prototype.getHtml=function(t){return this.getLines().getHtml(t)},t.prototype.extractSections=function(t){void 0===t&&(t={});var e=l.b("<style>","</style>").ae(this.cachedStyleLines),n=p.be();"paste"==t.css?(e="body"==t.html?p.be():p.bae("<!-- <style> "+this.getSectionPasteComment("css")+" </style> -->"),n=this.cachedStyleLines):"file"==t.css&&(e=p.bae(p.html(a,this.basename+".css")),n=this.cachedStyleLines);var r=l.b("<script>","</script>").ae(this.cachedScriptLines),i=p.be();"paste"==t.js?(r="body"==t.html?p.be():p.bae("<!-- <script> "+this.getSectionPasteComment("js")+" </script> -->"),i=this.cachedScriptLines):"file"==t.js&&(r=p.bae(p.html(s,this.basename+".js")),i=this.cachedScriptLines);var o=void 0;o="body"==t.html?this.getBodyHtmlSectionLines(e,r):this.getFullHtmlSectionLines(e,r);var u=function(t){return"text/"+("js"==t?"javascript":t)};return{html:new c(this.filename,u("html"),o),css:new c(this.basename+".css",u("css"),n),js:new c(this.basename+".js",u("js"),i)}},t.prototype.getLines=function(){return this.getFullHtmlSectionLines(l.b("<style>","</style>").ae(this.cachedStyleLines),l.b("<script>","</script>").ae(this.cachedScriptLines))},t.prototype.getFullHtmlSectionLines=function(t,e){var n=p.b();return n("<!DOCTYPE html>"),n(null!==this.lang?p.html(u,this.lang):"<html>"),n("<head>","<meta charset=utf-8>"),null!==this.title&&n("<title>"+this.title+"</title>"),n(t,this.cachedHeadLines,"</head>","<body>",this.cachedBodyLines,e,"</body>","</html>"),n.e()},t.prototype.getBodyHtmlSectionLines=function(t,e){return p.bae(t,this.cachedHeadLines,this.cachedBodyLines,e)},t.prototype.getSectionPasteComment=function(t){return t+" goes here"},e(t,[{key:"filename",get:function(){return this.basename+".html"}},{key:"mimeType",get:function(){return"text/html"}},{key:"cachedStyleLines",get:function(){return this._styleLines||(this._styleLines=this.styleLines),this._styleLines}},{key:"cachedHeadLines",get:function(){return this._headLines||(this._headLines=this.headLines),this._headLines}},{key:"cachedBodyLines",get:function(){return this._bodyLines||(this._bodyLines=this.bodyLines),this._bodyLines}},{key:"cachedScriptLines",get:function(){return this._scriptLines||(this._scriptLines=this.scriptLines),this._scriptLines}},{key:"basename",get:function(){return"source"}},{key:"lang",get:function(){return null}},{key:"title",get:function(){return null}},{key:"styleLines",get:function(){return p.be()}},{key:"headLines",get:function(){return p.be()}},{key:"bodyLines",get:function(){return p.be()}},{key:"scriptLines",get:function(){return p.be()}}]),t}();r.exports=f},{19:19,20:20,4:4}],27:[function(t,e,o){var a=t(9),s=t(19),u=function(t){function e(i){n(this,e);for(var o=r(this,t.call(this,i)),a=arguments.length,s=Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return o.wrappers=s,o}return i(e,t),e.prototype.isEmpty=function(){return!1},e.prototype.doGet=function(t,e){var n=this,r="\t";void 0!==t.indent&&(r=t.indent);var i=[],o=0,u=function(){var r=n.wrappers[o];if(r instanceof s){var u=r.doGet(t,e);i.push.apply(i,u)}else if("string"==typeof r){var p=e?a(r):r;i.push(p)}o++};u();for(var p=this.data,l=0;l<p.length;l++){var c=p[l];if(c instanceof s){var f=c.doGet(t,e);i.push.apply(i,f.map(function(t){return r+t})),2!=this.wrappers.length&&u()}else if("string"==typeof c){var h=e?a(c):c;i.push(r+h),2!=this.wrappers.length&&u()}}return 2==this.wrappers.length&&u(),i},e}(s);e.exports=u},{19:19,9:9}],28:[function(t,e,n){e.exports=function(t){return function(e,n){return null!=t&&void 0!==t.includes||"string"!=typeof t&&!Array.isArray(t)?t.includes(e,n):t.indexOf(e,n)!==-1}}},{}],29:[function(t,e,n){e.exports=function(t){return function(e){return null!=t&&void 0!==t.repeat||"string"!=typeof t?t.repeat(e):Array(e+1).join(t)}}},{}],30:[function(t,e,o){var a=t(18),s=t(36),u=t(31),p=function(t){function e(i){n(this,e);var o=r(this,t.call(this));return o.isSolid="solid"==i.type,o.isSolid&&o.features.push(new u("background.color",i.color.entries,"gl.clearColor",[0,0,0,0])),o}return i(e,t),e.prototype.getJsLoopLines=function(e){var n=a.ba(t.prototype.getJsLoopLines.call(this,e));return this.isSolid&&n("gl.clear(gl.COLOR_BUFFER_BIT);"),n.e()},e}(s);e.exports=p},{18:18,31:31,36:36}],31:[function(t,e,o){var a=t(18),s=t(60),u=function(t){function e(i,o,a,s){n(this,e);var u=r(this,t.call(this,i,o));return u.calledFn=a,u.calledFnDefaultArgs=s,u}return i(e,t),e.prototype.getJsUpdateLines=function(t){var e=this,n=a.b(),r=0;if(this.components.forEach(function(t){r+="slider"==t.value.input}),this.modeConstant&&this.components.every(function(t,n){return t.value==e.calledFnDefaultArgs[n]}));else if(r<=1)n(this.calledFn+"("+this.components.map(t).join(",")+");");else if(this.components.every(function(t){return"slider"==t.value.input})){var i=this.calledFn,o=i.lastIndexOf(".");o>=0&&(i=i.slice(0,o));var s="["+this.components.map(function(t){return"'"+t.suffix+"'"}).join(",")+"]";n(this.calledFn+".apply("+i+","+s+".map(function(c){","\treturn parseFloat(document.getElementById('"+this.name+".'+c).value);","}));")}else n(this.calledFn+"("),this.components.forEach(function(e,r){r>0&&n.t(","),n("\t"+t(e))}),n(");");return n.e()},e.prototype.addPostToListenerEntryAfterComponents=function(t,e){t.post(this.calledFn+"("+this.components.map(e).join(",")+");")},e}(s);e.exports=u},{18:18,60:60}],32:[function(t,e,a){var s=o(["\t<canvas id=myCanvas width="," height=","></canvas>"],["\t<canvas id=myCanvas width="," height=","></canvas>"]),u=t(19),p=t(18),l=t(42),c=t(36),f=t(41),h=function(t){function e(i){n(this,e);var o=r(this,t.call(this));return o.width=i.width,o.height=i.height,o.features.push(new f("canvas.width",i.width),new f("canvas.height",i.height)),o}return i(e,t),e.prototype.getHtmlCanvasLines=function(){return u.bae("<div>",u.html(s,this.width,this.height),"</div>")},e.prototype.getGlslVertexDeclarationLines=function(){return this.hasInputs()?u.bae("uniform float aspect;"):u.be()},e.prototype.getGlslVertexOutputLines=function(){var t=!this.hasInputs()&&Number(this.width)!=Number(this.height);return t?u.bae("float aspect="+this.width+".0/"+this.height+".0;"):u.be()},e.prototype.providesAspect=function(){return this.hasInputs()||Number(this.width)!=Number(this.height)},e.prototype.getJsInitLines=function(e){var n=this,r=p.ba(t.prototype.getJsInitLines.call(this,e)),i=function(){r("function updateAspect() {","\tgl.viewport(0,0,canvas.width,canvas.height);","\tgl.uniform1f(aspectLoc,canvas.width/canvas.height);","}","updateAspect();")},o=function(t){if("slider"==n[t].input){var i=new l.Slider("canvas."+t);i.enter().log("console.log(this.id,'input value:',parseInt(this.value));").post("canvas."+t+"=parseInt(this.value);").post("updateAspect();"),r(e.getListenerLines(i))}};return this.hasInputs()&&(r("var aspectLoc=gl.getUniformLocation(program,'aspect');"),i(),o("width"),o("height")),r.e()},e}(c);e.exports=h},{18:18,19:19,36:36,41:41,42:42}],33:[function(t,o,a){var s=t(48),u=t(35),p=t(32),l=t(30),c=t(58),f=t(39),h=t(19),d=t(18),m=t(27),v=t(20),g=t(17),y=t(16),b=t(26),x=function(t){function o(e,i){n(this,o);var a=r(this,t.call(this));a.options=e,a.i18n=i,a.featureContext=new u(e.debug),a.canvas=new p(e.canvas),a.background=new l(e.background),a.transforms=new c(e.transforms),a.illumination=new f(e.material,e.light);var h=function(){return new(s[String(e.shape.type)])(e.shape,"off"!=e.light.type,"vertex"==e.material.scope,"face"==e.material.scope,a.illumination.getColorAttrs())};return a.shape=h(),a.features=[a.canvas,a.background,a.transforms,a.illumination,a.shape],a.featureNames=["canvas","background","transforms","illumination","shape"],a.features.forEach(function(t){t.requestFeatureContext(a.featureContext)}),a}return i(o,t),e(o,[{key:"basename",get:function(){return"webgl"}},{key:"lang",get:function(){return"en"}},{key:"title",get:function(){return"WebGL example - Generated code"}},{key:"styleLines",get:function(){var t=h.b();return this.featureContext.hasSliders&&t("label {","\tdisplay: inline-block;","\twidth: 15em;","\ttext-align: right;","}",".min {","\tdisplay: inline-block;","\twidth: 5em;","\ttext-align: right;","}",".max {","\tdisplay: inline-block;","\twidth: 5em;","\ttext-align: left;","}"),t.e()}},{key:"headLines",get:function(){var t=this,e=function(){var e=t.illumination.wantsTransformedPosition(t.transforms.eyeAtInfinity);return h.bae(t.canvas.getGlslVertexDeclarationLines(),t.transforms.getGlslVertexDeclarationLines(2==t.shape.dim),t.illumination.getGlslVertexDeclarationLines(t.transforms.eyeAtInfinity,t.shape.dim>2),m.b("void main() {","}").ae(t.canvas.getGlslVertexOutputLines(),t.transforms.getGlslVertexOutputLines(2==t.shape.dim,t.canvas.providesAspect(),e),t.illumination.getGlslVertexOutputLines(t.transforms.eyeAtInfinity,t.shape.hasNormals,t.transforms.getGlslVertexNormalTransformLines())))},n=function(){return h.bae("precision mediump float;",t.illumination.getGlslFragmentDeclarationLines(t.transforms.eyeAtInfinity),m.b("void main() {","}").ae(t.illumination.getGlslFragmentOutputLines(t.transforms.eyeAtInfinity,t.shape.twoSided)))};return h.bae(m.b("<script id=myVertexShader type=x-shader/x-vertex>","</script>").ae(e()),m.b("<script id=myFragmentShader type=x-shader/x-fragment>","</script>").ae(n()))}},{key:"bodyLines",get:function(){var t,e=this;return h.bae.apply(h,[this.canvas.getHtmlCanvasLines(),(t=v.b("<ul>","</ul>")).ae.apply(t,this.features.map(function(t){return t.getHtmlControlMessageLines(e.i18n)}))].concat(this.features.map(function(t){return t.getHtmlInputLines(e.i18n)})))}},{key:"scriptLines",get:function(){var t=this,e=function(){var e=d.b();return e("var vertexShader=gl.createShader(gl.VERTEX_SHADER);","gl.shaderSource(vertexShader,vertexShaderSrc);","gl.compileShader(vertexShader);"),t.options.debugShaders&&e("if (!gl.getShaderParameter(vertexShader,gl.COMPILE_STATUS)) console.log(gl.getShaderInfoLog(vertexShader));"),e("var fragmentShader=gl.createShader(gl.FRAGMENT_SHADER);","gl.shaderSource(fragmentShader,fragmentShaderSrc);","gl.compileShader(fragmentShader);"),t.options.debugShaders&&e("if (!gl.getShaderParameter(fragmentShader,gl.COMPILE_STATUS)) console.log(gl.getShaderInfoLog(fragmentShader));"),e("var program=gl.createProgram();","gl.attachShader(program,vertexShader);","gl.attachShader(program,fragmentShader);","gl.linkProgram(program);","return program;"),e.e()},n=function(){var n=d.b();n(m.b(d.bae("function makeProgram(vertexShaderSrc,fragmentShaderSrc) {"),d.bae("}")).ae(e()),"var canvas=document.getElementById('myCanvas');","var gl=canvas.getContext('webgl')||canvas.getContext('experimental-webgl');","var program=makeProgram(","\tdocument.getElementById('myVertexShader').text,","\tdocument.getElementById('myFragmentShader').text",");","gl.useProgram(program);");var r=function(t,e){t.count()>0&&n("","// "+e,t)};return t.features.forEach(function(e,n){r(e.getJsInitLines(t.featureContext),"init "+t.featureNames[n])}),r(t.featureContext.getJsAfterInitLines(),"init mousemove listener"),n.e()},r=function(){var e=d.b();return t.featureContext.hasClampFn&&e("function clamp(v,min,max) {","\treturn Math.min(Math.max(v,min),max);","}"),t.featureContext.hasWrapFn&&e("function wrap(v,maxAbs) {","\tv%=maxAbs*2;","\tif (Math.abs(v)<=maxAbs) return v;","\treturn v-(v>0?1:-1)*maxAbs*2;","}"),t.featureContext.pollsGamepad&&e("var gamepad;","var gamepads=(navigator.getGamepads ? navigator.getGamepads() : []);","for (var i=0;i<gamepads.length;i++) {","\tif (gamepads[i]) {","\t\tgamepad=gamepads[i];","\t\tbreak;","\t}","}"),e.apply(void 0,t.features.map(function(e){return e.getJsLoopLines(t.featureContext)})),e.e()},i=function(){var e=d.b();return t.featureContext.hasStartTime&&t.featureContext.hasPrevTime?(e("var startTime=performance.now();"),e("var prevTime=startTime;")):t.featureContext.hasStartTime?e("var startTime=performance.now();"):t.featureContext.hasPrevTime&&e("var prevTime=performance.now();"),t.featureContext.isAnimated?(e(t.featureContext.hasTime?"function renderFrame(time) {":"function renderFrame() {"),e(y.bae(r())),t.featureContext.hasPrevTime&&e("\tprevTime=time;"),e("\trequestAnimationFrame(renderFrame);","}","requestAnimationFrame(renderFrame);")):t.featureContext.hasInputs?e("var frameId=null;","function renderFrame() {",y.bae(r()),"\tframeId=null;","}","function scheduleFrame() {","\tif (frameId===null) {","\t\tframeId=requestAnimationFrame(renderFrame);","\t}","}","scheduleFrame();"):e(r()),e.e()};return g.bae(n(),i())}}]),o}(b);o.exports=x},{16:16,17:17,18:18,19:19,20:20,26:26,27:27,30:30,32:32,35:35,39:39,48:48,58:58}],34:[function(t,e,n){var r=0,i=function(t,e,n){this.weight=t,this.noise=e,void 0===e&&(this.noise=.4),this.baseColors=n||this.defaultBaseColors,this.colorgenNumber=r++,this.nextIndex=0};i.prototype.defaultBaseColors=[[1,0,0],[0,1,0],[0,0,1],[1,1,0],[1,0,1],[0,1,1]],i.prototype.getNextColorString=function(){var t=this.baseColors[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.baseColors.length,t.map(function(t,e){var n=Math.sin(9e3*this.colorgenNumber+400*this.nextIndex+100*e),r=(t*(1-this.noise)+n*n*this.noise)*this.weight;return" "+r.toFixed(1)+","},this).join("")};var o=function(t,e,n){this.colorAttrs=t,this.singleColorgens=this.colorAttrs.map(function(t){return new i(t.weight,e,n)})};o.prototype.getHeaderString=function(){return this.colorAttrs.map(function(){return"    r    g    b"}).join("")},o.prototype.getNextColorString=function(){return this.singleColorgens.map(function(t){return t.getNextColorString()}).join("")},e.exports=o},{}],35:[function(t,r,i){var o=t(42),a=function(){function t(e){n(this,t),this.debugOptions=e,this.canvasMousemoveListener=new o.CanvasMousemove,this.hasSliders=!1,this.hasInputs=!1,this.hasStartTime=!1,this.hasPrevTime=!1,this.pollsGamepad=!1,this.hasClampFn=!1,this.hasWrapFn=!1}return t.prototype.getJsAfterInitLines=function(){return this.canvasMousemoveListener.write(!this.isAnimated,this.debugOptions.inputs)},t.prototype.getListenerLines=function(t){return t.write(!this.isAnimated,this.debugOptions.inputs)},e(t,[{key:"hasTime",get:function(){return this.hasStartTime||this.hasPrevTime}},{key:"isAnimated",get:function(){return this.hasStartTime||this.hasPrevTime||this.pollsGamepad}}]),t}();r.exports=a},{42:42}],36:[function(t,e,r){var i=t(19),o=function(){function t(){n(this,t),this.features=[]}return t.prototype.getRecursiveLines=function(t,e){return i.bae.apply(i,this.features.map(function(n){return n[t].apply(n,e)}))},t.prototype.hasInputs=function(){return this.features.some(function(t){return t.hasInputs()})},t.prototype.requestFeatureContext=function(t){this.features.forEach(function(e){e.requestFeatureContext(t)})},t.prototype.getHtmlInputLines=function(t){return this.getRecursiveLines("getHtmlInputLines",arguments)},t.prototype.getHtmlControlMessageLines=function(t){return this.getRecursiveLines("getHtmlControlMessageLines",arguments)},t.prototype.getJsInitLines=function(t){return this.getRecursiveLines("getJsInitLines",arguments)},t.prototype.getJsLoopLines=function(t){return this.getRecursiveLines("getJsLoopLines",arguments)},t}();e.exports=o},{19:19}],37:[function(t,e,o){var a=t(11),s=t(19),u=t(18),p=t(60),l=function(t){function e(i,o,a){return n(this,e),r(this,t.call(this,i,o,a))}return i(e,t),e.prototype.getGlslDeclarationLines=function(){var t=this;if(this.modeConstant)return s.be();if(!this.modeFloats)return s.bae("uniform vec"+this.nVars+" "+this.varName+";");var e=function(){var e=s.b();return t.components.forEach(function(t){t.variable&&e("uniform float "+t.varName+";")}),{v:e.e()}}();return"object"==typeof e?e.v:void 0},e.prototype.getGlslValue=function(){return this.getGlslComponentsValue(this.components.map(function(t){return t.suffix}).join(""))},e.prototype.getGlslComponentsValue=function(t){for(var e=this,n={},r=[],i=0;i<t.length;i++){var o=t.charAt(i);if(this.componentsBySuffix[o].variable)if(this.modeVector&&r.length>0){var s=r.pop();s[0]?r.push(s,[!1,o]):r.push([s[0],s[1]+o])}else r.push([!1,o]);else n[o]=this.componentsBySuffix[o].value,r.push([!0,o])}var u=a.glsl(n),p=this.components.map(function(t){return t.suffix}).slice(0,this.nVars).join(""),l=function(){if(!r[0][0])return!1;var t=u[r[0][1]];return r.every(function(e){return e[0]&&u[e[1]]==t})},c=function(t){return t[0]?u[t[1]]:e.modeVector?t[1]==p?e.varName:e.varName+"."+t[1]:e.componentsBySuffix[t[1]].varName};return 1==r.length?this.modeVector&&t==p?this.varName:c(r[0]):l()?"vec"+t.length+"("+c(r[0])+")":"vec"+t.length+"("+r.map(c).join(",")+")"},e.prototype.getGlslMapDeclarationLines=function(t,e){return this.components.length>1?s.bae("vec"+this.components.length+" "+t+"="+e(this.getGlslValue())+";"):s.bae("float "+t+this.components[0].suffix+"="+e(this.getGlslValue())+";")},e.prototype.getGlslMapComponentValue=function(t,e){return this.components.length>1?t+"."+e:t+e},e.prototype.getJsDeclarationLines=function(){var t=u.b();return this.modeConstant?t.e():(this.modeFloats?this.components.forEach(function(e){e.variable&&t("var "+e.varNameLoc+"=gl.getUniformLocation(program,'"+e.varName+"');")}):t("var "+this.varName+"Loc=gl.getUniformLocation(program,'"+this.varName+"');"),t.e())},e.prototype.getJsUpdateLines=function(t){var e=u.b();return this.modeVector?(e("gl.uniform"+this.nVars+"f("+this.varName+"Loc"),this.components.every(function(t){return"slider"!=t.value.input})?(this.components.forEach(function(n){n.variable&&e.t(","+t(n))}),e.t(");")):(this.components.forEach(function(n){n.variable&&e.t(",","\t"+t(n))}),e(");"))):this.components.forEach(function(n){n.variable&&e("gl.uniform1f("+n.varNameLoc+","+t(n)+");")}),e.e()},e.prototype.addPostToListenerEntryForComponent=function(t,e){this.modeVector||t.post("gl.uniform1f("+e.varNameLoc+","+e.varName+");")},e.prototype.addPostToListenerEntryAfterComponents=function(t,e){var n=this;this.modeVector&&!function(){var e=[];n.components.forEach(function(t,r){r<n.nVars&&e.push(t.varName)}),t.post("gl.uniform"+n.nVars+"f("+n.varName+"Loc,"+e.join(",")+");")}()},e}(p);e.exports=l},{11:11,18:18,19:19,60:60}],38:[function(t,e,n){var r={en:{"options.canvas":"Canvas","options.canvas.{width,height}":"Canvas {}","options.background":"Background","options.background.type":"Background type","options.background.type.none":"none (transparent)","options.background.type.solid":"solid color","options.background.color":"Background color","options.background.color.{r,g,b,a}":"Background color {red,green,blue,alpha} component","options.background.color.{r,g,b,a}.speed":"Background color {red,green,blue,alpha} speed","options.material":"Material","options.material.scope":"Set material color for objects","options.material.scope.global":"entire scene","options.material.scope.vertex":"shape vertices","options.material.scope.face":"shape faces","options.material.data":"For each object have","options.material.data.one":"one color","options.material.data.sda":"specular/diffuse/ambient colors","options.material.color":"Material color","options.material.color.{r,g,b,a}":"Material color {red,green,blue,alpha} component","options.material.color.{r,g,b,a}.speed":"Material color {red,green,blue,alpha} speed","options.material.{specular,diffuse,ambient}Color":"Material {} color","options.material.{specular,diffuse,ambient}Color.{r,g,b}":"{Specular,Diffuse,Ambient} color {red,green,blue} component","options.material.{specular,diffuse,ambient}Color.{r,g,b}.speed":"Material {} color {red,green,blue,alpha} speed","options-info.material.data.sda":"for use with Phong/Blinn–Phong shading models selected by <em>light type</em>","options.light":"Light","options.light.type":"Light type","options.light.type.off":"off","options.light.type.phong":"on with Phong reflections","options.light.type.blinn":"on with Blinn–Phong reflections","options.light.direction":"Light direction","options.light.direction.{x,y,z}":"Light direction {} component","options.light.direction.{x,y,z}.speed":"Light direction {} speed","options-info.light.type.phong":"[[Shading#Directional_lighting|directional light]] with [[Phong reflection model]]","options-info.light.type.blinn":"[[Shading#Directional_lighting|directional light]] with [[Blinn–Phong shading model|Blinn–Phong reflection model]]","options.shape":"Shape","options.shape.type":"Shape to draw","options.shape.type.square":"square","options.shape.type.triangle":"triangle","options.shape.type.gasket":"Sierpinski gasket","options.shape.type.cube":"cube","options.shape.type.hat":"Mexican hat function","options.shape.type.terrain":"diamond-square fractal terrain","options.shape.elements":"Element array","options.shape.elements.0":"not used","options.shape.elements.{8,16,32}":"with {}-bit index","options.shape.lod":"Shape detail level","options-info.shape.type.gasket":"[[Sierpinski triangle]]","options-info.shape.type.hat":"[[Mexican hat wavelet]]","options-info.shape.type.terrain":"generated with the [[Diamond-square algorithm|diamond-square algorithm]]","options-info.shape.elements.{8,16}":"choosing 8- or 16-bit index may limit available shape detail levels","options.transforms":"Transforms","options.transforms.projection":"Projection","options.transforms.projection.ortho":"orthogonal","options.transforms.projection.perspective":"perspective","options.transforms.model":"Model transform","options.transforms.model.rotate.{x,y,z}.add":"Add rotation around {} axis","options.transforms.model.rotate.{x,y,z}":"Angle of rotation around {} axis","options.transforms.model.rotate.{x,y,z}.speed":"Speed of rotation around {} axis","options-info.transforms.projection.ortho":"[[Orthographic projection|orthographic projection]]","options-info.transforms.projection.perspective":"[[Transformation_matrix#Perspective_projection|perspective projection]]","options.debug":"Debug options","options.debug.shaders":"Log shader compilation errors","options.debug.arrays":"Log allocated array sizes","options.debug.inputs":"Log input values","options.debug.animations":"Log animated values","options-output.inputs":"Input method","options-output.inputs.constant":"none","options-output.inputs.slider":"slider","options-output.inputs.mousemove{x,y}":"mouse {} axis","options-output.inputs.gamepad{0,1,2,3}":"gamepad {} axis","options-output.range":"with range","options-output.addSpeed":"Add speed","controls.type.mousemove{x,y}":"Move the mouse pointer {horizontally,vertically} over the canvas","controls.to":"to update","units.pixel.a":"px","units.pixel.{1,2}":"pixel{,s}","units.°/second.a":"°/s","units.°/second.{1,2}":"degree{,s} per second","units.second.a":"s","units.1/second.{1,2}":"unit{,s} per second"},ru:{"options.canvas":"Элемент <code>canvas</code>","options.canvas.{width,height}":"{Ширина,Высота} элемента <code>canvas</code>","options.background":"Фон","options.background.type":"Тип фона","options.background.type.none":"прозрачный","options.background.type.solid":"закрашенный","options.background.color":"Цвет фона","options.background.color.{r,g,b,a}":"{Красный ,Зелёный ,Синий ,Альфа-}канал фона","options.background.color.{r,g,b,a}.speed":"Скорость {красного ,зелёного ,синего ,альфа-}канала фона","options.material":"Материал","options.material.scope":"Задавать цвета данных объектов","options.material.scope.global":"всей сцены","options.material.scope.vertex":"вершин фигур","options.material.scope.face":"граней фигур","options.material.data":"Задавать для каждого объекта","options.material.data.one":"один цвет","options.material.data.sda":"бликовую/рассеянную/фоновую составляющие","options.material.color":"Цвет материала","options.material.color.{r,g,b,a}":"{Красный ,Зелёный ,Синий ,Альфа-}канал материала","options.material.color.{r,g,b,a}.speed":"Скорость {красного ,зелёного ,синего ,альфа-}канала материала","options.material.{specular,diffuse,ambient}Color":"{Бликовая,Рассеянная,Фоновая} составляющая цвета материала","options.material.specularColor.{r,g,b}":"{Красный,Зелёный,Синий} канал бликовой составляющей","options.material.diffuseColor.{r,g,b}":"{Красный,Зелёный,Синий} канал рассеянной составляющей","options.material.ambientColor.{r,g,b}":"{Красный,Зелёный,Синий} канал фоновой составляющей","options.material.specularColor.{r,g,b}.speed":"Скорость {красного,зелёного,синего} канала бликовой составляющей","options.material.diffuseColor.{r,g,b}.speed":"Скорость {красного,зелёного,синего} канала рассеянной составляющей","options.material.ambientColor.{r,g,b}.speed":"Скорость {красного,зелёного,синего} канала фоновой составляющей","options-info.material.data.sda":"для использования с моделями освещения Фонга/Блинна-Фонга, задаваемыми <em>типом света</em>","options.light":"Свет","options.light.type":"Тип света","options.light.type.off":"отключен","options.light.type.phong":"включен с отражениями по Фонгу","options.light.type.blinn":"включен с отражениями по Блинну-Фонгу","options.light.direction":"Направление света","options.light.direction.{x,y,z}":"{}-компонент направления света","options.light.direction.{x,y,z}.speed":"скорость {}-компонента направления света","options-info.light.type.phong":"направленный свет с [[Затенение_по_Фонгу#.D0.9C.D0.BE.D0.B4.D0.B5.D0.BB.D1.8C_.D0.BE.D1.81.D0.B2.D0.B5.D1.89.D0.B5.D0.BD.D0.B8.D1.8F|моделью освещения Фонга]]","options-info.light.type.blinn":"направленный свет с моделью освещения Блинна-Фонга","options.shape":"Фигура","options.shape.type":"Рисовать фигуру","options.shape.type.square":"квадрат","options.shape.type.triangle":"треугольник","options.shape.type.gasket":"салфетка Серпинского","options.shape.type.cube":"куб","options.shape.type.hat":"Mexican hat function","options.shape.type.terrain":"фрактальный ландшафт","options.shape.elements":"Element array","options.shape.elements.0":"не используется","options.shape.elements.{8,16,32}":"с {}-битным индексом","options.shape.lod":"Уровень детализации","options-info.shape.type.gasket":"[[Треугольник Серпинского|треугольник Серпинского]]","options-info.shape.type.terrain":"сгенерирован [[Алгоритм Diamond-Square|алгоритмом diamond-square]]","options-info.shape.elements.{8,16}":"выбор 8- или 16-битного индекса может ограничить доступные уровни детализации","options.transforms":"Преобразования","options.transforms.projection":"Проекция","options.transforms.projection.ortho":"ортогональная","options.transforms.projection.perspective":"перспективная","options.transforms.model":"Преобразование модели","options.transforms.model.rotate.{x,y,z}.add":"Добавить вращение вокруг оси {}","options.transforms.model.rotate.{x,y,z}":"Угол поворота вокруг оси {}","options.transforms.model.rotate.{x,y,z}.speed":"Скорость поворота вокруг оси {}","options.debug":"Отладка","options.debug.shaders":"Выводить ошибки компиляции шейдеров","options.debug.arrays":"Выводить размеры выделенных массивов","options.debug.inputs":"Выводить значения вводов","options.debug.animations":"Выводить анимированные значения","options-output.inputs":"Способ ввода","options-output.inputs.constant":"нет","options-output.inputs.slider":"ползунок","options-output.inputs.mousemove{x,y}":"ось {} мыши","options-output.inputs.gamepad{0,1,2,3}":"ось {} геймпада","options-output.range":"с диапазоном","options-output.addSpeed":"Добавить скорость","controls.type.mousemove{x,y}":"Перемещайте указатель мыши над элементом <code>canvas</code> в {горизонтальном,вертикальном} направлении,","controls.to":"чтобы изменить","units.pixel.a":"px","units.pixel.{1,2,5}":"пиксел{ь,я,ей}","units.°/second.a":"°/с","units.°/second.{1,2,5}":"градус{,а,ов} в секунду","units.second.a":"с","units.1/second.{1,2,5}":"единиц{а,ы,} в секунду"}};for(var i in r){var o=r[i];o=t(13)(o),o=t(14)(i)(o),o=t(22)(i)(o),o=t(2)(i)(o),r[i]=o}e.exports=t(15)(r)},{13:13,14:14,15:15,2:2,22:22}],39:[function(t,e,o){var a=t(45),s=t(19),u=t(27),p=t(36),l=t(37),c=function(t){function e(i,o){n(this,e);var s=r(this,t.call(this));return s.material=i,s.light=o,"global"==i.scope&&("one"==i.data?s.features.push(s.colorVector=new l("material.color",i.color.entries)):"off"!=o.type?s.features.push(s.specularColorVector=new l("material.specularColor",i.specularColor.entries),s.diffuseColorVector=new l("material.diffuseColor",i.diffuseColor.entries),s.ambientColorVector=new l("material.ambientColor",i.ambientColor.entries)):s.features.push(s.ambientColorVector=new l("material.ambientColor",[].concat(i.ambientColor.entries,[a.LiveFloat.make("a",[0,1,-1,1],1)().fix()])))),"off"!=o.type&&s.features.push(s.lightDirectionVector=new l("light.direction",o.direction.entries)),s}return i(e,t),e.prototype.getColorAttrs=function(){return"global"==this.material.scope?[]:"one"==this.material.data?[{name:"color",enabled:!0,weight:1}]:[{name:"specularColor",enabled:"off"!=this.light.type,weight:.4},{name:"diffuseColor",enabled:"off"!=this.light.type,weight:.4},{name:"ambientColor",enabled:!0,weight:.2}]},e.prototype.wantsTransformedPosition=function(t){return!t&&"off"!=this.light.type&&"one"!=this.material.data},e.prototype.getGlslVertexDeclarationLines=function(t,e){var n=s.b();return this.wantsTransformedPosition(t)&&n("varying vec3 interpolatedView;"),"off"!=this.light.type&&(e&&n("attribute vec3 normal;"),n("varying vec3 interpolatedNormal;")),"global"!=this.material.scope&&("one"==this.material.data?(n("attribute vec4 color;"),n("varying vec4 interpolatedColor;")):"off"==this.light.type?(n("attribute vec4 ambientColor;"),n("varying vec4 interpolatedColor;")):n("attribute vec3 specularColor;","attribute vec3 diffuseColor;","attribute vec3 ambientColor;","varying vec3 interpolatedSpecularColor;","varying vec3 interpolatedDiffuseColor;","varying vec3 interpolatedAmbientColor;")),n.e()},e.prototype.getGlslVertexOutputLines=function(t,e,n){var r=s.b();return this.wantsTransformedPosition(t)&&r("interpolatedView=-transformedPosition.xyz;"),"off"!=this.light.type&&(r("interpolatedNormal="),e?r.t("normal"):r.t("vec3(0.0,0.0,1.0)"),r.t(n),r.t(";")),"global"!=this.material.scope&&("one"==this.material.data?r("interpolatedColor=color;"):"off"==this.light.type?r("interpolatedColor=ambientColor;"):r("interpolatedSpecularColor=specularColor;","interpolatedDiffuseColor=diffuseColor;","interpolatedAmbientColor=ambientColor;")),r.e()},e.prototype.getGlslFragmentDeclarationLines=function(t){var e=s.b();return this.wantsTransformedPosition(t)&&e("varying vec3 interpolatedView;"),"off"!=this.light.type&&e(this.lightDirectionVector.getGlslDeclarationLines(),"varying vec3 interpolatedNormal;"),"global"==this.material.scope?"one"==this.material.data?e(this.colorVector.getGlslDeclarationLines()):("off"!=this.light.type&&(e(this.specularColorVector.getGlslDeclarationLines()),e(this.diffuseColorVector.getGlslDeclarationLines())),e(this.ambientColorVector.getGlslDeclarationLines())):"one"==this.material.data||"off"==this.light.type?e("varying vec4 interpolatedColor;"):e("varying vec3 interpolatedSpecularColor;","varying vec3 interpolatedDiffuseColor;","varying vec3 interpolatedAmbientColor;"),e.e()},e.prototype.getGlslFragmentOutputLines=function(t,e){var n=this,r=s.b(),i=void 0,o=void 0,a=void 0;if("global"==this.material.scope?!function(){var t="one"==n.material.data?n.colorVector:n.ambientColorVector;i=function(){return t.getGlslComponentsValue("rgb")},o=function(){return t.getGlslComponentsValue("a")},a=function(){return t.getGlslValue()}}():(i=function(){return"interpolatedColor.rgb"},o=function(){return"interpolatedColor.a"},a=function(){return"interpolatedColor";
}),"off"==this.light.type)r("gl_FragColor="+a()+";");else if(r("vec3 N=normalize(interpolatedNormal);"),e&&r("if (!gl_FrontFacing) N=-N;"),r("vec3 L=normalize("+this.lightDirectionVector.getGlslValue()+");"),"one"==this.material.data)r("gl_FragColor=vec4("+i()+"*max(0.0,dot(L,N)),"+o()+");");else{r(this.wantsTransformedPosition(t)?"vec3 V=normalize(interpolatedView);":"vec3 V=vec3(0.0,0.0,1.0);");var p="H,N",l="";"blinn"==this.light.type?r("vec3 H=normalize(L+V);"):(r("vec3 R=reflect(-L,N);"),p="R,V",l="/4.0"),r("float shininess=100.0;"),r(u.b("gl_FragColor=vec4(",",1.0);").ae("global"==this.material.scope?s.bae("+"+this.specularColorVector.getGlslValue()+"*pow(max(0.0,dot("+p+")),shininess"+l+")","+"+this.diffuseColorVector.getGlslValue()+"*max(0.0,dot(L,N))","+"+this.ambientColorVector.getGlslValue()):s.bae("+interpolatedSpecularColor*pow(max(0.0,dot("+p+")),shininess"+l+")","+interpolatedDiffuseColor*max(0.0,dot(L,N))","+interpolatedAmbientColor")))}return r.e()},e}(p);e.exports=c},{19:19,27:27,36:36,37:37,45:45}],40:[function(t,e,o){function a(t){return new{constant:u,slider:l,mousemovex:c,mousemovey:c,gamepad0:f,gamepad1:f,gamepad2:f,gamepad3:f}[t](t)}var s=function(){function t(e){n(this,t),this._str=e}return t.prototype.toString=function(){return this._str},t.prototype.valueOf=function(){return this._str},t}(),u=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e}(s),p=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e}(s),l=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e}(p),c=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.axis=i.slice(-1),o}return i(e,t),e}(p),f=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.axis=Number(i.slice(-1)),o}return i(e,t),e}(p);o.Base=s,o.Constant=u,o.Variable=p,o.Slider=l,o.MouseMove=c,o.Gamepad=f,o.createFromString=a},{}],41:[function(t,e,o){var a=(t(11),t(19)),s=t(44),u=function(t){function e(i,o){n(this,e);var a=r(this,t.call(this));return a.name=i,a.value=o,a}return i(e,t),e.prototype.hasInputs=function(){return t.prototype.hasInputs.call(this)||"constant"!=this.value.input},e.prototype.requestFeatureContext=function(e){t.prototype.requestFeatureContext.call(this,e),"constant"!=this.value.input&&(e.hasInputs=!0),"slider"==this.value.input&&(e.hasSliders=!0)},e.prototype.getHtmlControlMessageLines=function(e){var n=a.ba(t.prototype.getHtmlControlMessageLines.call(this,e));return n(this.getHtmlControlMessageForValue(e,this.value,this.name)),n.e()},e.prototype.getHtmlInputLines=function(e){var n=a.ba(t.prototype.getHtmlInputLines.call(this,e));return n(this.getHtmlSliderLines(e,this.value,"options."+this.name,this.name,!1)),n.e()},e}(s);e.exports=u},{11:11,19:19,44:44}],42:[function(t,e,o){var a=t(7),s=t(18),u=t(27),p=function(){function t(){n(this,t),this.entries=[]}return t.prototype.enter=function(){function t(t){return function(){return t.push.apply(t,arguments),n}}var e={pre:[],cond:null,log:[],post:[]};this.entries.push(e);var n={pre:t(e.pre),cond:function(t){return e.cond=t,n},log:t(e.log),post:t(e.post)};return n},t.prototype.prependedStatements=function(){return[]},t.prototype.bracketFnArg=function(){return""},t.prototype.wrapCall=function(t){return t},t.prototype.write=function(t,e){var n={},r=[],i=null,o=0,a=1,p=2,l=function(t,e){var r=void 0;r=t in n?n[t]:n[t]={prevs:[],conds:[],mark:o},null!==r.conds&&(null===e?r.conds=null:r.conds.push(e)),null!==i&&r.prevs.push(i),i=t},c=function(){null!==i&&r.push(i),i=null},f=function(){var t=[],e=null,i=function(n,r){var i=null;null!==r.conds&&(i=r.conds.join(" || ")),i!=e&&(null!==e&&t.push("}"),e=i,null!==e&&t.push("if ("+e+") {")),null!==e?t.push("\t"+n):t.push(n)},s=function(t,e){e.mark=a,u(e.prevs),e.mark=p,i(t,e)},u=function(t){t.forEach(function(t){n[t].mark==o&&s(t,n[t])})};return u(r),null!==e&&t.push("}"),t};this.entries.forEach(function(n){n.pre.forEach(function(t){l(t,null)}),e&&n.log.forEach(function(t){l(t,n.cond)}),n.post.forEach(function(t){l(t,n.cond)}),t&&l("scheduleFrame();",n.cond),c()});var h=this.bracketListener(),d=f();if(d.length>0&&(d=[].concat(this.prependedStatements(),d)),1==d.length){var m=/^(\w+)\(\);$/.exec(d[0]);if(m)return this.wrapCall(s.bae(h[0]+m[1]+h[1]))}return d.length>0?this.wrapCall(u.b(s.bae(h[0]+"function("+this.bracketFnArg()+"){"),s.bae("}"+h[1])).ae(s.bae.apply(s,d))):s.be()},t}(),l=function(t){function e(i){n(this,e);var o=r(this,t.call(this));return o.id=i,o}return i(e,t),e.prototype.bracketListener=function(){return["document.getElementById('"+this.id+"').addEventListener('change',",");"]},e}(p),c=function(t){function e(i){n(this,e);var o=r(this,t.call(this));return o.query=i,o}return i(e,t),e.prototype.bracketListener=function(){return["el.addEventListener('change',",");"]},e.prototype.wrapCall=function(t){return u.b(s.bae(";[].forEach.call(document.querySelectorAll('"+this.query+"'),function(el){"),s.bae("});")).ae(t)},e}(p),f=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.enter=function(){var e=t.prototype.enter.call(this),n=function(t,n,r,i,o,s){var u=a(i),p=void 0;return 0==o&&1==s?p=(n?"var ":"")+i+"=":(e.pre("var min"+u+"="+o+";"),e.pre("var max"+u+"="+s+";"),p=(n?"var ":"")+i+"=min"+u+"+(max"+u+"-min"+u+")*"),e.prexy(r,p+"(ev.clientX-rect.left)/(rect.width-1);",p+"(rect.bottom-1-ev.clientY)/(rect.height-1);")};return e.prexy=function(t,n,r){return"x"==t.axis?e.pre(n):"y"==t.axis?e.pre(r):e},e.minMaxFloat=function(t,e,r,i){return n(!0,!1,t,e,r,i)},e.minMaxVarFloat=function(t,e,r,i){return n(!0,!0,t,e,r,i)},e.newVarInt=function(t,n){var r=a(n);return e.prexy(t,"var new"+r+"=Math.floor(min"+r+"+(max"+r+"-min"+r+"+1)*(ev.clientX-rect.left)/rect.width);","var new"+r+"=Math.floor(min"+r+"+(max"+r+"-min"+r+"+1)*(rect.bottom-1-ev.clientY)/rect.height);")},e},e.prototype.bracketListener=function(){return["canvas.addEventListener('mousemove',",");"]},e.prototype.bracketFnArg=function(){return"ev"},e.prototype.prependedStatements=function(){return["var rect=this.getBoundingClientRect();"]},e}(p);o.Slider=l,o.MultipleSlider=c,o.CanvasMousemove=f},{18:18,27:27,7:7}],43:[function(t,e,n){function r(){return"webgl-starter-id-"+i++}var i=0,o=t(38),a=t(47),s=t(33),u=t(46),p=t(3);$(function(){$(".webgl-starter").each(function(){var t=$(this),e=t.closest("[lang]").attr("lang"),n=o(e),i=new a,l=new p(function(){return new s(i.fix(),n)},n);i.addUpdateCallback(l.update);var c=new u(i,r,n);t.empty().append(c.$output,l.$output)})})},{3:3,33:33,38:38,46:46,47:47}],44:[function(t,e,a){var s=o(["<abbr title=",">"],["<abbr title=",">"]),u=o(["\t<label for=",">"],["\t<label for=",">"]),p=o(["\t<input type=range id="," min="," max="," value="," step=",">"],["\t<input type=range id="," min="," max="," value="," step=",">"]),l=t(11),c=t(40),f=t(19),h=t(36),d=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.getHtmlControlMessageForValue=function(t,e,n){return e.input instanceof c.MouseMove?f.bae("<li>"+t("controls.type."+e.input)+" "+t("controls.to")+" <strong>"+t("options."+n)+"</strong></li>"):f.be()},e.prototype.getHtmlSliderLines=function(t,e,n,r,i){var o=f.b();if("slider"==e.input){var a=l.html({min:e.min,max:e.max,value:e.value},e.precision),c=l({min:e.min,max:e.max},e.precision),h=function(n){return t.numberWithUnits(n,e.unit,function(t,e){return f.html(s,e)+t+"</abbr>"})};o("<div>",f.html(u,r)+t(n)+"</label>","\t<span class=min>"+h(c.min)+"</span>",f.html(p,r,a.min,a.max,a.value,i),"\t<span class=max>"+h(c.max)+"</span>","</div>")}return o.e()},e}(h);e.exports=d},{11:11,19:19,36:36,40:40}],45:[function(t,o,a){var s=t(40),u=Object.create(t(21)),p=function(){function t(e,r){n(this,t),r?(this.value=e.defaultValue,this.min=e.availableMin,this.max=e.availableMax,this.input=s.createFromString("constant")):(this.value=e.value,this.min=e.min,this.max=e.max,this.input=s.createFromString(e.input)),this.precision=e.precision,this.unit=e.unit}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(){return String(this.value)},t}();u.LiveNumber=function(t){function o(e,i,a,s,u,p){n(this,o);var l=void 0,c=void 0,f=void 0,h=void 0;"object"==typeof a?(l=a.value,c=a.min,f=a.max,h=a.input):l=a;var d=r(this,t.apply(this,arguments));return d._min=void 0!==c?c:d.availableMin,d._max=void 0!==f?f:d.availableMax,d._input=void 0!==h?h:"constant",d._$range=null,d}return i(o,t),o.prototype.updateInternalVisibility=function(){this._$range&&this._$range.toggle("constant"!=this._input)},o.prototype.exportHelper=function(t){var e={};return t.value!=t.defaultValue&&(e.value=t.value),t.min!=t.availableMin&&(e.min=t.min),t.max!=t.availableMax&&(e.max=t.max),"constant"!=t.input&&(e.input=t.input),e},o.prototype.export=function(){return this.exportHelper(this)},o.prototype.fix=function(){var t=new p(this);return t.name=this.name,t},e(o,[{key:"input",get:function(){return this._input},set:function(t){this._input=t,this.updateInternalVisibility(),this.update()}},{key:"min",get:function(){return this._min},set:function(t){this._min=t,this.update()}},{key:"max",get:function(){return this._max},set:function(t){this._max=t,this.update()}},{key:"$range",get:function(){return this._$range},set:function(t){this._$range=t,this.updateInternalVisibility()}}]),o}(u.Number),u.LiveInt=function(t){function o(){return n(this,o),r(this,t.apply(this,arguments))}return i(o,t),e(o,[{key:"precision",get:function(){return 0}},{key:"availableInputTypes",get:function(){return["constant","slider","mousemovex","mousemovey"]}}]),o}(u.LiveNumber),u.CanvasLiveInt=function(t){function o(){return n(this,o),r(this,t.apply(this,arguments))}return i(o,t),e(o,[{key:"availableInputTypes",get:function(){return["constant","slider"]}}]),o}(u.LiveInt),u.LiveFloat=function(t){function o(e,i,a,s,u,p){n(this,o);var l=void 0,c=void 0,f=void 0,h=void 0;"object"==typeof a&&("object"==typeof a.speed?(l=a.speed.value,c=a.speed.min,f=a.speed.max,h=a.speed.input):l=a.speed);var d=r(this,t.apply(this,arguments));return d._speedAvailableMin=i.speed.availableMin,d._speedAvailableMax=i.speed.availableMax,void 0!==i.precision?d.precision=i.precision:d.availableMax>=100?d.precision=1:d.availableMax>=10?d.precision=2:d.precision=3,d._speedValue=void 0!==l?l:0,d._speedMin=void 0!==c?c:d._speedAvailableMin,d._speedMax=void 0!==f?f:d._speedAvailableMax,d._speedInput=void 0!==h?h:"constant",d._addSpeed=!(0==d._speedValue&&d._speedMin==d._speedAvailableMin&&d._speedMax==d._speedAvailableMax&&"constant"==d._speedInput),d._speed$=null,d._speed$range=null,d._$addSpeed=null,d}return i(o,t),o.collectArgs=function(e,n,r){return r=Object.create(r),void 0===r.speed&&(r.speed={}),void 0===r.speed.availableMin&&(r.speed.availableMin=n[2]),void 0===r.speed.availableMax&&(r.speed.availableMax=n[3]),t.collectArgs.call(this,e,n,r)},o.prototype.updateInternalVisibility=function(){t.prototype.updateInternalVisibility.call(this),this._speed$range&&this._speed$range.toggle("constant"!=this._speedInput);var e=["gamepad0","gamepad1","gamepad2","gamepad3"].indexOf(this._input)<0;this._speed$&&this._speed$.toggle(this._addSpeed&&e),this._$addSpeed&&this._$addSpeed.toggle(e)},o.prototype.export=function(){var t=["gamepad0","gamepad1","gamepad2","gamepad3"].indexOf(this.input)<0,e=this.exportHelper(this);return t&&this.addSpeed&&this.shortenExportAssign(this.exportHelper(this.speed),e,"speed"),e},o.prototype.fix=function(){var e=t.prototype.fix.call(this),n=["gamepad0","gamepad1","gamepad2","gamepad3"].indexOf(this.input)<0;return n&&this.addSpeed?e.speed=new p(this.speed):e.speed=new p(this.speed,(!0)),e},e(o,[{key:"addSpeed",get:function(){return this._addSpeed},set:function(t){this._addSpeed=t,this.updateInternalVisibility(),this.update()}},{key:"availableInputTypes",get:function(){return["constant","slider","mousemovex","mousemovey","gamepad0","gamepad1","gamepad2","gamepad3"]}},{key:"speed",get:function(){var t=this;return{get fullName(){return t.fullName+".speed"},get defaultValue(){return 0},get value(){return t._speedValue},set value(e){t._speedValue=e,t.update()},get input(){return t._speedInput},set input(e){t._speedInput=e,t.updateInternalVisibility(),t.update()},get availableMin(){return t._speedAvailableMin},get availableMax(){return t._speedAvailableMax},get min(){return t._speedMin},set min(e){t._speedMin=e,t.update()},get max(){return t._speedMax},set max(e){t._speedMax=e,t.update()},get precision(){return t.precision},get unit(){return void 0!==t.unit?t.unit+"/second":"1/second"},get availableInputTypes(){return t.availableInputTypes},get $(){return t._speed$},set $(e){t._speed$=e,t.updateInternalVisibility()},get $range(){return t._speed$range},set $range(e){t._speed$range=e,t.updateInternalVisibility()}}}},{key:"$addSpeed",get:function(){return this._$addSpeed},set:function(t){this._$addSpeed=t,this.updateInternalVisibility()}}]),o}(u.LiveNumber),u.LiveColor=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.collectArgs=function(e,n,r){r=Object.create(r),void 0===r.componentDefaultValues&&(r.componentDefaultValues=n);var i="rgba";return r.descriptions=r.componentDefaultValues.map(function(t,e){var n=i.charAt(e);return["LiveFloat",n,[0,1,-1,1],t]}),t.collectArgs.call(this,e,n,r)},e}(u.Group),o.exports=u},{21:21,40:40}],46:[function(t,e,o){var a=t(45),s=t(23),u=t(1),p=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.setOptionClassWriters=function(e){t.prototype.setOptionClassWriters.call(this,e),e.get(a.Select),e.set(a.LiveNumber,function(t,n,r,i){var o=function(t){var o=t.precision,s=function(e){return e.attr("min",t.availableMin).attr("max",t.availableMax).attr("step",Math.pow(.1,o).toFixed(o))},u=function(e){return s($("<input type='number' required>")).val(t[e]).on("input change",function(){this.checkValidity()&&(t[e]=parseFloat(this.value))})},p=void i(),l=void 0,c=void 0,f=e.get(a.Number)(t,n,r,i);return f.find("button").before($("<label class='nowrap'>").append(r("options-output.inputs")+": ",p=$("<select>").append(t.availableInputTypes.map(function(t){return $("<option>").val(t).html(r("options-output.inputs."+t))})).val(t.input).change(function(){t.input=this.value}))," ",t.$range=$("<span class='range'>").append(r("options-output.range")+" ",$("<span class='nowrap'>").append(l=u("min")," .. ",c=u("max")))," ").click(function(){p.val("constant").change(),l.val(t.availableMin).change(),c.val(t.availableMax).change()}),f};return t instanceof a.LiveFloat?t.$=$("<div>").append(o(t).append(" ",t.$addSpeed=$("<label class='nowrap'>").append($("<input type='checkbox'>").prop("checked",t.addSpeed).change(function(){t.addSpeed=this.checked})," "+r("options-output.addSpeed"))),t.speed.$=o(t.speed)):t.$=o(t)}),e.set(a.Array,function(){return(new(Function.prototype.bind.apply(u,[null].concat(Array.prototype.slice.call(arguments))))).$output})},e}(s);e.exports=p},{1:1,23:23,45:45}],47:[function(t,o,a){var s=t(24),u=function(o){function a(){return n(this,a),r(this,o.apply(this,arguments))}return i(a,o),e(a,[{key:"optionClasses",get:function(){return t(45)}},{key:"entriesDescription",get:function(){return[["Group","canvas",[["CanvasLiveInt","width",[1,1024],512,{unit:"pixel"}],["CanvasLiveInt","height",[1,1024],512,{unit:"pixel"}]]],["Group","background",[["Select","type",["none","solid"]],["LiveColor","color",[1,1,1,1],{visibilityData:{"background.type":"solid"}}]]],["Group","material",[["Select","scope",["global","vertex","face"]],["Select","data",["one","sda"]],["LiveColor","color",[1,0,0,1],{visibilityData:{"material.scope":"global","material.data":"one"}}],["LiveColor","specularColor",[.4,.4,.4],{visibilityData:{"material.scope":"global","material.data":"sda"}}],["LiveColor","diffuseColor",[.4,.4,.4],{visibilityData:{"material.scope":"global","material.data":"sda"}}],["LiveColor","ambientColor",[.2,.2,.2],{visibilityData:{"material.scope":"global","material.data":"sda"}}]]],["Group","light",[["Select","type",["off","phong","blinn"]],["Group","direction",[["LiveFloat","x",[-4,4,-4,4],-1],["LiveFloat","y",[-4,4,-4,4],1],["LiveFloat","z",[-4,4,-4,4],1]],{visibilityData:{"light.type":["phong","blinn"]}}]]],["Group","shape",[["Select","type",["square","triangle","gasket","cube","hat","terrain"]],["Select","elements",["0","8","16","32"]],["LiveInt","lod",[0,10],6,{visibilityData:{"shape.type":["gasket","hat","terrain"]}}]]],["Group","transforms",[["Select","projection",["ortho","perspective"]],["Array","model",[["LiveFloat","rotate.x",[-180,180,-360,360],0,{unit:"°"}],["LiveFloat","rotate.y",[-180,180,-360,360],0,{unit:"°"}],["LiveFloat","rotate.z",[-180,180,-360,360],0,{unit:"°"}]]]]],["Group","debug",[["Checkbox","shaders",!0],["Checkbox","arrays"],["Checkbox","inputs"],["Checkbox","animations"]]]]}}]),a}(s);o.exports=u},{24:24,45:45}],48:[function(t,e,n){n.square=t(55),n.triangle=t(57),n.gasket=t(50),n.cube=t(49),n.hat=t(51),n.terrain=t(56)},{49:49,50:50,51:51,55:55,56:56,57:57}],49:[function(t,o,a){var s=t(18),u=t(27),p=t(34),l=t(54),c=function(t){function o(){return n(this,o),r(this,t.apply(this,arguments))}return i(o,t),o.prototype.writeArrays=function(){for(var t=this,e=new p(this.colorAttrs,0,this.hasColorsPerFace?void 0:[[0,0,0],[1,0,0],[0,1,0],[1,1,0],[0,0,1],[1,0,1],[0,1,1],[1,1,1]]),n=8,r=[],i=0;i<n;i++)r.push(e.getNextColorString());var o=["-0.5,-0.5,-0.5,","+0.5,-0.5,-0.5,","-0.5,+0.5,-0.5,","+0.5,+0.5,-0.5,","-0.5,-0.5,+0.5,","+0.5,-0.5,+0.5,","-0.5,+0.5,+0.5,","+0.5,+0.5,+0.5,"],a=6,l=["left","right","bottom","top","back","front"],c=["-1.0, 0.0, 0.0,","+1.0, 0.0, 0.0,"," 0.0,-1.0, 0.0,"," 0.0,+1.0, 0.0,"," 0.0, 0.0,-1.0,"," 0.0, 0.0,+1.0,"],f=[[4,6,0,2],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[5,7,4,6]],h=[0,1,2,2,1,3],d=s.b();d("// x    y    z"),this.hasNormals&&d.t("  n.x  n.y  n.z"),d.t(e.getHeaderString());var m=function(e,n,i){d(o[n]),t.hasNormals&&d.t(c[e]),t.hasColorsPerVertex?d.t(r[n]):t.hasColorsPerFace&&d.t(r[e]),i&&d.t(" // "+l[e]+" face")},v=function(){return u.b(s.bae("var vertices=new Float32Array(["),s.bae("]);")).ae(d.e())};if(!this.usesElements()){for(var g=function(t){h.forEach(function(e,n){m(t,f[t][e],0==n)})},y=0;y<a;y++)g(y);return s.bae("var nVertices=36;",v())}if(this.hasColorsPerFace||this.hasNormals){for(var b=function(t){f[t].forEach(function(e,n){m(t,e,0==n)})},x=0;x<a;x++)b(x);return s.bae(v(),"var nElements=36;","var elements=new "+this.getElementIndexJsArray()+"([","\t 0,  1,  2,  2,  1,  3, // left face","\t 4,  5,  6,  6,  5,  7, // right face","\t 8,  9, 10, 10,  9, 11, // bottom face","\t12, 13, 14, 14, 13, 15, // top face","\t16, 17, 18, 18, 17, 19, // back face","\t20, 21, 22, 22, 21, 23, // front face","]);")}var C=function(){for(var e=0;e<n;e++)d(o[e]),t.hasColorsPerVertex&&d.t(r[e]);for(var i=s.b(),p=function(t){i(""),h.forEach(function(e){i.t(f[t][e]+", ")}),i.t("// "+l[t]+" face")},c=0;c<a;c++)p(c);var m=function(){return u.b(s.bae("var elements=new "+t.getElementIndexJsArray()+"(["),s.bae("]);")).ae(i.e())};return{v:new Lines(v(),"var nElements=36;",m())}}();if("object"==typeof C)return C.v},e(o,[{key:"dim",get:function(){return 3}},{key:"twoSided",get:function(){return!1}}]),o}(l);o.exports=c},{18:18,27:27,34:34,54:54}],50:[function(t,e,o){var a=t(18),s=t(27),u=t(52),p=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.getDistinctVertexCount=function(t){return"(Math.pow(3,"+t+"+1)+3)/2"},e.prototype.getFaceVertexCount=function(t){return"Math.pow(3,"+t+")*3"},e.prototype.getTotalVertexCount=function(t){return"Math.pow(3,"+t+")*3"},e.prototype.writeStoreShape=function(){var t=this,e=function(){var e=a.b();return e("vertices[nextIndexIntoVertices++]=p[0];","vertices[nextIndexIntoVertices++]=p[1];"),(t.hasColorsPerVertex||t.hasColorsPerFace)&&(e(!t.usesElements()||t.hasColorsPerFace?"colors[nextIndexIntoColors]":"colors[nextElement%colors.length]"),e.t(".forEach(function(cc){","\tvertices[nextIndexIntoVertices++]=cc;","});")),t.usesElements()?e("return nextElement++;"):t.hasColorsPerVertex&&e("nextIndexIntoColors=(nextIndexIntoColors+1)%colors.length;"),e.e()},n=function(){var e=a.b();return e("if (depth<=0) {"),t.usesElements()?t.hasColorsPerFace?e("\tpushElement(pushVertex(p0));","\tpushElement(pushVertex(p1));","\tpushElement(pushVertex(p2));","\tnextIndexIntoColors=(nextIndexIntoColors+1)%colors.length;"):e("\tif (es[0]===null) es[0]=pushVertex(p0);","\tif (es[1]===null) es[1]=pushVertex(p1);","\tif (es[2]===null) es[2]=pushVertex(p2);","\tpushElement(es[0]);","\tpushElement(es[1]);","\tpushElement(es[2]);","\treturn es;"):t.hasColorsPerFace?e("\tpushVertex(p0);","\tpushVertex(p1);","\tpushVertex(p2);","\tnextIndexIntoColors=(nextIndexIntoColors+1)%colors.length;"):e("\tpushVertex(p0);","\tpushVertex(p1);","\tpushVertex(p2);"),e("} else {","\tvar p01=mix(p0,p1);","\tvar p12=mix(p1,p2);","\tvar p20=mix(p2,p0);"),t.usesElements()?t.hasColorsPerFace?e("\tvar es0=triangle(depth-1,p0,p01,p20);","\tvar es1=triangle(depth-1,p1,p12,p01);","\tvar es2=triangle(depth-1,p2,p20,p12);"):e("\tvar es0=triangle(depth-1,p0,p01,p20,[es[0],null,null]);","\tvar es1=triangle(depth-1,p1,p12,p01,[es[1],null,es0[1]]);","\tvar es2=triangle(depth-1,p2,p20,p12,[es[2],es0[2],es1[1]]);","\treturn [es0[0],es1[0],es2[0]];"):e("\ttriangle(depth-1,p0,p01,p20);","\ttriangle(depth-1,p1,p12,p01);","\ttriangle(depth-1,p2,p20,p12);"),e("}"),e.e()},r=function(){var e=a.b();return e("shapeLod,","[-Math.sin(0/3*Math.PI),Math.cos(0/3*Math.PI)],","[-Math.sin(2/3*Math.PI),Math.cos(2/3*Math.PI)],","[-Math.sin(4/3*Math.PI),Math.cos(4/3*Math.PI)]"),t.usesElements()&&!t.hasColorsPerFace&&e.t(",","[null,null,null]"),e.e()},i=a.b();return i("var nextIndexIntoVertices=0;"),this.usesElements()&&(i("var nextIndexIntoElements=0;"),i("var nextElement=0;")),this.hasColorsPerVertex||this.hasColorsPerFace?(i("// p = position, cc = color component, e = element, es = elements"),i(this.writeColorData()),this.usesElements()&&!this.hasColorsPerFace||i("var nextIndexIntoColors=0;")):i("// p = position, e = element, es = elements"),i(s.b(a.bae("function pushVertex(p) {"),a.bae("}")).ae(e())),this.usesElements()&&i("function pushElement(e) {","\telements[nextIndexIntoElements++]=e;","}"),i("function mix(pa,pb) {","\treturn [","\t\t(pa[0]+pb[0])/2,","\t\t(pa[1]+pb[1])/2,","\t];","}",(!this.usesElements()||this.hasColorsPerFace?s.b(a.bae("function triangle(depth,p0,p1,p2) {"),a.bae("}")):s.b(a.bae("function triangle(depth,p0,p1,p2,es) {"),a.bae("}"))).ae(n()),s.b(a.bae("triangle("),a.bae(");")).ae(r())),i.e()},e}(u);e.exports=p},{18:18,27:27,52:52}],51:[function(t,e,o){var a=t(19),s=t(53),u=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.writeMeshInit=function(){return a.bae("var xyRange=4;","var xyScale=1/(4*Math.sqrt(2));")},e.prototype.writeMeshVertex=function(){var t=a.b(),e=0;return t("var r2=(x*x+y*y)/2;","var A=Math.exp(-r2)/Math.PI;","var z=A*(1-r2);","vertices[vertexOffset+"+e++ +"]=x*xyScale;","vertices[vertexOffset+"+e++ +"]=y*xyScale;","vertices[vertexOffset+"+e++ +"]=z;"),this.hasNormals&&t("var normal=normalize([(z+A)*x/xyScale,(z+A)*y/xyScale,1]);","vertices[vertexOffset+"+e++ +"]=normal[0];","vertices[vertexOffset+"+e++ +"]=normal[1];","vertices[vertexOffset+"+e++ +"]=normal[2];"),t(this.writeMeshVertexColors(e)),t.e()},e}(s);e.exports=u},{19:19,53:53}],52:[function(t,e,o){var a=t(40),s=t(45),u=t(18),p=t(27),l=t(16),c=t(42),f=t(34),h=t(54),d=t(41),m=function(t){function e(i,o,a,u,p){n(this,e);var l=r(this,t.call(this,i,o,a,u,p)),c=l.getMaxPossibleLod(i.lod.max),f=function(t){return Math.min(c,t)};return l.lod=s.LiveInt.make("lod",[0,10],6)({value:f(i.lod.value),min:f(i.lod.min),max:f(i.lod.max),input:String(i.lod.input)}).fix(),l.features.push(new d("shape.lod",l.lod)),l}return i(e,t),e.prototype.getMaxPossibleLod=function t(e){if(!this.usesElements()||this.elementIndexBits>=31)return e;for(var n=this.hasColorsPerFace?this.getFaceVertexCount:this.getDistinctVertexCount,r=1<<this.elementIndexBits,i=e;i>=0;i--){var o=eval(n(i));if(o<=r)return i}},e.prototype.writeColorData=function(){for(var t=u.b(),e=new f(this.colorAttrs,0),n=0;n<4;n++)t("["+e.getNextColorString().slice(1,-1)+"],");return p.b(u.bae("var colors=["),u.bae("];")).ae(t.e())},e.prototype.writeArraysAndBufferData=function(t){var e=this.hasColorsPerFace?this.getFaceVertexCount:this.getDistinctVertexCount,n=u.b();return"constant"!=this.lod.input?(n("var minShapeLod="+this.lod.min+";","var maxShapeLod="+this.lod.max+";"),this.usesElements()?n("var nMaxVertices="+e("maxShapeLod")+";","var vertices=new Float32Array(nMaxVertices*"+this.getNumbersPerVertex()+");","var nMaxElements="+this.getTotalVertexCount("maxShapeLod")+";","var elements=new "+this.getElementIndexJsArray()+"(nMaxElements);",this.writeDebug(t),"var shapeLod,nVertices,nElements;","function storeShape(newShapeLod) {","\tshapeLod=newShapeLod;","\tnVertices="+e("shapeLod")+";","\tnElements="+this.getTotalVertexCount("shapeLod")+";"):n("var nMaxVertices="+this.getTotalVertexCount("maxShapeLod")+";","var vertices=new Float32Array(nMaxVertices*"+this.getNumbersPerVertex()+");",this.writeDebug(t),"var shapeLod,nVertices;","function storeShape(newShapeLod) {","\tshapeLod=newShapeLod;","\tnVertices="+this.getTotalVertexCount("shapeLod")+";")):(n("var shapeLod="+this.lod+";"),this.usesElements()?n("var nVertices="+e("shapeLod")+";","var vertices=new Float32Array(nVertices*"+this.getNumbersPerVertex()+");","var nElements="+this.getTotalVertexCount("shapeLod")+";","var elements=new "+this.getElementIndexJsArray()+"(nElements);",this.writeDebug(t),"function storeShape() {"):n("var nVertices="+this.getTotalVertexCount("shapeLod")+";","var vertices=new Float32Array(nVertices*"+this.getNumbersPerVertex()+");",this.writeDebug(t),"function storeShape() {")),n(l.bae(this.writeStoreShape()),l.bae(this.writeBufferData()),"}"),n("constant"!=this.lod.input?"storeShape("+this.lod+");":"storeShape();"),n.e()},e.prototype.getJsInitLines=function(e){var n=u.ba(t.prototype.getJsInitLines.call(this,e));if("slider"==this.lod.input){var r=new c.Slider("shape.lod");r.enter().log("console.log(this.id,'input value:',parseInt(this.value));").post("storeShape(parseInt(this.value));"),n(e.getListenerLines(r))}else this.lod.input instanceof a.MouseMove&&e.canvasMousemoveListener.enter().newVarInt(this.lod.input,"shapeLod").cond("newShapeLod!=shapeLod").log("console.log('shapeLod input value:',newShapeLod);").post("storeShape(newShapeLod);");return n.e()},e}(h);e.exports=m},{16:16,18:18,27:27,34:34,40:40,41:41,42:42,45:45,54:54}],53:[function(t,o,a){var s=t(18),u=t(16),p=t(52),l=function(t){function o(){return n(this,o),r(this,t.apply(this,arguments))}return i(o,t),o.prototype.getDistinctVertexCount=function(t){return"Math.pow((1<<"+t+")+1,2)"},o.prototype.getFaceVertexCount=function(t){return"Math.pow((1<<"+t+"),2)*4"},o.prototype.getTotalVertexCount=function(t){return"Math.pow((1<<"+t+"),2)*6"},o.prototype.writeMeshVertexColors=function(t){return this.hasColorsPerVertex||this.hasColorsPerFace?s.bae(this.usesElements()||this.hasColorsPerFace?"var ic=(i&1)*2+(j&1);":"var ic=((i+di)&1)*2+((j+dj)&1);","colors[ic].forEach(function(cc,icc){","\tvertices[vertexOffset+"+t+"+icc]=cc;","});"):s.be()},o.prototype.writeStoreShape=function(){var t=s.b();return t("var res=(1<<shapeLod);"),this.usesElements()?this.hasColorsPerFace?t("function vertexElement(i,j,k) {","\treturn (i*res+j)*4+k;","}"):t("function vertexElement(i,j) {","\treturn i*(res+1)+j;","}"):t("function vertexElement(i,j,k) {","\treturn (i*res+j)*6+k;","}"),this.hasNormals&&t("function normalize(v) {","\tvar l=Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2]);","\treturn [v[0]/l,v[1]/l,v[2]/l];","}"),(this.hasColorsPerVertex||this.hasColorsPerFace)&&t(this.writeColorData()),t(this.writeMeshInit()),this.usesElements()?this.hasColorsPerFace?t("var i,j;","for (i=0;i<res;i++) {","\tfor (j=0;j<res;j++) {","\t\tfor (var k=0;k<4;k++) {","\t\t\tvar di=[0,0,1,1][k];","\t\t\tvar dj=[0,1,0,1][k];","\t\t\tvar y=(i+di)/res*xyRange*2-xyRange;","\t\t\tvar x=(j+dj)/res*xyRange*2-xyRange;","\t\t\tvar vertexOffset=vertexElement(i,j,k)*"+this.getNumbersPerVertex()+";",u.b(3).ae(this.writeMeshVertex()),"\t\t}","\t}","}","for (i=0;i<res;i++) {","\tfor (j=0;j<res;j++) {","\t\tvar elementOffset=(i*res+j)*6;","\t\telements[elementOffset+0]=vertexElement(i,j,0);","\t\telements[elementOffset+1]=vertexElement(i,j,1);","\t\telements[elementOffset+2]=vertexElement(i,j,2);","\t\telements[elementOffset+3]=vertexElement(i,j,2);","\t\telements[elementOffset+4]=vertexElement(i,j,1);","\t\telements[elementOffset+5]=vertexElement(i,j,3);","\t}","}"):t("var i,j;","for (i=0;i<=res;i++) {","\tvar y=i/res*xyRange*2-xyRange;","\tfor (j=0;j<=res;j++) {","\t\tvar x=j/res*xyRange*2-xyRange;","\t\tvar vertexOffset=vertexElement(i,j)*"+this.getNumbersPerVertex()+";",u.b(2).ae(this.writeMeshVertex()),"\t}","}","for (i=0;i<res;i++) {","\tfor (j=0;j<res;j++) {","\t\tvar elementOffset=(i*res+j)*6;","\t\telements[elementOffset+0]=vertexElement(i+0,j+0);","\t\telements[elementOffset+1]=vertexElement(i+0,j+1);","\t\telements[elementOffset+2]=vertexElement(i+1,j+0);","\t\telements[elementOffset+3]=vertexElement(i+1,j+0);","\t\telements[elementOffset+4]=vertexElement(i+0,j+1);","\t\telements[elementOffset+5]=vertexElement(i+1,j+1);","\t}","}"):t("for (var i=0;i<res;i++) {","\tfor (var j=0;j<res;j++) {","\t\tfor (var k=0;k<6;k++) {","\t\t\tvar di=[0,0,1,1,0,1][k];","\t\t\tvar dj=[0,1,0,0,1,1][k];","\t\t\tvar y=(i+di)/res*xyRange*2-xyRange;","\t\t\tvar x=(j+dj)/res*xyRange*2-xyRange;","\t\t\tvar vertexOffset=vertexElement(i,j,k)*"+this.getNumbersPerVertex()+";",u.b(3).ae(this.writeMeshVertex()),"\t\t}","\t}","}"),t.e()},e(o,[{key:"dim",get:function(){return 3}}]),o}(p);o.exports=l},{16:16,18:18,52:52}],54:[function(t,o,a){var s=t(18),u=t(27),p=t(36),l=function(t){function o(e,i,a,s,u){n(this,o);var p=r(this,t.call(this));return p.elementIndexBits=parseInt(e.elements),p.hasNormals=i&&3==p.dim,p.hasColorsPerVertex=a,p.hasColorsPerFace=s,p.colorAttrs=u,p}return i(o,t),o.prototype.usesElements=function(){return this.elementIndexBits>0},o.prototype.getNumbersPerVertex=function(){return this.dim+(this.hasNormals?3:0)+3*this.colorAttrs.length},o.prototype.getElementIndexJsArray=function(){return"Uint"+this.elementIndexBits+"Array"},o.prototype.getElementIndexGlType=function(){return 8==this.elementIndexBits?"gl.UNSIGNED_BYTE":16==this.elementIndexBits?"gl.UNSIGNED_SHORT":32==this.elementIndexBits?"gl.UNSIGNED_INT":void 0},o.prototype.writeDebug=function(t){var e=s.b();return t&&(e("console.log('vertex array byte length:',vertices.byteLength);"),this.usesElements()&&(e("console.log('element array byte length:',elements.byteLength);"),e("console.log('vertex+element array byte length:',vertices.byteLength+elements.byteLength);"))),e.e()},o.prototype.writeBufferData=function(){var t=s.b();return t("gl.bufferData(gl.ARRAY_BUFFER,vertices,gl.STATIC_DRAW);"),this.usesElements()&&t("gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,elements,gl.STATIC_DRAW);"),t.e()},o.prototype.writeArraysAndBufferData=function(t){return s.bae(this.writeArrays(),this.writeDebug(t),this.writeBufferData())},o.prototype.getJsInitLines=function(e){var n=this,r=function(t){var e=t[0][0],r=t.every(function(t){var n=t[0];return n==e}),i=!0,o=s.bae.apply(s,t.map(function(t){var e=t[0],n=t[1],o=t[2];return o?r?"'"+n+"',":"["+e+",'"+n+"'],":(i=!1,(r?"null,":"["+e+",null],")+" // attribute "+n+" disabled")})),a=s.bae("var attrLoc=gl.getAttribLocation(program,attrName);","gl.vertexAttribPointer(","\tattrLoc,attrSize,gl.FLOAT,false,","\tFloat32Array.BYTES_PER_ELEMENT*bufferStride,","\tFloat32Array.BYTES_PER_ELEMENT*bufferOffset",");","gl.enableVertexAttribArray(attrLoc);");i||(a=u.b(s.bae("if (name!==null) {"),s.bae("}")).ae(a));var p=s.bae.apply(s,(r?["var attrSize="+e+";"]:["var attrSize=attr[0];","var attrName=attr[1];"]).concat([a,"bufferOffset+=attrSize;"]));
return u.b(s.bae("var bufferStride="+n.getNumbersPerVertex()+";","var bufferOffset=0;",";["),s.bae("].forEach(function("+(r?"attrName":"attr")+"){"),s.bae("});")).ae(o,p)},i=s.ba(t.prototype.getJsInitLines.call(this,e));return 32==this.elementIndexBits&&i("gl.getExtension('OES_element_index_uint');"),this.dim>2&&i("gl.enable(gl.DEPTH_TEST);"),i("gl.bindBuffer(gl.ARRAY_BUFFER,gl.createBuffer());"),this.usesElements()&&i("gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,gl.createBuffer());"),i(this.writeArraysAndBufferData(e.debugOptions.arrays)),!this.hasNormals&&this.colorAttrs.length<=0?i("var positionLoc=gl.getAttribLocation(program,'position');","gl.vertexAttribPointer(positionLoc,"+this.dim+",gl.FLOAT,false,0,0);","gl.enableVertexAttribArray(positionLoc);"):i(r([[this.dim,"position",!0]].concat(this.hasNormals?[[3,"normal",!0]]:[],this.colorAttrs.map(function(t){return[3,t.name,t.enabled]})))),i.e()},o.prototype.getJsLoopLines=function(e){var n=s.ba(t.prototype.getJsLoopLines.call(this,e));return n(this.usesElements()?"gl.drawElements(gl."+this.glPrimitive+",nElements,"+this.getElementIndexGlType()+",0);":"gl.drawArrays(gl."+this.glPrimitive+",0,nVertices);"),n.e()},e(o,[{key:"dim",get:function(){return 2}},{key:"twoSided",get:function(){return!0}},{key:"glPrimitive",get:function(){return"TRIANGLES"}}]),o}(p);o.exports=l},{18:18,27:27,36:36}],55:[function(t,o,a){var s=t(18),u=t(34),p=t(54),l=function(t){function o(){return n(this,o),r(this,t.apply(this,arguments))}return i(o,t),o.prototype.writeArrays=function(){var t=this,e=new u(this.colorAttrs,0),n=void 0,r=function(){return t.hasColorsPerFace&&!t.hasColorsPerVertex?(void 0===n&&(n=e.getNextColorString()),n):e.getNextColorString()},i=s.ba("var nVertices=4;","var vertices=new Float32Array([","\t// x    y"+e.getHeaderString(),"\t-0.5,-0.5,"+r(),"\t+0.5,-0.5,"+r(),"\t+0.5,+0.5,"+r(),"\t-0.5,+0.5,"+r(),"]);");return this.usesElements()&&i("var nElements=4;","var elements=new "+this.getElementIndexJsArray()+"([0,1,2,3]);"),i.e()},e(o,[{key:"glPrimitive",get:function(){return"TRIANGLE_FAN"}}]),o}(p);o.exports=l},{18:18,34:34,54:54}],56:[function(t,e,o){var a=t(18),s=t(53),u=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.writeMeshInit=function(){var t=this.usesElements()&&!this.hasColorsPerFace,e=a.b();return e("var xyRange=1/Math.sqrt(2);","var zRange=xyRange;","var mask=res-1;","function zOffset(i,j) {","\treturn vertexElement(i,j"+(t?"":",0")+")*"+this.getNumbersPerVertex()+"+2;","}","function noise(depth) {","\tvar r=zRange/Math.pow(2,shapeLod-depth-1);","\treturn Math.random()*2*r-r;","}","vertices[2]=0.0;","var i0,i1,i2,i3;","var j0,j1,j2,j3;","for (var depth=shapeLod-1;depth>=0;depth--) {","\tvar d=1<<depth;","\t// diamond step","\tfor (i2=d;i2<res;i2+=2*d) {","\t\tfor (j2=d;j2<res;j2+=2*d) {","\t\t\ti1=i2-d;","\t\t\tj1=j2-d;","\t\t\ti3=(i2+d)&mask;","\t\t\tj3=(j2+d)&mask;","\t\t\tvertices[zOffset(i2,j2)]=(","\t\t\t\tvertices[zOffset(i1,j1)]+vertices[zOffset(i1,j3)]+","\t\t\t\tvertices[zOffset(i3,j1)]+vertices[zOffset(i3,j3)]","\t\t\t)/4+noise(depth);","\t\t}","\t}","\t// square step","\tfor (i2=d;i2<res;i2+=2*d) {","\t\tfor (j2=d;j2<res;j2+=2*d) {","\t\t\ti0=(i2-2*d)&mask;","\t\t\tj0=(j2-2*d)&mask;","\t\t\ti1=(i2-d);","\t\t\tj1=(j2-d);","\t\t\ti3=(i2+d)&mask;","\t\t\tj3=(j2+d)&mask;","\t\t\tvertices[zOffset(i2,j1)]=(","\t\t\t\tvertices[zOffset(i2,j0)]+vertices[zOffset(i1,j1)]+","\t\t\t\tvertices[zOffset(i2,j2)]+vertices[zOffset(i3,j1)]","\t\t\t)/4+noise(depth);","\t\t\tvertices[zOffset(i1,j2)]=(","\t\t\t\tvertices[zOffset(i0,j2)]+vertices[zOffset(i1,j1)]+","\t\t\t\tvertices[zOffset(i2,j2)]+vertices[zOffset(i1,j3)]","\t\t\t)/4+noise(depth);","\t\t}","\t}","}"),t&&e("for (i0=0;i0<res;i0++) vertices[zOffset(i0,res)]=vertices[zOffset(i0,0)];","for (j0=0;j0<res;j0++) vertices[zOffset(res,j0)]=vertices[zOffset(0,j0)];","vertices[zOffset(res,res)]=vertices[zOffset(0,0)];"),e.e()},e.prototype.writeMeshVertex=function(){var t=this.usesElements()&&!this.hasColorsPerFace,e=a.b();e("vertices[vertexOffset+0]=x;","vertices[vertexOffset+1]=y;",t?"// vertices[vertexOffset+2] already written":"vertices[vertexOffset+2]=vertices[zOffset((i+di)&mask,(j+dj)&mask)];");var n=3;return this.hasNormals&&e("var d=4*xyRange/res;","var normal=normalize([",t?"\t(vertices[zOffset(i,(j-1)&mask)]-vertices[zOffset(i,(j+1)&mask)])/d,":"\t(vertices[zOffset((i+di)&mask,(j+dj-1)&mask)]-vertices[zOffset((i+di)&mask,(j+dj+1)&mask)])/d,",t?"\t(vertices[zOffset((i-1)&mask,j)]-vertices[zOffset((i+1)&mask,j)])/d,":"\t(vertices[zOffset((i+di-1)&mask,(j+dj)&mask)]-vertices[zOffset((i+di+1)&mask,(j+dj)&mask)])/d,","1]);","vertices[vertexOffset+"+n++ +"]=normal[0];","vertices[vertexOffset+"+n++ +"]=normal[1];","vertices[vertexOffset+"+n++ +"]=normal[2];"),e(this.writeMeshVertexColors(n)),e.e()},e}(s);e.exports=u},{18:18,53:53}],57:[function(t,e,o){var a=t(18),s=t(34),u=t(54),p=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.writeArrays=function(){var t=this,e=new s(this.colorAttrs,0),n=void 0,r=function(){return t.hasColorsPerFace&&!t.hasColorsPerVertex?(void 0===n&&(n=e.getNextColorString()),n):e.getNextColorString()},i=a.ba("var nVertices=3;","var vertices=new Float32Array([","\t//                   x                      y"+e.getHeaderString(),"\t-Math.sin(0/3*Math.PI), Math.cos(0/3*Math.PI),"+r(),"\t-Math.sin(2/3*Math.PI), Math.cos(2/3*Math.PI),"+r(),"\t-Math.sin(4/3*Math.PI), Math.cos(4/3*Math.PI),"+r(),"]);");return this.usesElements()&&i("var nElements=3;","var elements=new "+this.getElementIndexJsArray()+"([0,1,2]);"),i.e()},e}(u);e.exports=p},{18:18,34:34,54:54}],58:[function(t,o,a){var s=t(19),u=t(36),p=t(37),l=function(t){function o(e){n(this,o);var i=r(this,t.call(this));i.options=e,i.rotateVectorEntries=[],i.transformSequence=new Array(e.model.entries.length);var a=["x","y","z"],s=[[],[],[]];e.model.entries.forEach(function(t,e){var n={transform:t,index:e};"rotate.x"==t.type?s[0].push(n):"rotate.y"==t.type?s[1].push(n):"rotate.z"==t.type&&s[2].push(n)});for(var u=Math.max.apply(null,s.map(function(t){return t.length})),l=function(t){for(var e=!1,n=!0,r=-1,o=0;o<3;o++){var l=t<s[o].length;if(e){if(l){n=!1;break}}else l?r=o:e=!0}var c=u>1?String(t):"",f=function(e,n){var r=new p("rotate"+(u>1?"."+t:""),e,180);return r.i18nId="transforms.model.rotate",i.features.push(r),i.rotateVectorEntries.push({vector:r,suffix:c}),r},h=function(e,n){i.transformSequence[s[n][t].index]={vector:e,component:a[n],suffix:c}};if(n)for(var d=f(s.slice(0,r+1).map(function(e){return e[t].transform}),a.slice(0,r+1)),m=0;m<=r;m++)h(d,m);else for(var v=0;v<3;v++){var g=t<s[v].length;if(g){var y=f([s[v][t].transform],a.slice(v,v+1));h(y,v)}}},c=0;c<u;c++)l(c);return i}return i(o,t),o.prototype.use2dTransform=function(t){return t&&1==this.options.model.entries.length&&"rotate.z"==this.options.model.entries[0].type},o.prototype.getTransformMatricesLines=function(t){var e=s.ba(""),n=1,r=4+n,i=function(t){return t.length<r?("          "+t).slice(-r):t},o=function(n,r){e.t("*mat"+t+"( // "+r),n.forEach(function(n,r){r>=t||(e("\t"),n.forEach(function(n,o){o>=t||(e.t(i(n)),(r<t-1||o<t-1)&&e.t(","))}))}),e(")")};return this.transformSequence.forEach(function(t){if(t){var e=t.vector.getGlslMapComponentValue("c"+t.suffix,t.component),n=t.vector.getGlslMapComponentValue("s"+t.suffix,t.component);"x"==t.component?o([["1.0","0.0","0.0","0.0"],["0.0",e,"-"+n,"0.0"],["0.0",n,e,"0.0"],["0.0","0.0","0.0","1.0"]],"rotate around x axis"):"y"==t.component?o([[e,"0.0",n,"0.0"],["0.0","1.0","0.0","0.0"],["-"+n,"0.0",e,"0.0"],["0.0","0.0","0.0","1.0"]],"rotate around y axis"):"z"==t.component&&o([[e,"-"+n,"0.0","0.0"],[n,e,"0.0","0.0"],["0.0","0.0","1.0","0.0"],["0.0","0.0","0.0","1.0"]],"rotate around z axis")}}),4==t&&"perspective"==this.options.projection&&o([["1.0","0.0","0.0","0.0"],["0.0","1.0","0.0","0.0"],["0.0","0.0","1.0","-(near+far)/2.0"],["0.0","0.0","0.0","1.0"]],"move center of coords inside view"),e.e()},o.prototype.getGlslVertexDeclarationLines=function(t){var e=s.b();return this.rotateVectorEntries.forEach(function(t){e(t.vector.getGlslDeclarationLines())}),e(this.use2dTransform(t)?"attribute vec2 position;":"attribute vec4 position;"),e.e()},o.prototype.getGlslVertexOutputLines=function(t,e,n){var r=s.b();return this.rotateVectorEntries.forEach(function(t){r(t.vector.getGlslMapDeclarationLines("c"+t.suffix,function(t){return"cos(radians("+t+"))"}),t.vector.getGlslMapDeclarationLines("s"+t.suffix,function(t){return"sin(radians("+t+"))"}))}),"perspective"==this.options.projection&&r("float fovy=45.0;","float near=1.0/tan(radians(fovy)/2.0);","float far=near+2.0;"),r(n?"vec4 transformedPosition=":"gl_Position="),this.use2dTransform(t)?r.t("vec4(position*mat2(","\tcz, -sz,","\tsz,  cz","),0,1)"):(r.t("position"),r.t(this.getTransformMatricesLines(4))),n&&(r.t(";"),r("gl_Position=transformedPosition")),"ortho"==this.options.projection?e?r.t("*vec4(1.0/aspect,1.0,-1.0,1.0)"):t||r.t("*vec4(1.0,1.0,-1.0,1.0)"):"perspective"==this.options.projection&&(e?r.t("*mat4(","\tnear/aspect, 0.0,  0.0,                   0.0,","\t0.0,         near, 0.0,                   0.0,","\t0.0,         0.0,  (near+far)/(near-far), 2.0*near*far/(near-far),","\t0.0,         0.0,  -1.0,                  0.0",")"):r.t("*mat4(","\tnear, 0.0,  0.0,                   0.0,","\t0.0,  near, 0.0,                   0.0,","\t0.0,  0.0,  (near+far)/(near-far), 2.0*near*far/(near-far),","\t0.0,  0.0,  -1.0,                  0.0",")")),r.t(";"),r.e()},o.prototype.getGlslVertexNormalTransformLines=function(){return this.getTransformMatricesLines(3)},e(o,[{key:"eyeAtInfinity",get:function(){return"ortho"==this.options.projection}}]),o}(u);o.exports=l},{19:19,36:36,37:37}],59:[function(t,r,i){var o=t(6),a=function(){function t(e,r,i){n(this,t),this.value=e,this.vectorName=r,this.wrapRange=i}return t.prototype.hasSpeed=function(){return 0!=this.value.speed||"constant"!=this.value.speed.input},t.prototype.hasInput=function(){return"constant"!=this.value.input||"constant"!=this.value.speed.input},t.prototype.hasInputClass=function(t){return this.value.input instanceof t||this.value.speed.input instanceof t},t.prototype.usesStartTime=function(){return"constant"==this.value.input&&0!=this.value.speed&&"constant"==this.value.speed.input},t.prototype.usesPrevTime=function(){return"constant"!=this.value.input&&0!=this.value.speed||"constant"!=this.value.speed.input},e(t,[{key:"suffix",get:function(){var t=this.value.name.lastIndexOf(".");return t<0?this.value.name:this.value.name.slice(t+1)}},{key:"name",get:function(){return this.vectorName+"."+this.suffix}},{key:"varName",get:function(){return o(this.name)}},{key:"varNameLoc",get:function(){return this.varName+"Loc"}},{key:"varNameSpeed",get:function(){return this.varName+"Speed"}},{key:"varNameInput",get:function(){return this.varName+"Input"}},{key:"minVarName",get:function(){return o("min."+this.name)}},{key:"maxVarName",get:function(){return o("max."+this.name)}},{key:"variable",get:function(){return"constant"!=this.value.input||this.hasSpeed()}},{key:"wrapReady",get:function(){return this.wrapRange&&this.value.min==-this.wrapRange&&this.value.max==+this.wrapRange}},{key:"wrapped",get:function(){return this.hasSpeed()&&this.wrapReady&&"slider"==this.value.input}},{key:"clamped",get:function(){return!this.wrapped&&"constant"!=this.value.speed.input&&!this.wrapReady}},{key:"capped",get:function(){return!this.wrapped&&!this.clamped&&this.hasSpeed()&&!this.wrapReady}}]),t}();r.exports=a},{6:6}],60:[function(t,o,a){var s=t(6),u=t(10),p=t(11),l=t(40),c=t(19),f=t(18),h=t(27),d=t(42),m=t(59),v=t(44),g=function(t){function o(e,i,a){n(this,o);var s=r(this,t.call(this));return s.name=e,s.components=[],s.componentsBySuffix={},i.forEach(function(t){var n=new m(t,e,a);s.components.push(n),s.componentsBySuffix[n.suffix]=n}),s.i18nId=e,s.nVars=0,s.modeConstant=!0,s.modeFloats=!1,s.components.forEach(function(t,e){t.variable&&(s.modeConstant=!1,s.nVars++!=e&&(s.modeFloats=!0))}),1==s.nVars&&(s.modeFloats=!0),s.modeVector=!s.modeConstant&&!s.modeFloats,s}return i(o,t),o.prototype.makeInitialComponentValue=function(){var t={};this.components.forEach(function(e){"slider"==e.value.input||(t[e.value.name]=e.value)});var e=p.js(t);return function(t){return"slider"==t.value.input?"parseFloat(document.getElementById('"+t.name+"').value)":e[t.value.name]}},o.prototype.makeUpdatedComponentValue=function(){var t={};this.components.forEach(function(e){0!=e.value.speed||"constant"!=e.value.speed.input||e.value.input instanceof l.MouseMove||e.value.input instanceof l.Gamepad||"slider"==e.value.input||(t[e.value.name]=e.value)});var e=p.js(t);return function(t){return 0!=t.value.speed||"constant"!=t.value.speed.input||t.value.input instanceof l.MouseMove||t.value.input instanceof l.Gamepad?t.varName:"slider"==t.value.input?"parseFloat(document.getElementById('"+t.name+"').value)":e[t.value.name]}},o.prototype.getJsDeclarationLines=function(){return f.be()},o.prototype.getJsUpdateLines=function(t){return f.be()},o.prototype.addPostToListenerEntryForComponent=function(t,e){},o.prototype.addPostToListenerEntryAfterComponents=function(t,e){},o.prototype.hasInputs=function(){return t.prototype.hasInputs.call(this)||this.components.some(function(t){return t.hasInput()})},o.prototype.requestFeatureContext=function(e){t.prototype.requestFeatureContext.call(this,e),this.components.forEach(function(t){t.hasInput()&&(e.hasInputs=!0),t.hasInputClass(l.Slider)&&(e.hasSliders=!0),t.hasInputClass(l.Gamepad)&&(e.pollsGamepad=!0),t.usesStartTime()&&(e.hasStartTime=!0),t.usesPrevTime()&&(e.hasPrevTime=!0),t.wrapped&&(e.hasWrapFn=!0),t.clamped&&(e.hasClampFn=!0)})},o.prototype.getHtmlControlMessageLines=function(e){var n=this,r=c.ba(t.prototype.getHtmlControlMessageLines.call(this,e));return this.components.forEach(function(t){r(n.getHtmlControlMessageForValue(e,t.value,n.i18nId+"."+t.suffix),n.getHtmlControlMessageForValue(e,t.value.speed,n.i18nId+"."+t.suffix+".speed"))}),r.e()},o.prototype.getHtmlInputLines=function(e){var n=this,r=c.ba(t.prototype.getHtmlInputLines.call(this,e));return this.components.forEach(function(t){return r(n.getHtmlSliderLines(e,t.value,"options."+n.i18nId+"."+t.suffix,t.name,"any"),n.getHtmlSliderLines(e,t.value.speed,"options."+n.i18nId+"."+t.suffix+".speed",t.name+".speed","any"))}),r.e()},o.prototype.getJsInitLines=function(e){var n=this,r=function(t){var r=function(){var r=f.b(),i=function(i,o){if("slider"==i.input){var a=new d.Slider(o),s=a.enter();s.log("console.log(this.id,'input value:',parseFloat(this.value));"),t&&s.post(n.updateFnName+"();"),r(e.getListenerLines(a))}};return n.components.forEach(function(t){i(t.value,t.name),i(t.value.speed,t.name+".speed")}),r.e()},i=function(){var r=new d.MultipleSlider('[id^="'+n.name+'."]'),i=r.enter();return i.log("console.log(this.id,'input value:',parseFloat(this.value));"),t&&i.post(n.updateFnName+"();"),e.getListenerLines(r)},o=r(),a=i();return o.count()<=a.count()?o:a},i=f.ba(t.prototype.getJsInitLines.call(this,e));if(i(this.getJsDeclarationLines()),this.modeConstant)return i(this.getJsUpdateLines(this.makeInitialComponentValue())),i.e();var o=this.components.some(function(t){return t.hasSpeed()}),a=this.components.some(function(t){return"slider"==t.value.input}),s=this.components.some(function(t){return t.hasInputClass(l.Gamepad)}),u=function(){var t=void 0,e=void 0,r={},u={},c=[],f=[];n.components.forEach(function(t){(t.value.input instanceof l.MouseMove&&(a||o||s)||"constant"!=t.value.speed.input&&"slider"!=t.value.input)&&(r[t.value.name]=t.value,c.push(t)),t.value.speed.input instanceof l.MouseMove&&(u[t.value.name]=t.value.speed,f.push(t))}),t=p.js(r),e=p.js(u),c.forEach(function(e){return i("var "+e.varName+"="+t[e.value.name]+";")}),f.forEach(function(t){return i("var "+t.varNameSpeed+"="+e[t.value.name]+";")})};return u(),o||!a||s||i(h.b(f.bae("function "+this.updateFnName+"() {"),f.bae("}")).ae(this.getJsUpdateLines(this.makeUpdatedComponentValue())),this.updateFnName+"();"),i(r(!o&&!s)),this.components.some(function(t){return t.value.input instanceof l.MouseMove})&&!function(){o||a||s||i(n.getJsUpdateLines(n.makeInitialComponentValue()));var t=e.canvasMousemoveListener.enter();n.components.forEach(function(e){if(e.value.input instanceof l.MouseMove){var r=p.js({min:e.value.min,max:e.value.max},e.value.precision);(o||a||s?t.minMaxFloat:t.minMaxVarFloat)(e.value.input,e.varName,r.min,r.max),t.log("console.log('"+e.name+" input value:',"+e.varName+");"),o||a||s||n.addPostToListenerEntryForComponent(t,e)}}),o||s||(a?t.post(n.updateFnName+"();"):n.addPostToListenerEntryAfterComponents(t,n.makeUpdatedComponentValue()))}(),this.components.some(function(t){return t.value.speed.input instanceof l.MouseMove})&&!function(){var t=e.canvasMousemoveListener.enter();n.components.forEach(function(e){var n=p.js({min:e.value.speed.min,max:e.value.speed.max},e.value.speed.precision);e.value.speed.input instanceof l.MouseMove&&t.minMaxFloat(e.value.speed.input,e.varNameSpeed,n.min,n.max).log("console.log('"+e.name+".speed input value:',"+e.varNameSpeed+");")})}(),i.e()},o.prototype.getJsLoopLines=function(e){var n=f.ba(t.prototype.getJsLoopLines.call(this,e)),r=function(t){var e=t.charAt(0);return"-"==e||"+"==e?t:"+"+t},i=!1,o=function(t,r,o,a){if(r.input instanceof l.Gamepad){i=!0;var s=p.js({min:r.min,max:r.max,value:r.value},r.precision);n("var "+t.minVarName+a+"="+s.min+";","var "+t.maxVarName+a+"="+s.max+";","var "+t.varName+a+"="+s.value+";","if (gamepad && gamepad.axes.length>"+r.input.axis+") {","\t"+t.varName+a+"="+t.minVarName+a+"+("+t.maxVarName+a+"-"+t.minVarName+a+")*(gamepad.axes["+r.input.axis+"]+1)/2;","}"),e&&e.debugOptions.inputs&&n("console.log('"+t.name+o+" input value:',"+t.varName+a+");")}};return this.components.forEach(function(t){var a=t.value;o(t,a,"",""),o(t,a.speed,".speed","Speed"),t.hasSpeed()&&!function(){i=!0;var o=void 0;o="slider"==a.speed.input?"+parseFloat(document.getElementById('"+t.name+".speed').value)":a.speed.input instanceof l.MouseMove||a.speed.input instanceof l.Gamepad?"+"+t.varNameSpeed:r(u.js(a.speed));var s=function(e,n){return e==t.varName?n.charAt(0)+"="+n.slice(1):"="+e+n};t.wrapped?s=function(t,e){return"=wrap("+t+e+","+u.js(a.max,a.precision)+")"}:t.clamped?!function(){var t=p.js({min:a.min,max:a.max},a.precision);s=function(e,n){return"=clamp("+e+n+","+t.min+","+t.max+")"}}():t.capped&&(s=function(t,e){return"=Math."+(a.speed<0?"max":"min")+"("+t+e+","+u.js(a.speed<0?a.min:a.max,a.precision)+")"});var c=function(e,n){return t.varName+s(e,o+"*"+n+"/1000")+";"};"slider"==a.input?n("var "+t.varNameInput+"=document.getElementById('"+t.name+"');","var "+c("parseFloat("+t.varNameInput+".value)","(time-prevTime)"),t.varNameInput+".value="+t.varName+";"):n(a.input instanceof l.MouseMove||"constant"!=a.speed.input?c(t.varName,"(time-prevTime)"):"var "+c(u.js(a),"(time-startTime)")),e&&e.debugOptions.animations&&n("console.log('"+t.name+" animation value:',"+t.varName+");")}()}),i&&n(this.getJsUpdateLines(this.makeUpdatedComponentValue())),n.e()},e(o,[{key:"varName",get:function(){return s(this.name)}},{key:"updateFnName",get:function(){return s("update."+this.name)}}]),o}(v);o.exports=g},{10:10,11:11,18:18,19:19,27:27,40:40,42:42,44:44,59:59,6:6}]},{},[43])}();
//# sourceMappingURL=webgl-starter.js.map
