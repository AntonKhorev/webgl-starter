!function(){var babelHelpers={"typeof":function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},createClass:function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),classCallCheck:function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},possibleConstructorReturn:function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},inherits:function(e,t){function n(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(t,i);a&&a.configurable&&void 0===e[i]&&Object.defineProperty(e,i,a)}return e}if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&n(e,t)},taggedTemplateLiteralLoose:function(e,t){return e.raw=t,e}};!function e(t,n,r){function i(s,o){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var p=n[s]={exports:{}};t[s][0].call(p.exports,function(e){var n=t[s][1][e];return i(n?n:e)},p,p.exports,e,t,n,r)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";t.exports=function(e){return function(t){var n="code-output",r={en:{save:"Save source code",run:"Run in new window","open.codepen":"Open in CodePen","open.jsfiddle":"Open in JSFiddle","section.html":"HTML","section.css":"CSS","section.js":"JavaScript",embedded:"embedded in HTML source code","mode.full":"complete HTML","mode.body":"only HTML body","mode.embed":"embed in HTML","mode.paste":"extract to paste into HTML later","mode.file":"extract to load as external resource",formatting:"Formatting","formatting.indent":"indent with tabs","formatting.indentNumber":"spaces per indent","formatting.jsSemicolons":"JavaScript semicolons","warning.no-hljs":"<a href=https://highlightjs.org/>highlight.js</a> (hosted on <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>) is not loaded. Syntax highlighting is disabled."},ru:{save:"Сохранить исходный код",run:"Запустить в новом окне","open.codepen":"Открыть в CodePen","open.jsfiddle":"Открыть в JSFiddle","section.html":"HTML","section.css":"CSS","section.js":"JavaScript",embedded:"встроен в код HTML","mode.full":"полностью","mode.body":"только <code>body</code>","mode.embed":"встроить в HTML","mode.paste":"извлечь для последующей вставки в HTML","mode.file":"извлечь для загрузки в качестве внешнего ресурса",formatting:"Форматирование","formatting.indent":"отступы с помощью tab","formatting.indentNumber":"пробелов в отступе","formatting.jsSemicolons":"<code>;</code> в JavaScript","warning.no-hljs":"<a href=https://highlightjs.org/>highlight.js</a> (с сервера <a href=http://cdnjs.cloudflare.com>cdnjs.cloudflare.com</a>) не загружен. Подсветка синтаксиса отключена."}};for(var i in r[e])t[n+"."+i]=r[e][i];return t}}},{}],2:[function(e,t,n){"use strict";var r=e(6),i=e(8),a=function(e){return"data:text/html;charset=utf-8,"+encodeURIComponent(e)},s=function(){function e(t,n){var a=this;babelHelpers.classCallCheck(this,e);var s=t(),o={},l={},u=void 0,p=void 0,c=void 0,h=function(){return s},f=function(){var e="	";if(!u.prop("checked")){var t=4;p[0].checkValidity()&&(t=Number(p.val())),e=i(" ",t)}return{refs:a.refs,indent:e,jsSemicolons:c.prop("checked")}},d=function(){return{html:l.html.val(),css:l.css.val(),js:l.js.val()}},m=function(){var e=d(),t=s.extractSections(e);for(var r in t)if("embed"==e[r])o[r].empty().append("<p>"+n("code-output.embedded")+"</p>");else{var i=void 0;o[r].empty().append($("<pre>").append(i=$("<code class='"+r+"'>"))),i.html(t[r].getHtml(f()).join("\n")),window.hljs&&hljs.highlightBlock(i[0])}},v=function(){return $("<details>").append("<summary>"+n("code-output.formatting")+"</summary>",$("<div>").append($("<label>").append(u=$("<input type='checkbox' checked>").change(m)," "+n("code-output.formatting.indent"))),$("<div>").append($("<label>").append(p=$("<input type='number' min='0' max='32' value='4' required>").on("input change",m)," "+n("code-output.formatting.indentNumber"))),$("<div>").append($("<label>").append(c=$("<input type='checkbox'>").change(m)," "+n("code-output.formatting.jsSemicolons"))))},b=function(e){var t="html"!=e,r=$("<summary>"+n("code-output.section."+e)+"</summary>"),i=void 0;return r.append(" ",l[e]=$("<select>").append(("html"==e?["full","body"]:["embed","paste","file"]).map(function(e){return $("<option>").val(e).html(n("code-output.mode."+e))})).change(function(){t&&i.prop("disabled","embed"==this.value),m()})," ",i=$("<button type='button'>"+n("code-output.save")+"</button>").click(function(){var t=s.extractSections(d())[e],n=new Blob([t.get(f()).join("\n")],{type:t.mimeType});if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(n,t.filename);else{var r=$("<a>").attr("download",t.filename).attr("href",URL.createObjectURL(n)).appendTo("body");r.get(0).click(),r.remove()}})),t&&i.prop("disabled","embed"==l[e].val()),$("<details open>").append(r,o[e]=$("<div class='code'>"))},g=$("<div class='code-output'>").append(this.writeButtons(h,f,n)).append(v(),b("html"),b("css"),b("js"));window.hljs||g.append("<p>"+n("code-output.warning.no-hljs")+"</p>"),g.append(this.writeButtons(h,f,n)),m();var y=200,x=r(function(){s=t(),m()},y);this.$output=g,this.update=x}return e.prototype.writeButtons=function(e,t,n){return $("<div>").append($("<button type='button'>"+n("code-output.run")+"</button>").click(function(){var n=e(),r=n.get(t()).join("\n");if(navigator.msSaveOrOpenBlob){var i=window.open("","generatedCode");i.document.open(),i.document.write(r),i.document.close()}else window.open(a(r),"generatedCode")})," ",$("<button type='button'>"+n("code-output.open.codepen")+"</button>").click(function(){var n=e(),r=n.extractSections({html:"body",css:"paste",js:"paste"}),i=function(e){return r[e].get(t()).join("\n")};$("<form method='post' action='http://codepen.io/pen/define/' target='codepenGeneratedCode'>").append($("<input type='hidden' name='data'>").val(JSON.stringify({html:i("html"),css:i("css"),js:i("js"),title:n.title}))).appendTo("body").submit().remove()})," ",$("<button type='button'>"+n("code-output.open.jsfiddle")+"</button>").click(function(){var n=e(),r=n.extractSections({html:"body",css:"paste",js:"paste"}),i=function(e){return r[e].get(t()).join("\n")},a=function(e){return $("<input type='hidden'>").attr("name",e).val(i(e))};$("<form method='post' action='http://jsfiddle.net/api/post/library/pure/' target='jsfiddleGeneratedCode'>").append(a("html"),a("css"),a("js"),$("<input type='hidden' name='title'>").val(n.title),"<input type='hidden' name='wrap' value='b'>").appendTo("body").submit().remove()}))},babelHelpers.createClass(e,[{key:"refs",get:function(){return{}}}]),e}();t.exports=s},{6:6,8:8}],3:[function(e,t,n){"use strict";var r=function(){function e(t,n,r){babelHelpers.classCallCheck(this,e),this.filename=t,this.mimeType=n,this.lines=r}return e.prototype.get=function(e){return this.lines.get(e)},e.prototype.getHtml=function(e){return this.lines.getHtml(e)},e}();t.exports=r},{}],4:[function(e,t,n){var r=e(5);t.exports=function(e){return e.split(".").map(function(e,t){return t>0?r(e):e}).join("")}},{5:5}],5:[function(e,t,n){t.exports=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{}],6:[function(e,t,n){t.exports=function(e,t){var n=null;return function(){clearTimeout(n),n=setTimeout(e,t)}}},{}],7:[function(e,t,n){t.exports=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return String(e).replace(/[&<>"']/g,function(e){return t[e]})}},{}],8:[function(e,t,n){t.exports=function(e,t){return Array(t+1).join(e)}},{}],9:[function(e,t,n){"use strict";var r=e(10),i=function(e,t){return r([e],t)[0]};i.html=function(e,t){return r.html([e],t)[0]},i.js=function(e,t){return r.js([e],t)[0]},i.glsl=function(e,t){return r.glsl([e],t)[0]},t.exports=i},{10:10}],10:[function(e,t,n){"use strict";var r=function(e,t,n,r){var i=0;n&&(i=1);var a=!1;for(var s in e){var o=void 0;if(void 0!==t)o=t;else{if(void 0===e[s].precision)throw new Error("formatNumbers received no precision");o=e[s].precision}var l=Number(e[s]);0>l&&(a=!0);var u=l.toFixed(o);o>0&&(o-=u.match(/0*$/)[0].length),o>i&&(i=o)}var p={};for(var s in e){var l=Number(e[s]),u=l.toFixed(i);!r&&a&&l>0&&(u="+"+u),p[s]=u}return p},i=function(e,t){return r(e,t)};i.html=function(e,t){return r(e,t,!1,!0)},i.js=function(e,t){return r(e,t)},i.glsl=function(e,t){return r(e,t,!0)},t.exports=i},{}],11:[function(e,t,n){"use strict";t.exports=function(e){function t(e,i){var a=void 0;(a=r.exec(e))?!function(){var e=a[1],n=a[2].split(","),s=a[3];(a=r.exec(i))?!function(){var r=a[1],i=a[2],o=i.split(","),l=a[3];n.forEach(function(n,a){var u=o[a];""!=i?t(e+n+s,r+u+l):t(e+n+s,r+n+l)})}():n.forEach(function(n){t(e+n+s,i)})}():n[e]=i}var n={},r=/^([^{]*)\{([^}]*)\}(.*)$/;for(var i in e)t(i,e[i]);return n}},{}],12:[function(e,t,n){"use strict";t.exports=function(e){return function(t){for(var n in t)t[n]=t[n].replace(/\[\[(.*?)\]\]/g,function(t,n){var r=void 0,i=void 0,a=n.indexOf("|");return 0>a?(r=n,i=n):(r=n.slice(0,a),i=n.slice(a+1)),"<a href='https://"+e+".wikipedia.org/wiki/"+r.replace(/ /g,"_")+"'>"+i+"</a>"});return t}}},{}],13:[function(e,t,n){"use strict";var r=e(7);t.exports=function(e){return function(t){var n="en";t=t||n,t=t.split("-")[0];var i=e[t];void 0===i&&(t=n,i=e[t]);var a=function(e){if(void 0!==i[e])return i[e];throw new Error("undefined string "+e)};return a.lang=t,a.has=function(e){return void 0!==i[e]},"en"==t?(a.number=function(e){return String(e).replace("-","−")},a.pluralSuffix=function(e){var t=String(e);if(t.indexOf(".")<0){var n=Number(e);return 1==Math.abs(n)?"1":"2"}return"2"}):"ru"==t&&(a.number=function(e){return String(e).replace("-","−").replace(".",",")},a.pluralSuffix=function(e){var t=String(e);if(t.indexOf(".")<0){var n="1"===t.slice(-2,-1);return"1"!==t.slice(-1)||n?"234".indexOf(t.slice(-1))>=0&&!n?"2":"5":"1"}return"2"}),a.plural=function(e,t){return this(t+"."+this.pluralSuffix(e))},a.numberWithUnits=function(e,t,n){void 0===n&&(n=function(e,t){return"<abbr title='"+r(t)+"'>"+e+"</abbr>"});var i=this.number(e);if(void 0!==t)if(1==t.length&&/^\W/.test(t))i+=t;else{i+=" ";var s=void 0;s="1/second"==t?a("units.second.a")+"<sup>−1</sup>":a("units."+t+".a");var o=this.plural(e,"units."+t);i+=n(s,o)}return i},a}}},{7:7}],14:[function(e,t,n){"use strict";var r=e(8),i=e(17),a=function(e){function t(n,r){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,e.call(this,n));return void 0!==r?i.level=r:i.level=1,i}return babelHelpers.inherits(t,e),t.prototype.doGet=function(t,n){var i="	";void 0!==t.indent&&(i=t.indent);var a=r(i,this.level);return e.prototype.doGet.call(this,t,n).map(function(e){return a+e})},t}(i);t.exports=a},{17:17,8:8}],15:[function(e,t,n){"use strict";var r=e(7),i=e(17),a=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.doGet=function(e,t){var n=[],a=!0,s=function(){a?a=!1:n.push("")};return this.data.forEach(function(a){if(a instanceof i){var o=a.doGet(e,t);o.length>0&&(s(),n.push.apply(n,o))}else if("string"==typeof a){s();var l=t?r(a):a;n.push(l)}}),n},t}(i);t.exports=a},{17:17,7:7}],16:[function(e,t,n){"use strict";var r=e(17),i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.processStringInGet=function(e,t){return t.jsSemicolons?e.replace(/^;/,""):e.replace(/;$/,"")},t}(r);t.exports=i},{17:17}],17:[function(e,t,n){"use strict";var r=e(7),i=e(8),a={},s=function(){function e(t){if(babelHelpers.classCallCheck(this,e),!Array.isArray(t))throw new TypeError("attempted to construct Lines with non-array data argument");this.data=t}return e.prototype.isDataEmpty=function(){for(var t=0;t<this.data.length;t++){var n=this.data[t];if(n instanceof e){if(!n.isEmpty())return!1}else if("string"==typeof n)return!1}return!0},e.prototype.processStringInGet=function(e,t){return e},e.prototype.doGet=function(t,n){var s=this,o=[],l=!1;return this.data.forEach(function(u){if(u===a)l=!0;else if(u instanceof e){var p=u.doGet(t,n);l&&p.length>0&&o.push(o.pop()+p.shift()),o.push.apply(o,p),l=!1}else if("string"==typeof u){var c=s.processStringInGet(u,t);void 0!==t.indent&&"	"!=t.indent&&(c=c.replace(/^(\t)+/,function(e){return i(t.indent,e.length)})),c=n?r(c):c,l?o.push(o.pop()+c):o.push(c),l=!1}}),o},e.b=function(){var e=this,t=arguments,n=[],r=function(){return new(Function.prototype.bind.apply(e,[null].concat([n],Array.prototype.slice.call(t))))},i=function(){return i.a.apply(i,arguments)};return i.a=function(){return n.push.apply(n,arguments),this},i.t=function(){return n.push.apply(n,[a].concat(Array.prototype.slice.call(arguments))),this},i.e=r,i.ae=function(){return this.a.apply(this,arguments).e()},i},e.ba=function(){var e;return(e=this.b()).a.apply(e,arguments)},e.be=function(){return this.b().e()},e.bae=function(){var e;return(e=this.b()).a.apply(e,arguments).e()},e.prototype.isEmpty=function(){return this.isDataEmpty()},e.prototype.get=function(e){return void 0===e&&(e={}),this.doGet(e,!1)},e.prototype.getHtml=function(e){return void 0===e&&(e={}),this.doGet(e,!0)},e.prototype.count=function(){return this.doGet({},!1).length},e.html=function(e){var t=arguments;return e.reduce(function(e,n,r){var i=t[r];switch(e.slice(-1)){case"=":return i===!1?e.replace(/\s+[a-zA-Z0-9-]+=$/,"")+n:i===!0?e.replace(/=$/,"")+n:(i=String(i).replace(/&/g,"&amp;"),""==i?e.replace(/=$/,"")+n:/[\s"'=<>`]/.test(i)?/'/.test(i)?(i=i.replace(/"/g,"&quot;"),e+'"'+i+'"'+n):e+"'"+i+"'"+n:e+i+n);case">":return i=String(i).replace(/&/g,"&amp;").replace(/</g,"&lt;"),e+i+n}throw new Error("invalid character before substitution")})},e}();t.exports=s},{7:7,8:8}],18:[function(e,t,n){"use strict";var r=e(24),i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.isEmpty=function(){return this.isDataEmpty()},t.prototype.doGet=function(t,n){return this.isEmpty()?[]:e.prototype.doGet.call(this,t,n)},t}(r);t.exports=i},{24:24}],19:[function(e,t,n){"use strict";var r={};r.Base=function(){function e(t,n,r,i,a,s,o,l){if(babelHelpers.classCallCheck(this,e),this.name=t,this.updateCallback=s,this.fullName=i,this._$=null,this.isVisible=function(){return!0},this.fullNamesAffectingVisibility=[],void 0!==n.visibilityData){this.isVisible=function(){for(var e in n.visibilityData){var t=a[e].value;if(n.visibilityData[e].indexOf(t)<0)return!1}return!0};for(var u in n.visibilityData)this.fullNamesAffectingVisibility.push(u)}}return e.make=function(e){for(var t=0,n=0,r=0,i=void 0,a=[],s={},o=1;o<arguments.length;o++){var l=arguments[o];"string"==typeof l||"number"==typeof l||"boolean"==typeof l?0==t++&&(i=l):Array.isArray(l)?0==n++&&(a=l):l instanceof Object&&0==r++&&(s=l)}var u=this,p=this.collectArgs(i,a,s);return function(){return new(Function.prototype.bind.apply(u,[null].concat([e,p],Array.prototype.slice.call(arguments))))}},e.collectArgs=function(e,t,n){return n},e.prototype.updateVisibility=function(){this.$&&this.$.toggle(this.isVisible())},e.prototype.shortenExport=function(e){var t=Object.keys(e);return 1==t.length&&"value"==t[0]?e.value:e},e.prototype.shortenExportAssign=function(e,t,n){var r=Object.keys(e);1==r.length&&"value"==r[0]?t[n]=e.value:r.length>0&&(t[n]=e)},babelHelpers.createClass(e,[{key:"$",get:function(){return this._$},set:function(e){this._$=e,this.updateVisibility()}}]),e}(),r.Input=function(e){function t(n,r,i,a,s,o,l,u){babelHelpers.classCallCheck(this,t);var p=babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments));return p.defaultValue=r.defaultValue,"object"==typeof i&&(i=i.value),void 0!==i?p._value=i:p._value=p.defaultValue,p}return babelHelpers.inherits(t,e),t.collectArgs=function(t,n,r){return r=Object.create(r),void 0===r.defaultValue&&(r.defaultValue=t),e.collectArgs.call(this,t,n,r)},t.prototype["export"]=function(){var e={};return this.value!=this.defaultValue&&(e.value=this.value),e},babelHelpers.createClass(t,[{key:"value",get:function(){return this._value},set:function(e){this._value=e,this.updateCallback()}}]),t}(r.Base),r.Boolean=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.collectArgs=function(t,n,r){return e.collectArgs.call(this,!!t,n,r)},t.prototype.fix=function(){return this.value},t}(r.Input),r.NonBoolean=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.fix=function(){var e=this.value;return{name:this.name,value:e,valueOf:function(){return e},toString:function(){return String(e)}}},t}(r.Input),r.Factor=function(e){function t(n,r,i,a,s,o,l,u){babelHelpers.classCallCheck(this,t);var p=babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments));return p.availableValues=r.availableValues,p}return babelHelpers.inherits(t,e),t.collectArgs=function(t,n,r){return r=Object.create(r),void 0===r.availableValues&&(r.availableValues=n),void 0===t&&(t=r.availableValues[0]),e.collectArgs.call(this,t,n,r)},t}(r.NonBoolean),r.Number=function(e){function t(n,r,i,a,s,o,l,u){babelHelpers.classCallCheck(this,t);var p=babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments));return p.availableMin=r.availableMin,p.availableMax=r.availableMax,p.unit=r.unit,p}return babelHelpers.inherits(t,e),t.collectArgs=function(t,n,r){return r=Object.create(r),void 0===r.availableMin&&(r.availableMin=n[0]),void 0===r.availableMax&&(r.availableMax=n[1]),void 0===t&&(t=r.availableMin),e.collectArgs.call(this,t,n,r)},t.prototype.fix=function(){var t=e.prototype.fix.call(this);return t.precision=this.precision,t.unit=this.unit,t},t}(r.NonBoolean),r.Collection=function(e){function t(n,r,i,a,s,o,l,u){babelHelpers.classCallCheck(this,t);var p=babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments));return p.entries=r.descriptions.map(function(e){var t=e[1],n=void 0;return"object"==typeof i&&(n=i[t]),l(e,a,n,u)}),p}return babelHelpers.inherits(t,e),t.collectArgs=function(t,n,r){return r=Object.create(r),void 0===r.descriptions&&(r.descriptions=n),e.collectArgs.call(this,t,n,r)},t.prototype["export"]=function(){var e={};return this.entries.forEach(function(t){t.shortenExportAssign(t["export"](),e,t.name)}),e},t.prototype.fix=function(){var e=[],t={name:this.name,entries:e};return this.entries.forEach(function(n){e.push(t[n.name]=n.fix())}),t},t}(r.Base),r.Void=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype["export"]=function(){return{}},t.prototype.fix=function(){return{name:this.name}},t}(r.Base),r.Checkbox=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t}(r.Boolean),r.Select=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t}(r.Factor),r.Text=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t}(r.Factor),r.Int=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"precision",get:function(){return 0}}]),t}(r.Number),r.Float=function(e){function t(n,r,i,a,s,o,l,u){babelHelpers.classCallCheck(this,t);var p=babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments));return void 0!==r.precision?p.precision=r.precision:p.availableMax>=100?p.precision=1:p.availableMax>=10?p.precision=2:p.precision=3,p}return babelHelpers.inherits(t,e),t}(r.Number),r.Root=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t}(r.Collection),r.Group=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t}(r.Collection),r.Array=function(e){function t(n,r,i,a,s,o,l,u){babelHelpers.classCallCheck(this,t);var p=babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments));p.availableConstructors=new Map,r.descriptions.forEach(function(e){var t=e[1],n=function(t){return l(e,a,t,!0)};p.availableConstructors.set(t,n)}),void 0!==r.typePropertyName?p.typePropertyName=r.typePropertyName:p.typePropertyName="type",p._entries=[];var c=[];Array.isArray(i)?c=i:"object"==typeof i&&(c=i.value);for(var h=p.availableTypes[0],f=0;f<c.length;f++){var d=c[f],m=h;"object"==typeof d&&void 0!==d[p.typePropertyName]&&(m=d[p.typePropertyName]);var v=p.availableConstructors.get(m);v&&p._entries.push(v(d))}return p}return babelHelpers.inherits(t,e),t.collectArgs=function(t,n,r){return r=Object.create(r),void 0===r.descriptions&&(r.descriptions=n),void 0===r.typePropertyName&&(r.typePropertyName=t),e.collectArgs.call(this,t,n,r)},t.prototype.addEntry=function(e){var t=this.availableConstructors.get(e)();return this._entries.push(t),this.updateCallback(),t},t.prototype["export"]=function(){var e=this,t=this.availableTypes[0];return{value:this._entries.map(function(n){var r=n["export"](),i=n.name;return i!=t&&(r[e.typePropertyName]=i),n.shortenExport(r)})}},t.prototype.fix=function(){var e=this;return{name:this.name,entries:this._entries.map(function(t){var n=t.fix();return"object"==typeof n&&(n[e.typePropertyName]=t.name),n})}},babelHelpers.createClass(t,[{key:"availableTypes",get:function(){var e=[];return this.availableConstructors.forEach(function(t,n){e.push(n)}),e}},{key:"entries",get:function(){return this._entries},set:function(e){this._entries=e,this.updateCallback()}}]),t}(r.Base),t.exports=r},{}],20:[function(e,t,n){"use strict";t.exports=function(e){return function(t){var n="options-output",r={en:{reset:"Reset",drag:"Drag or press ↑/↓ while in focus to reorder","delete":"Delete"},ru:{reset:"Сбросить",drag:"Перетаскивайте или нажимайте ↑/↓, пока элемент в фокусе, чтобы изменить порядок","delete":"Удалить"}};for(var i in r[e])t[n+"."+i]=r[e][i];return t}}},{}],21:[function(e,t,n){"use strict";var r=e(10),i=e(19),a=function(){function e(t,n,r){function i(e){for(var t=e;t=Object.getPrototypeOf(t);){var s=a.get(t.constructor);if(s)return s(e,i,r,n)}}babelHelpers.classCallCheck(this,e);var a=new Map;this.setOptionClassWriters(a),this.$output=i(t.root)}return e.prototype.setOptionClassWriters=function(e){e.set(i.Root,function(e,t,n,r){return e.$=$("<div class='options-output'>").append(e.entries.map(t))}),e.set(i.Group,function(e,t,n,r){return e.$=$("<fieldset>").append("<legend>"+n("options."+e.fullName)+"</legend>").append(e.entries.map(t))}),e.set(i.Void,function(e,t,n,r){return e.$=$("<div class='option no-lead'>").html(n("options."+e.fullName))}),e.set(i.Checkbox,function(e,t,n,r){var i=r();return e.$=$("<div class='option no-lead'>").append($("<input type='checkbox' id='"+i+"'>").prop("checked",e.value).change(function(){e.value=$(this).prop("checked")})," <label for='"+i+"'>"+n("options."+e.fullName)+"</label>")}),e.set(i.Select,function(e,t,n,r){var i=function(t){return"options."+e.fullName+"."+t},a=function(t){return"options-info."+e.fullName+"."+t},s=r(),o=void 0;return e.$=$("<div class='option'>").append("<label for='"+s+"'>"+n("options."+e.fullName)+":</label> ",o=$("<select id='"+s+"'>").append(e.availableValues.map(function(e){return $("<option>").val(e).html(n(i(e)))})).val(e.value).change(function(){e.value=this.value})),e.availableValues.some(function(e){return n.has(a(e))})&&!function(){var t=void 0,r=void 0;e.$.append(" ",t=$("<span class='tip-info'>").append(r=$("<span class='tip-content'>")));var i=function(){n.has(a(this.value))?(r.html(n(a(this.value))),t.show()):(t.hide(),r.empty())};i.call(o[0]),o.change(i)}(),e.$}),e.set(i.Text,function(e,t,n,r){var i=r(),a=r();return e.$=$("<div class='option'>").append("<label for='"+i+"'>"+n("options."+e.fullName)+":</label> ",$("<input type='text' id='"+i+"' list='"+a+"' />").val(e.value).on("input change",function(){e.value=this.value})," ",$("<datalist id='"+a+"'>").append(e.availableValues.map(function(e){return $("<option>").text(e)})))}),e.set(i.Number,function(e,t,n,i){var a=e.precision,s=function(t){return t.attr("min",e.availableMin).attr("max",e.availableMax).attr("step",Math.pow(.1,a).toFixed(a))},o=function(t,n){return s(t).val(e.value).on("input change",function(){if(this.checkValidity()){var t=n();t.val(this.value),e.value=parseFloat(this.value)}})},l=i(),u=void 0,p=void 0,c=r({min:e.availableMin,max:e.availableMax},e.precision);return e.$=$("<div class='option'>").append("<label for='"+l+"'>"+n("options."+e.fullName)+":</label>"," <span class='min'>"+n.numberWithUnits(c.min,e.unit)+"</span> ",u=o($("<input type='range' id='"+l+"'>"),function(){return p})," <span class='max'>"+n.numberWithUnits(c.max,e.unit)+"</span> ",p=o($("<input type='number' required>"),function(){return u})," ",$("<button type='button'>"+n("options-output.reset")+"</button>").click(function(){u.val(e.defaultValue).change()}))}),e.set(i.Array,function(e,t,n,r){var i=null,a=void 0,s=function(){e.entries=a.children().map(function(){return $(this).data("option")}).get()},o=function(e){var r=function(e){e.prev().before(e),s()},a=function(e){e.next().after(e),s()};return $("<div class='draggable-with-handle'>").data("option",e).append($("<div draggable='true' tabindex='0' title='"+n("options-output.drag")+"'>").on("dragstart",function(e){i=$(this).parent(),e.originalEvent.dataTransfer.effectAllowed="move",e.originalEvent.dataTransfer.setData("Text",name),e.originalEvent.dataTransfer.setDragImage&&e.originalEvent.dataTransfer.setDragImage(i[0],0,0),setTimeout(function(){i.addClass("ghost")},0)}).keydown(function(e){var t=$(this),n=t.parent();return 38==e.keyCode?(r(n),t.focus(),!1):40==e.keyCode?(a(n),t.focus(),!1):void 0}),t(e),$("<div tabindex='0' class='delete' title='"+n("options-output.delete")+"'>").click(function(){$(this).parent().remove(),s()}).keydown(function(e){return 13==e.keyCode||32==e.keyCode?($(this).parent().remove(),s(),!1):void 0})).on("dragover",function(e){e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move";var t=$(this);if(i)if(t.next().is(i)){var n=i.height(),s=e.pageY-t.offset().top;n>s&&r(i)}else if(t.nextAll().is(i))r(i);else if(t.prev().is(i)){var o=t.height(),n=i.height(),s=e.pageY-t.offset().top;s>o-n&&a(i)}else t.prevAll().is(i)&&a(i)}).on("drop",function(e){e.preventDefault()}).on("dragend",function(e){e.preventDefault(),i&&(i.removeClass("ghost"),i=null)})};e.$=$("<fieldset>").append("<legend>"+n("options."+e.fullName)+"</legend>").append(a=$("<div>").append(e.entries.map(o)));var l=$("<div>");return e.availableTypes.forEach(function(t,r){r&&l.append(" "),l.append($("<button type='button'>").html(n("options."+e.fullName+"."+t+".add")).click(function(){var n=e.addEntry(t);a.append(o(n))}))}),e.$.append(l),e.$})},e}();t.exports=a},{10:10,19:19}],22:[function(e,t,n){"use strict";var r=function(){function t(e){var n=this;babelHelpers.classCallCheck(this,t),this.updateCallback=void 0;var r=function(){n.updateCallback&&n.updateCallback()},i=this.optionClasses,a={},s={},o=function(e,t,l,u){var p,c=e[0];if(void 0===i[c])throw new Error("invalid option type '"+c+"'");var h=e[1],f=h;null!==t&&(f=t+"."+h);var d=e.slice(1),m=void 0;m=u?r:function(){void 0!==s[f]&&s[f].forEach(function(e){e.updateVisibility()}),n.updateCallback&&n.updateCallback()};var v=(p=i[c]).make.apply(p,d)(l,f,a,m,o,u);return u||(a[f]=v,v.fullNamesAffectingVisibility.forEach(function(e){void 0===s[e]&&(s[e]=[]),s[e].push(v)})),v};this.root=i.Root.make(null,this.entriesDescription)(e,null,a,r,o,!1)}return t.prototype["export"]=function(){return this.root.shortenExport(this.root["export"]())},t.prototype.fix=function(){return this.root.fix()},babelHelpers.createClass(t,[{key:"optionClasses",get:function(){return e(19)}},{key:"entriesDescription",get:function(){return[]}}]),t}();t.exports=r},{19:19}],23:[function(e,t,n){"use strict";var r=babelHelpers.taggedTemplateLiteralLoose(["<link rel=stylesheet href=",">"],["<link rel=stylesheet href=",">"]),i=babelHelpers.taggedTemplateLiteralLoose(["<script src=","></script>"],["<script src=","></script>"]),a=babelHelpers.taggedTemplateLiteralLoose(["<html lang=",">"],["<html lang=",">"]),s=e(17),o=e(18),l=e(3),u=function(){function e(){babelHelpers.classCallCheck(this,e)}return e.prototype.get=function(e){return this.getLines().get(e)},e.prototype.getHtml=function(e){return this.getLines().getHtml(e)},e.prototype.extractSections=function(e){void 0===e&&(e={});var t=o.b("<style>","</style>").ae(this.cachedStyleLines),n=s.be();"paste"==e.css?(t="body"==e.html?s.be():s.bae("<!-- <style> "+this.getSectionPasteComment("css")+" </style> -->"),n=this.cachedStyleLines):"file"==e.css&&(t=s.bae(s.html(r,this.basename+".css")),n=this.cachedStyleLines);var a=o.b("<script>","</script>").ae(this.cachedScriptLines),u=s.be();"paste"==e.js?(a="body"==e.html?s.be():s.bae("<!-- <script> "+this.getSectionPasteComment("js")+" </script> -->"),u=this.cachedScriptLines):"file"==e.js&&(a=s.bae(s.html(i,this.basename+".js")),u=this.cachedScriptLines);var p=void 0;p="body"==e.html?this.getBodyHtmlSectionLines(t,a):this.getFullHtmlSectionLines(t,a);var c=function(e){return"text/"+("js"==e?"javascript":e)};return{html:new l(this.filename,c("html"),p),css:new l(this.basename+".css",c("css"),n),js:new l(this.basename+".js",c("js"),u)}},e.prototype.getLines=function(){return this.getFullHtmlSectionLines(o.b("<style>","</style>").ae(this.cachedStyleLines),o.b("<script>","</script>").ae(this.cachedScriptLines))},e.prototype.getFullHtmlSectionLines=function(e,t){var n=s.b();return n("<!DOCTYPE html>"),n(null!==this.lang?s.html(a,this.lang):"<html>"),n("<head>","<meta charset=utf-8>"),null!==this.title&&n("<title>"+this.title+"</title>"),n(e,this.cachedHeadLines,"</head>","<body>",this.cachedBodyLines,t,"</body>","</html>"),n.e()},e.prototype.getBodyHtmlSectionLines=function(e,t){return s.bae(e,this.cachedHeadLines,this.cachedBodyLines,t)},e.prototype.getSectionPasteComment=function(e){return e+" goes here"},babelHelpers.createClass(e,[{key:"filename",get:function(){return this.basename+".html"}},{key:"mimeType",get:function(){return"text/html"}},{key:"cachedStyleLines",get:function(){return this._styleLines||(this._styleLines=this.styleLines),this._styleLines}},{key:"cachedHeadLines",get:function(){return this._headLines||(this._headLines=this.headLines),this._headLines}},{key:"cachedBodyLines",get:function(){return this._bodyLines||(this._bodyLines=this.bodyLines),this._bodyLines}},{key:"cachedScriptLines",get:function(){return this._scriptLines||(this._scriptLines=this.scriptLines),this._scriptLines}},{key:"basename",get:function(){return"source"}},{key:"lang",get:function(){return null;
}},{key:"title",get:function(){return null}},{key:"styleLines",get:function(){return s.be()}},{key:"headLines",get:function(){return s.be()}},{key:"bodyLines",get:function(){return s.be()}},{key:"scriptLines",get:function(){return s.be()}}]),e}();t.exports=u},{17:17,18:18,3:3}],24:[function(e,t,n){"use strict";var r=e(7),i=e(17),a=function(e){function t(n){babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,e.call(this,n));r.wrappers=[];for(var i=1;i<arguments.length;i++)r.wrappers.push(arguments[i]);return r}return babelHelpers.inherits(t,e),t.prototype.isEmpty=function(){return!1},t.prototype.doGet=function(e,t){var n=this,a="	";void 0!==e.indent&&(a=e.indent);var s=[],o=0,l=function(){var a=n.wrappers[o];if(a instanceof i){var l=a.doGet(e,t);s.push.apply(s,l)}else if("string"==typeof a){var u=t?r(a):a;s.push(u)}o++};return l(),this.data.forEach(function(o){if(o instanceof i){var u=o.doGet(e,t);s.push.apply(s,u.map(function(e){return a+e})),2!=n.wrappers.length&&l()}else if("string"==typeof o){var p=t?r(o):o;s.push(a+p),2!=n.wrappers.length&&l()}}),2==this.wrappers.length&&l(),s},t}(i);t.exports=a},{17:17,7:7}],25:[function(e,t,n){"use strict";var r=e(16),i=e(31),a=e(26),s=function(e){function t(n){babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,e.call(this));return r.isSolid="solid"==n.type,r.isSolid&&r.features.push(new a("background.color",n.color.entries,"gl.clearColor",[0,0,0,0])),r}return babelHelpers.inherits(t,e),t.prototype.getJsLoopLines=function(t){var n=r.ba(e.prototype.getJsLoopLines.call(this,t));return this.isSolid&&n("gl.clear(gl.COLOR_BUFFER_BIT);"),n.e()},t}(i);t.exports=s},{16:16,26:26,31:31}],26:[function(e,t,n){"use strict";var r=e(16),i=e(55),a=function(e){function t(n,r,i,a){babelHelpers.classCallCheck(this,t);var s=babelHelpers.possibleConstructorReturn(this,e.call(this,n,r));return s.calledFn=i,s.calledFnDefaultArgs=a,s}return babelHelpers.inherits(t,e),t.prototype.getJsUpdateLines=function(e){var t=this,n=r.b(),i=0;if(this.components.forEach(function(e){i+="slider"==e.value.input}),this.modeConstant&&this.components.every(function(e,n){return e.value==t.calledFnDefaultArgs[n]}));else if(1>=i)n(this.calledFn+"("+this.components.map(e).join(",")+");");else if(this.components.every(function(e){return"slider"==e.value.input})){var a=this.calledFn,s=a.lastIndexOf(".");s>=0&&(a=a.slice(0,s));var o="["+this.components.map(function(e){return"'"+e.suffix+"'"}).join(",")+"]";n(this.calledFn+".apply("+a+","+o+".map(function(c){","	return parseFloat(document.getElementById('"+this.name+".'+c).value);","}));")}else n(this.calledFn+"("),this.components.forEach(function(t,r){r>0&&n.t(","),n("	"+e(t))}),n(");");return n.e()},t.prototype.addPostToListenerEntryAfterComponents=function(e,t){e.post(this.calledFn+"("+this.components.map(t).join(",")+");")},t}(i);t.exports=a},{16:16,55:55}],27:[function(e,t,n){"use strict";var r=babelHelpers.taggedTemplateLiteralLoose(["	<canvas id=myCanvas width="," height=","></canvas>"],["	<canvas id=myCanvas width="," height=","></canvas>"]),i=e(17),a=e(16),s=e(37),o=e(31),l=e(36),u=function(e){function t(n){babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,e.call(this));return r.width=n.width,r.height=n.height,r.features.push(new l("canvas.width",n.width),new l("canvas.height",n.height)),r}return babelHelpers.inherits(t,e),t.prototype.getHtmlCanvasLines=function(){return i.bae("<div>",i.html(r,this.width,this.height),"</div>")},t.prototype.getGlslVertexDeclarationLines=function(){return this.hasInputs()?i.bae("uniform float aspect;"):i.be()},t.prototype.getGlslVertexOutputLines=function(){var e=!this.hasInputs()&&Number(this.width)!=Number(this.height);return e?i.bae("float aspect="+this.width+".0/"+this.height+".0;"):i.be()},t.prototype.providesAspect=function(){return this.hasInputs()||Number(this.width)!=Number(this.height)},t.prototype.getJsInitLines=function(t){var n=this,r=a.ba(e.prototype.getJsInitLines.call(this,t)),i=function(){r("function updateAspect() {","	gl.viewport(0,0,canvas.width,canvas.height);","	gl.uniform1f(aspectLoc,canvas.width/canvas.height);","}","updateAspect();")},o=function(e){if("slider"==n[e].input){var i=new s.Slider("canvas."+e);i.enter().log("console.log(this.id,'input value:',parseInt(this.value));").post("canvas."+e+"=parseInt(this.value);").post("updateAspect();"),r(t.getListenerLines(i))}};return this.hasInputs()&&(r("var aspectLoc=gl.getUniformLocation(program,'aspect');"),i(),o("width"),o("height")),r.e()},t}(o);t.exports=u},{16:16,17:17,31:31,36:36,37:37}],28:[function(e,t,n){"use strict";var r=e(43),i=e(30),a=e(27),s=e(25),o=e(53),l=e(34),u=e(17),p=e(16),c=e(24),h=e(18),f=e(15),d=e(14),m=e(23),v=function(e){function t(n,u){babelHelpers.classCallCheck(this,t);var p=babelHelpers.possibleConstructorReturn(this,e.call(this));p.options=n,p.i18n=u,p.featureContext=new i(n.debug),p.canvas=new a(n.canvas),p.background=new s(n.background),p.transforms=new o(n.transforms),p.illumination=new l(n.material,n.light);var c=function(){return new(r[String(n.shape.type)])(n.shape,"off"!=n.light.type,"vertex"==n.material.scope,"face"==n.material.scope,p.illumination.getColorAttrs())};return p.shape=c(),p.features=[p.canvas,p.background,p.transforms,p.illumination,p.shape],p.featureNames=["canvas","background","transforms","illumination","shape"],p.features.forEach(function(e){e.requestFeatureContext(p.featureContext)}),p}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"basename",get:function(){return"webgl"}},{key:"lang",get:function(){return"en"}},{key:"title",get:function(){return"WebGL example - Generated code"}},{key:"styleLines",get:function(){var e=u.b();return this.featureContext.hasSliders&&e("label {","	display: inline-block;","	width: 15em;","	text-align: right;","}",".min {","	display: inline-block;","	width: 5em;","	text-align: right;","}",".max {","	display: inline-block;","	width: 5em;","	text-align: left;","}"),e.e()}},{key:"headLines",get:function(){var e=this,t=function(){var t=e.illumination.wantsTransformedPosition(e.transforms.eyeAtInfinity);return u.bae(e.canvas.getGlslVertexDeclarationLines(),e.transforms.getGlslVertexDeclarationLines(2==e.shape.dim),e.illumination.getGlslVertexDeclarationLines(e.transforms.eyeAtInfinity,e.shape.dim>2),c.b("void main() {","}").ae(e.canvas.getGlslVertexOutputLines(),e.transforms.getGlslVertexOutputLines(2==e.shape.dim,e.canvas.providesAspect(),t),e.illumination.getGlslVertexOutputLines(e.transforms.eyeAtInfinity,e.shape.hasNormals,e.transforms.getGlslVertexNormalTransformLines())))},n=function(){return u.bae("precision mediump float;",e.illumination.getGlslFragmentDeclarationLines(e.transforms.eyeAtInfinity),c.b("void main() {","}").ae(e.illumination.getGlslFragmentOutputLines(e.transforms.eyeAtInfinity,e.shape.twoSided)))};return u.bae(c.b("<script id=myVertexShader type=x-shader/x-vertex>","</script>").ae(t()),c.b("<script id=myFragmentShader type=x-shader/x-fragment>","</script>").ae(n()))}},{key:"bodyLines",get:function(){var e,t=this;return u.bae.apply(u,[this.canvas.getHtmlCanvasLines(),(e=h.b("<ul>","</ul>")).ae.apply(e,this.features.map(function(e){return e.getHtmlControlMessageLines(t.i18n)}))].concat(this.features.map(function(e){return e.getHtmlInputLines(t.i18n)})))}},{key:"scriptLines",get:function(){var e=this,t=function(){var t=p.b();return t("var vertexShader=gl.createShader(gl.VERTEX_SHADER);","gl.shaderSource(vertexShader,vertexShaderSrc);","gl.compileShader(vertexShader);"),e.options.debugShaders&&t("if (!gl.getShaderParameter(vertexShader,gl.COMPILE_STATUS)) console.log(gl.getShaderInfoLog(vertexShader));"),t("var fragmentShader=gl.createShader(gl.FRAGMENT_SHADER);","gl.shaderSource(fragmentShader,fragmentShaderSrc);","gl.compileShader(fragmentShader);"),e.options.debugShaders&&t("if (!gl.getShaderParameter(fragmentShader,gl.COMPILE_STATUS)) console.log(gl.getShaderInfoLog(fragmentShader));"),t("var program=gl.createProgram();","gl.attachShader(program,vertexShader);","gl.attachShader(program,fragmentShader);","gl.linkProgram(program);","return program;"),t.e()},n=function(){var n=p.b();n(c.b(p.bae("function makeProgram(vertexShaderSrc,fragmentShaderSrc) {"),p.bae("}")).ae(t()),"var canvas=document.getElementById('myCanvas');","var gl=canvas.getContext('webgl')||canvas.getContext('experimental-webgl');","var program=makeProgram(","	document.getElementById('myVertexShader').text,","	document.getElementById('myFragmentShader').text",");","gl.useProgram(program);");var r=function(e,t){e.count()>0&&n("","// "+t,e)};return e.features.forEach(function(t,n){r(t.getJsInitLines(e.featureContext),"init "+e.featureNames[n])}),r(e.featureContext.getJsAfterInitLines(),"init mousemove listener"),n.e()},r=function(){var t=p.b();return e.featureContext.hasClampFn&&t("function clamp(v,min,max) {","	return Math.min(Math.max(v,min),max);","}"),e.featureContext.hasWrapFn&&t("function wrap(v,maxAbs) {","	v%=maxAbs*2;","	if (Math.abs(v)<=maxAbs) return v;","	return v-(v>0?1:-1)*maxAbs*2;","}"),e.featureContext.pollsGamepad&&t("var gamepad;","var gamepads=(navigator.getGamepads ? navigator.getGamepads() : []);","for (var i=0;i<gamepads.length;i++) {","	if (gamepads[i]) {","		gamepad=gamepads[i];","		break;","	}","}"),t.apply(void 0,e.features.map(function(t){return t.getJsLoopLines(e.featureContext)})),t.e()},i=function(){var t=p.b();return e.featureContext.hasStartTime&&e.featureContext.hasPrevTime?(t("var startTime=performance.now();"),t("var prevTime=startTime;")):e.featureContext.hasStartTime?t("var startTime=performance.now();"):e.featureContext.hasPrevTime&&t("var prevTime=performance.now();"),e.featureContext.isAnimated?(t(e.featureContext.hasTime?"function renderFrame(time) {":"function renderFrame() {"),t(d.bae(r())),e.featureContext.hasPrevTime&&t("	prevTime=time;"),t("	requestAnimationFrame(renderFrame);","}","requestAnimationFrame(renderFrame);")):e.featureContext.hasInputs?t("var frameId=null;","function renderFrame() {",d.bae(r()),"	frameId=null;","}","function scheduleFrame() {","	if (frameId===null) {","		frameId=requestAnimationFrame(renderFrame);","	}","}","scheduleFrame();"):t(r()),t.e()};return f.bae(n(),i())}}]),t}(m);t.exports=v},{14:14,15:15,16:16,17:17,18:18,23:23,24:24,25:25,27:27,30:30,34:34,43:43,53:53}],29:[function(e,t,n){var r=0,i=function(e,t,n){this.weight=e,this.noise=t,void 0===t&&(this.noise=.4),this.baseColors=n||this.defaultBaseColors,this.colorgenNumber=r++,this.nextIndex=0};i.prototype.defaultBaseColors=[[1,0,0],[0,1,0],[0,0,1],[1,1,0],[1,0,1],[0,1,1]],i.prototype.getNextColorString=function(){var e=this.baseColors[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.baseColors.length,e.map(function(e,t){var n=Math.sin(9e3*this.colorgenNumber+400*this.nextIndex+100*t),r=(e*(1-this.noise)+n*n*this.noise)*this.weight;return" "+r.toFixed(1)+","},this).join("")};var a=function(e,t,n){this.colorAttrs=e,this.singleColorgens=this.colorAttrs.map(function(e){return new i(e.weight,t,n)})};a.prototype.getHeaderString=function(){return this.colorAttrs.map(function(){return"    r    g    b"}).join("")},a.prototype.getNextColorString=function(){return this.singleColorgens.map(function(e){return e.getNextColorString()}).join("")},t.exports=a},{}],30:[function(e,t,n){"use strict";var r=e(37),i=function(){function e(t){babelHelpers.classCallCheck(this,e),this.debugOptions=t,this.canvasMousemoveListener=new r.CanvasMousemove,this.hasSliders=!1,this.hasInputs=!1,this.hasStartTime=!1,this.hasPrevTime=!1,this.pollsGamepad=!1,this.hasClampFn=!1,this.hasWrapFn=!1}return e.prototype.getJsAfterInitLines=function(){return this.canvasMousemoveListener.write(!this.isAnimated,this.debugOptions.inputs)},e.prototype.getListenerLines=function(e){return e.write(!this.isAnimated,this.debugOptions.inputs)},babelHelpers.createClass(e,[{key:"hasTime",get:function(){return this.hasStartTime||this.hasPrevTime}},{key:"isAnimated",get:function(){return this.hasStartTime||this.hasPrevTime||this.pollsGamepad}}]),e}();t.exports=i},{37:37}],31:[function(e,t,n){"use strict";var r=e(17),i=function(){function e(){babelHelpers.classCallCheck(this,e),this.features=[]}return e.prototype.getRecursiveLines=function(e,t){return r.bae.apply(r,this.features.map(function(n){return n[e].apply(n,t)}))},e.prototype.hasInputs=function(){return this.features.some(function(e){return e.hasInputs()})},e.prototype.requestFeatureContext=function(e){this.features.forEach(function(t){t.requestFeatureContext(e)})},e.prototype.getHtmlInputLines=function(e){return this.getRecursiveLines("getHtmlInputLines",arguments)},e.prototype.getHtmlControlMessageLines=function(e){return this.getRecursiveLines("getHtmlControlMessageLines",arguments)},e.prototype.getJsInitLines=function(e){return this.getRecursiveLines("getJsInitLines",arguments)},e.prototype.getJsLoopLines=function(e){return this.getRecursiveLines("getJsLoopLines",arguments)},e}();t.exports=i},{17:17}],32:[function(e,t,n){"use strict";var r=e(10),i=e(17),a=e(16),s=e(55),o=function(e){function t(n,r,i){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.call(this,n,r,i))}return babelHelpers.inherits(t,e),t.prototype.getGlslDeclarationLines=function(){var e=this;if(this.modeConstant)return i.be();if(!this.modeFloats)return i.bae("uniform vec"+this.nVars+" "+this.varName+";");var t=function(){var t=i.b();return e.components.forEach(function(e){e.variable&&t("uniform float "+e.varName+";")}),{v:t.e()}}();return"object"==typeof t?t.v:void 0},t.prototype.getGlslValue=function(){return this.getGlslComponentsValue(this.components.map(function(e){return e.suffix}).join(""))},t.prototype.getGlslComponentsValue=function(e){for(var t=this,n={},i=[],a=0;a<e.length;a++){var s=e.charAt(a);if(this.componentsBySuffix[s].variable)if(this.modeVector&&i.length>0){var o=i.pop();o[0]?i.push(o,[!1,s]):i.push([o[0],o[1]+s])}else i.push([!1,s]);else n[s]=this.componentsBySuffix[s].value,i.push([!0,s])}var l=r.glsl(n),u=this.components.map(function(e){return e.suffix}).slice(0,this.nVars).join(""),p=function(){if(!i[0][0])return!1;var e=l[i[0][1]];return i.every(function(t){return t[0]&&l[t[1]]==e})},c=function(e){return e[0]?l[e[1]]:t.modeVector?e[1]==u?t.varName:t.varName+"."+e[1]:t.componentsBySuffix[e[1]].varName};return 1==i.length?this.modeVector&&e==u?this.varName:c(i[0]):p()?"vec"+e.length+"("+c(i[0])+")":"vec"+e.length+"("+i.map(c).join(",")+")"},t.prototype.getGlslMapDeclarationLines=function(e,t){return this.components.length>1?i.bae("vec"+this.components.length+" "+e+"="+t(this.getGlslValue())+";"):i.bae("float "+e+this.components[0].suffix+"="+t(this.getGlslValue())+";")},t.prototype.getGlslMapComponentValue=function(e,t){return this.components.length>1?e+"."+t:e+t},t.prototype.getJsDeclarationLines=function(){var e=a.b();return this.modeConstant?e.e():(this.modeFloats?this.components.forEach(function(t){t.variable&&e("var "+t.varNameLoc+"=gl.getUniformLocation(program,'"+t.varName+"');")}):e("var "+this.varName+"Loc=gl.getUniformLocation(program,'"+this.varName+"');"),e.e())},t.prototype.getJsUpdateLines=function(e){var t=a.b();return this.modeVector?(t("gl.uniform"+this.nVars+"f("+this.varName+"Loc"),this.components.every(function(e){return"slider"!=e.value.input})?(this.components.forEach(function(n){n.variable&&t.t(","+e(n))}),t.t(");")):(this.components.forEach(function(n){n.variable&&t.t(",","	"+e(n))}),t(");"))):this.components.forEach(function(n){n.variable&&t("gl.uniform1f("+n.varNameLoc+","+e(n)+");")}),t.e()},t.prototype.addPostToListenerEntryForComponent=function(e,t){this.modeVector||e.post("gl.uniform1f("+t.varNameLoc+","+t.varName+");")},t.prototype.addPostToListenerEntryAfterComponents=function(e,t){var n=this;this.modeVector&&!function(){var t=[];n.components.forEach(function(e,r){r<n.nVars&&t.push(e.varName)}),e.post("gl.uniform"+n.nVars+"f("+n.varName+"Loc,"+t.join(",")+");")}()},t}(s);t.exports=o},{10:10,16:16,17:17,55:55}],33:[function(e,t,n){"use strict";var r={en:{"options.canvas":"Canvas","options.canvas.{width,height}":"Canvas {}","options.background":"Background","options.background.type":"Background type","options.background.type.none":"none (transparent)","options.background.type.solid":"solid color","options.background.color":"Background color","options.background.color.{r,g,b,a}":"Background color {red,green,blue,alpha} component","options.background.color.{r,g,b,a}.speed":"Background color {red,green,blue,alpha} speed","options.material":"Material","options.material.scope":"Set material color for objects","options.material.scope.global":"entire scene","options.material.scope.vertex":"shape vertices","options.material.scope.face":"shape faces","options.material.data":"For each object have","options.material.data.one":"one color","options.material.data.sda":"specular/diffuse/ambient colors","options.material.color":"Material color","options.material.color.{r,g,b,a}":"Material color {red,green,blue,alpha} component","options.material.color.{r,g,b,a}.speed":"Material color {red,green,blue,alpha} speed","options.material.{specular,diffuse,ambient}Color":"Material {} color","options.material.{specular,diffuse,ambient}Color.{r,g,b}":"{Specular,Diffuse,Ambient} color {red,green,blue} component","options.material.{specular,diffuse,ambient}Color.{r,g,b}.speed":"Material {} color {red,green,blue,alpha} speed","options-info.material.data.sda":"for use with Phong/Blinn–Phong shading models selected by <em>light type</em>","options.light":"Light","options.light.type":"Light type","options.light.type.off":"off","options.light.type.phong":"on with Phong reflections","options.light.type.blinn":"on with Blinn–Phong reflections","options.light.direction":"Light direction","options.light.direction.{x,y,z}":"Light direction {} component","options.light.direction.{x,y,z}.speed":"Light direction {} speed","options-info.light.type.phong":"[[Shading#Directional_lighting|directional light]] with [[Phong reflection model]]","options-info.light.type.blinn":"[[Shading#Directional_lighting|directional light]] with [[Blinn–Phong shading model|Blinn–Phong reflection model]]","options.shape":"Shape","options.shape.type":"Shape to draw","options.shape.type.square":"square","options.shape.type.triangle":"triangle","options.shape.type.gasket":"Sierpinski gasket","options.shape.type.cube":"cube","options.shape.type.hat":"Mexican hat function","options.shape.type.terrain":"diamond-square fractal terrain","options.shape.elements":"Element array","options.shape.elements.0":"not used","options.shape.elements.{8,16,32}":"with {}-bit index","options.shape.lod":"Shape detail level","options-info.shape.type.gasket":"[[Sierpinski triangle]]","options-info.shape.type.hat":"[[Mexican hat wavelet]]","options-info.shape.type.terrain":"generated with the [[Diamond-square algorithm|diamond-square algorithm]]","options-info.shape.elements.{8,16}":"choosing 8- or 16-bit index may limit available shape detail levels","options.transforms":"Transforms","options.transforms.projection":"Projection","options.transforms.projection.ortho":"orthogonal","options.transforms.projection.perspective":"perspective","options.transforms.model":"Model transform","options.transforms.model.rotate.{x,y,z}.add":"Add rotation around {} axis","options.transforms.model.rotate.{x,y,z}":"Angle of rotation around {} axis","options.transforms.model.rotate.{x,y,z}.speed":"Speed of rotation around {} axis","options-info.transforms.projection.ortho":"[[Orthographic projection|orthographic projection]]","options-info.transforms.projection.perspective":"[[Transformation_matrix#Perspective_projection|perspective projection]]","options.debug":"Debug options","options.debug.shaders":"Log shader compilation errors","options.debug.arrays":"Log allocated array sizes","options.debug.inputs":"Log input values","options.debug.animations":"Log animated values","options-output.inputs":"Input method","options-output.inputs.constant":"none","options-output.inputs.slider":"slider","options-output.inputs.mousemove{x,y}":"mouse {} axis","options-output.inputs.gamepad{0,1,2,3}":"gamepad {} axis","options-output.range":"with range","options-output.addSpeed":"Add speed","controls.type.mousemove{x,y}":"Move the mouse pointer {horizontally,vertically} over the canvas","controls.to":"to update","units.pixel.a":"px","units.pixel.{1,2}":"pixel{,s}","units.°/second.a":"°/s","units.°/second.{1,2}":"degree{,s} per second","units.second.a":"s","units.1/second.{1,2}":"unit{,s} per second"},ru:{"options.canvas":"Элемент <code>canvas</code>","options.canvas.{width,height}":"{Ширина,Высота} элемента <code>canvas</code>","options.background":"Фон","options.background.type":"Тип фона","options.background.type.none":"прозрачный","options.background.type.solid":"закрашенный","options.background.color":"Цвет фона","options.background.color.{r,g,b,a}":"{Красный ,Зелёный ,Синий ,Альфа-}канал фона","options.background.color.{r,g,b,a}.speed":"Скорость {красного ,зелёного ,синего ,альфа-}канала фона","options.material":"Материал","options.material.scope":"Задавать цвета данных объектов","options.material.scope.global":"всей сцены","options.material.scope.vertex":"вершин фигур","options.material.scope.face":"граней фигур","options.material.data":"Задавать для каждого объекта","options.material.data.one":"один цвет","options.material.data.sda":"бликовую/рассеянную/фоновую составляющие","options.material.color":"Цвет материала","options.material.color.{r,g,b,a}":"{Красный ,Зелёный ,Синий ,Альфа-}канал материала","options.material.color.{r,g,b,a}.speed":"Скорость {красного ,зелёного ,синего ,альфа-}канала материала","options.material.{specular,diffuse,ambient}Color":"{Бликовая,Рассеянная,Фоновая} составляющая цвета материала","options.material.specularColor.{r,g,b}":"{Красный,Зелёный,Синий} канал бликовой составляющей","options.material.diffuseColor.{r,g,b}":"{Красный,Зелёный,Синий} канал рассеянной составляющей","options.material.ambientColor.{r,g,b}":"{Красный,Зелёный,Синий} канал фоновой составляющей","options.material.specularColor.{r,g,b}.speed":"Скорость {красного,зелёного,синего} канала бликовой составляющей","options.material.diffuseColor.{r,g,b}.speed":"Скорость {красного,зелёного,синего} канала рассеянной составляющей","options.material.ambientColor.{r,g,b}.speed":"Скорость {красного,зелёного,синего} канала фоновой составляющей","options-info.material.data.sda":"для использования с моделями освещения Фонга/Блинна-Фонга, задаваемыми <em>типом света</em>","options.light":"Свет","options.light.type":"Тип света","options.light.type.off":"отключен","options.light.type.phong":"включен с отражениями по Фонгу","options.light.type.blinn":"включен с отражениями по Блинну-Фонгу","options.light.direction":"Направление света","options.light.direction.{x,y,z}":"{}-компонент направления света","options.light.direction.{x,y,z}.speed":"скорость {}-компонента направления света","options-info.light.type.phong":"направленный свет с [[Затенение_по_Фонгу#.D0.9C.D0.BE.D0.B4.D0.B5.D0.BB.D1.8C_.D0.BE.D1.81.D0.B2.D0.B5.D1.89.D0.B5.D0.BD.D0.B8.D1.8F|моделью освещения Фонга]]","options-info.light.type.blinn":"направленный свет с моделью освещения Блинна-Фонга","options.shape":"Фигура","options.shape.type":"Рисовать фигуру","options.shape.type.square":"квадрат","options.shape.type.triangle":"треугольник","options.shape.type.gasket":"салфетка Серпинского","options.shape.type.cube":"куб","options.shape.type.hat":"Mexican hat function","options.shape.type.terrain":"фрактальный ландшафт","options.shape.elements":"Element array","options.shape.elements.0":"не используется","options.shape.elements.{8,16,32}":"с {}-битным индексом","options.shape.lod":"Уровень детализации","options-info.shape.type.gasket":"[[Треугольник Серпинского|треугольник Серпинского]]","options-info.shape.type.terrain":"сгенерирован [[Алгоритм Diamond-Square|алгоритмом diamond-square]]","options-info.shape.elements.{8,16}":"выбор 8- или 16-битного индекса может ограничить доступные уровни детализации","options.transforms":"Преобразования","options.transforms.projection":"Проекция","options.transforms.projection.ortho":"ортогональная","options.transforms.projection.perspective":"перспективная","options.transforms.model":"Преобразование модели","options.transforms.model.rotate.{x,y,z}.add":"Добавить вращение вокруг оси {}","options.transforms.model.rotate.{x,y,z}":"Угол поворота вокруг оси {}","options.transforms.model.rotate.{x,y,z}.speed":"Скорость поворота вокруг оси {}","options.debug":"Отладка","options.debug.shaders":"Выводить ошибки компиляции шейдеров","options.debug.arrays":"Выводить размеры выделенных массивов","options.debug.inputs":"Выводить значения вводов","options.debug.animations":"Выводить анимированные значения","options-output.inputs":"Способ ввода","options-output.inputs.constant":"нет","options-output.inputs.slider":"ползунок","options-output.inputs.mousemove{x,y}":"ось {} мыши","options-output.inputs.gamepad{0,1,2,3}":"ось {} геймпада","options-output.range":"с диапазоном","options-output.addSpeed":"Добавить скорость","controls.type.mousemove{x,y}":"Перемещайте указатель мыши над элементом <code>canvas</code> в {горизонтальном,вертикальном} направлении,","controls.to":"чтобы изменить","units.pixel.a":"px","units.pixel.{1,2,5}":"пиксел{ь,я,ей}","units.°/second.a":"°/с","units.°/second.{1,2,5}":"градус{,а,ов} в секунду","units.second.a":"с","units.1/second.{1,2,5}":"единиц{а,ы,} в секунду"}};for(var i in r){var a=r[i];a=e(11)(a),a=e(12)(i)(a),a=e(20)(i)(a),a=e(1)(i)(a),r[i]=a}t.exports=e(13)(r)},{1:1,11:11,12:12,13:13,20:20}],34:[function(e,t,n){"use strict";var r=e(40),i=e(17),a=e(24),s=e(31),o=e(32),l=function(e){function t(n,i){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,e.call(this));return a.material=n,a.light=i,"global"==n.scope&&("one"==n.data?a.features.push(a.colorVector=new o("material.color",n.color.entries)):"off"!=i.type?a.features.push(a.specularColorVector=new o("material.specularColor",n.specularColor.entries),a.diffuseColorVector=new o("material.diffuseColor",n.diffuseColor.entries),a.ambientColorVector=new o("material.ambientColor",n.ambientColor.entries)):a.features.push(a.ambientColorVector=new o("material.ambientColor",[].concat(n.ambientColor.entries,[r.LiveFloat.make("a",[0,1,-1,1],1)().fix()])))),"off"!=i.type&&a.features.push(a.lightDirectionVector=new o("light.direction",i.direction.entries)),a}return babelHelpers.inherits(t,e),t.prototype.getColorAttrs=function(){return"global"==this.material.scope?[]:"one"==this.material.data?[{name:"color",enabled:!0,weight:1}]:[{name:"specularColor",enabled:"off"!=this.light.type,weight:.4},{name:"diffuseColor",enabled:"off"!=this.light.type,weight:.4},{name:"ambientColor",enabled:!0,weight:.2}]},t.prototype.wantsTransformedPosition=function(e){return!e&&"off"!=this.light.type&&"one"!=this.material.data},t.prototype.getGlslVertexDeclarationLines=function(e,t){var n=i.b();return this.wantsTransformedPosition(e)&&n("varying vec3 interpolatedView;"),"off"!=this.light.type&&(t&&n("attribute vec3 normal;"),n("varying vec3 interpolatedNormal;")),"global"!=this.material.scope&&("one"==this.material.data?(n("attribute vec4 color;"),n("varying vec4 interpolatedColor;")):"off"==this.light.type?(n("attribute vec4 ambientColor;"),n("varying vec4 interpolatedColor;")):n("attribute vec3 specularColor;","attribute vec3 diffuseColor;","attribute vec3 ambientColor;","varying vec3 interpolatedSpecularColor;","varying vec3 interpolatedDiffuseColor;","varying vec3 interpolatedAmbientColor;")),n.e()},t.prototype.getGlslVertexOutputLines=function(e,t,n){var r=i.b();return this.wantsTransformedPosition(e)&&r("interpolatedView=-transformedPosition.xyz;"),"off"!=this.light.type&&(r("interpolatedNormal="),t?r.t("normal"):r.t("vec3(0.0,0.0,1.0)"),r.t(n),r.t(";")),"global"!=this.material.scope&&("one"==this.material.data?r("interpolatedColor=color;"):"off"==this.light.type?r("interpolatedColor=ambientColor;"):r("interpolatedSpecularColor=specularColor;","interpolatedDiffuseColor=diffuseColor;","interpolatedAmbientColor=ambientColor;")),r.e()},t.prototype.getGlslFragmentDeclarationLines=function(e){var t=i.b();return this.wantsTransformedPosition(e)&&t("varying vec3 interpolatedView;"),"off"!=this.light.type&&t(this.lightDirectionVector.getGlslDeclarationLines(),"varying vec3 interpolatedNormal;"),"global"==this.material.scope?"one"==this.material.data?t(this.colorVector.getGlslDeclarationLines()):("off"!=this.light.type&&(t(this.specularColorVector.getGlslDeclarationLines()),t(this.diffuseColorVector.getGlslDeclarationLines())),t(this.ambientColorVector.getGlslDeclarationLines())):"one"==this.material.data||"off"==this.light.type?t("varying vec4 interpolatedColor;"):t("varying vec3 interpolatedSpecularColor;","varying vec3 interpolatedDiffuseColor;","varying vec3 interpolatedAmbientColor;"),t.e()},t.prototype.getGlslFragmentOutputLines=function(e,t){var n=this,r=i.b(),s=void 0,o=void 0,l=void 0;if("global"==this.material.scope?!function(){var e="one"==n.material.data?n.colorVector:n.ambientColorVector;s=function(){return e.getGlslComponentsValue("rgb")},o=function(){return e.getGlslComponentsValue("a")},l=function(){return e.getGlslValue()}}():(s=function(){return"interpolatedColor.rgb"},o=function(){return"interpolatedColor.a"},l=function(){return"interpolatedColor"}),"off"==this.light.type)r("gl_FragColor="+l()+";");else if(r("vec3 N=normalize(interpolatedNormal);"),t&&r("if (!gl_FrontFacing) N=-N;"),r("vec3 L=normalize("+this.lightDirectionVector.getGlslValue()+");"),"one"==this.material.data)r("gl_FragColor=vec4("+s()+"*max(0.0,dot(L,N)),"+o()+");");else{r(this.wantsTransformedPosition(e)?"vec3 V=normalize(interpolatedView);":"vec3 V=vec3(0.0,0.0,1.0);");var u="H,N",p="";"blinn"==this.light.type?r("vec3 H=normalize(L+V);"):(r("vec3 R=reflect(-L,N);"),u="R,V",p="/4.0"),r("float shininess=100.0;"),r(a.b("gl_FragColor=vec4(",",1.0);").ae("global"==this.material.scope?i.bae("+"+this.specularColorVector.getGlslValue()+"*pow(max(0.0,dot("+u+")),shininess"+p+")","+"+this.diffuseColorVector.getGlslValue()+"*max(0.0,dot(L,N))","+"+this.ambientColorVector.getGlslValue()):i.bae("+interpolatedSpecularColor*pow(max(0.0,dot("+u+")),shininess"+p+")","+interpolatedDiffuseColor*max(0.0,dot(L,N))","+interpolatedAmbientColor")))}return r.e()},t}(s);t.exports=l},{17:17,24:24,31:31,32:32,40:40}],35:[function(e,t,n){"use strict";function r(e){return new{constant:a,slider:o,mousemovex:l,mousemovey:l,gamepad0:u,gamepad1:u,gamepad2:u,gamepad3:u}[e](e)}var i=function(){function e(t){babelHelpers.classCallCheck(this,e),this._str=t}return e.prototype.toString=function(){return this._str},e.prototype.valueOf=function(){return this._str},e}(),a=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t}(i),s=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t}(i),o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t}(s),l=function(e){function t(n){babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,e.call(this,n));return r.axis=n.slice(-1),r}return babelHelpers.inherits(t,e),t}(s),u=function(e){function t(n){babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,e.call(this,n));return r.axis=Number(n.slice(-1)),r}return babelHelpers.inherits(t,e),t}(s);n.Base=i,n.Constant=a,n.Variable=s,n.Slider=o,n.MouseMove=l,n.Gamepad=u,n.createFromString=r},{}],36:[function(e,t,n){"use strict";var r=(e(10),e(17)),i=e(39),a=function(e){function t(n,r){babelHelpers.classCallCheck(this,t);
var i=babelHelpers.possibleConstructorReturn(this,e.call(this));return i.name=n,i.value=r,i}return babelHelpers.inherits(t,e),t.prototype.hasInputs=function(){return e.prototype.hasInputs.call(this)||"constant"!=this.value.input},t.prototype.requestFeatureContext=function(t){e.prototype.requestFeatureContext.call(this,t),"constant"!=this.value.input&&(t.hasInputs=!0),"slider"==this.value.input&&(t.hasSliders=!0)},t.prototype.getHtmlControlMessageLines=function(t){var n=r.ba(e.prototype.getHtmlControlMessageLines.call(this,t));return n(this.getHtmlControlMessageForValue(t,this.value,this.name)),n.e()},t.prototype.getHtmlInputLines=function(t){var n=r.ba(e.prototype.getHtmlInputLines.call(this,t));return n(this.getHtmlSliderLines(t,this.value,"options."+this.name,this.name,!1)),n.e()},t}(i);t.exports=a},{10:10,17:17,39:39}],37:[function(e,t,n){"use strict";var r=e(5),i=e(16),a=e(24),s=function(){function e(){babelHelpers.classCallCheck(this,e),this.entries=[]}return e.prototype.enter=function(){function e(e){return function(){return e.push.apply(e,arguments),n}}var t={pre:[],cond:null,log:[],post:[]};this.entries.push(t);var n={pre:e(t.pre),cond:function(e){return t.cond=e,n},log:e(t.log),post:e(t.post)};return n},e.prototype.prependedStatements=function(){return[]},e.prototype.bracketFnArg=function(){return""},e.prototype.wrapCall=function(e){return e},e.prototype.write=function(e,t){var n={},r=[],s=null,o=0,l=1,u=2,p=function(e,t){var r=void 0;r=e in n?n[e]:n[e]={prevs:[],conds:[],mark:o},null!==r.conds&&(null===t?r.conds=null:r.conds.push(t)),null!==s&&r.prevs.push(s),s=e},c=function(){null!==s&&r.push(s),s=null},h=function(){var e=[],t=null,i=function(n,r){var i=null;null!==r.conds&&(i=r.conds.join(" || ")),i!=t&&(null!==t&&e.push("}"),t=i,null!==t&&e.push("if ("+t+") {")),null!==t?e.push("	"+n):e.push(n)},a=function(e,t){t.mark=l,s(t.prevs),t.mark=u,i(e,t)},s=function(e){e.forEach(function(e){n[e].mark==o&&a(e,n[e])})};return s(r),null!==t&&e.push("}"),e};this.entries.forEach(function(n){n.pre.forEach(function(e){p(e,null)}),t&&n.log.forEach(function(e){p(e,n.cond)}),n.post.forEach(function(e){p(e,n.cond)}),e&&p("scheduleFrame();",n.cond),c()});var f=this.bracketListener(),d=h();if(d.length>0&&(d=[].concat(this.prependedStatements(),d)),1==d.length){var m=/^(\w+)\(\);$/.exec(d[0]);if(m)return this.wrapCall(i.bae(f[0]+m[1]+f[1]))}return d.length>0?this.wrapCall(a.b(i.bae(f[0]+"function("+this.bracketFnArg()+"){"),i.bae("}"+f[1])).ae(i.bae.apply(i,d))):i.be()},e}(),o=function(e){function t(n){babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,e.call(this));return r.id=n,r}return babelHelpers.inherits(t,e),t.prototype.bracketListener=function(){return["document.getElementById('"+this.id+"').addEventListener('change',",");"]},t}(s),l=function(e){function t(n){babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,e.call(this));return r.query=n,r}return babelHelpers.inherits(t,e),t.prototype.bracketListener=function(){return["el.addEventListener('change',",");"]},t.prototype.wrapCall=function(e){return a.b(i.bae(";[].forEach.call(document.querySelectorAll('"+this.query+"'),function(el){"),i.bae("});")).ae(e)},t}(s),u=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.enter=function(){var t=e.prototype.enter.call(this),n=function(e,n,i,a,s,o){var l=r(a),u=void 0;return 0==s&&1==o?u=(n?"var ":"")+a+"=":(t.pre("var min"+l+"="+s+";"),t.pre("var max"+l+"="+o+";"),u=(n?"var ":"")+a+"=min"+l+"+(max"+l+"-min"+l+")*"),t.prexy(i,u+"(ev.clientX-rect.left)/(rect.width-1);",u+"(rect.bottom-1-ev.clientY)/(rect.height-1);")};return t.prexy=function(e,n,r){return"x"==e.axis?t.pre(n):"y"==e.axis?t.pre(r):t},t.minMaxFloat=function(e,t,r,i){return n(!0,!1,e,t,r,i)},t.minMaxVarFloat=function(e,t,r,i){return n(!0,!0,e,t,r,i)},t.newVarInt=function(e,n){var i=r(n);return t.prexy(e,"var new"+i+"=Math.floor(min"+i+"+(max"+i+"-min"+i+"+1)*(ev.clientX-rect.left)/rect.width);","var new"+i+"=Math.floor(min"+i+"+(max"+i+"-min"+i+"+1)*(rect.bottom-1-ev.clientY)/rect.height);")},t},t.prototype.bracketListener=function(){return["canvas.addEventListener('mousemove',",");"]},t.prototype.bracketFnArg=function(){return"ev"},t.prototype.prependedStatements=function(){return["var rect=this.getBoundingClientRect();"]},t}(s);n.Slider=o,n.MultipleSlider=l,n.CanvasMousemove=u},{16:16,24:24,5:5}],38:[function(e,t,n){"use strict";function r(){return"webgl-starter-id-"+i++}var i=0,a=e(33),s=e(42),o=e(28),l=e(41),u=e(2);$(function(){$(".webgl-starter").each(function(){var e=$(this),t=e.closest("[lang]").attr("lang"),n=a(t),i=new s,p=new u(function(){return new o(i.fix(),n)},n);i.updateCallback=p.update;var c=new l(i,r,n);e.empty().append(c.$output,p.$output)})})},{2:2,28:28,33:33,41:41,42:42}],39:[function(e,t,n){"use strict";var r=babelHelpers.taggedTemplateLiteralLoose(["<abbr title=",">"],["<abbr title=",">"]),i=babelHelpers.taggedTemplateLiteralLoose(["	<label for=",">"],["	<label for=",">"]),a=babelHelpers.taggedTemplateLiteralLoose(["	<input type=range id="," min="," max="," value="," step=",">"],["	<input type=range id="," min="," max="," value="," step=",">"]),s=e(10),o=e(35),l=e(17),u=e(31),p=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.getHtmlControlMessageForValue=function(e,t,n){return t.input instanceof o.MouseMove?l.bae("<li>"+e("controls.type."+t.input)+" "+e("controls.to")+" <strong>"+e("options."+n)+"</strong></li>"):l.be()},t.prototype.getHtmlSliderLines=function(e,t,n,o,u){var p=l.b();if("slider"==t.input){var c=s.html({min:t.min,max:t.max,value:t.value},t.precision),h=s({min:t.min,max:t.max},t.precision),f=function(n){return e.numberWithUnits(n,t.unit,function(e,t){return l.html(r,t)+e+"</abbr>"})};p("<div>",l.html(i,o)+e(n)+"</label>","	<span class=min>"+f(h.min)+"</span>",l.html(a,o,c.min,c.max,c.value,u),"	<span class=max>"+f(h.max)+"</span>","</div>")}return p.e()},t}(u);t.exports=p},{10:10,17:17,31:31,35:35}],40:[function(e,t,n){"use strict";var r=e(35),i=Object.create(e(19)),a=function(){function e(t,n){babelHelpers.classCallCheck(this,e),n?(this.value=t.defaultValue,this.min=t.availableMin,this.max=t.availableMax,this.input=r.createFromString("constant")):(this.value=t.value,this.min=t.min,this.max=t.max,this.input=r.createFromString(t.input)),this.precision=t.precision,this.unit=t.unit}return e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(){return String(this.value)},e}();i.LiveNumber=function(e){function t(n,r,i,a,s,o,l,u){babelHelpers.classCallCheck(this,t);var p=void 0,c=void 0,h=void 0,f=void 0;"object"==typeof i?(p=i.value,c=i.min,h=i.max,f=i.input):p=i;var d=babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments));return d._min=void 0!==c?c:d.availableMin,d._max=void 0!==h?h:d.availableMax,d._input=void 0!==f?f:"constant",d._$range=null,d}return babelHelpers.inherits(t,e),t.prototype.updateInternalVisibility=function(){this._$range&&this._$range.toggle("constant"!=this._input)},t.prototype.exportHelper=function(e){var t={};return e.value!=e.defaultValue&&(t.value=e.value),e.min!=e.availableMin&&(t.min=e.min),e.max!=e.availableMax&&(t.max=e.max),"constant"!=e.input&&(t.input=e.input),t},t.prototype["export"]=function(){return this.exportHelper(this)},t.prototype.fix=function(){var e=new a(this);return e.name=this.name,e},babelHelpers.createClass(t,[{key:"input",get:function(){return this._input},set:function(e){this._input=e,this.updateInternalVisibility(),this.updateCallback()}},{key:"min",get:function(){return this._min},set:function(e){this._min=e,this.updateCallback()}},{key:"max",get:function(){return this._max},set:function(e){this._max=e,this.updateCallback()}},{key:"$range",get:function(){return this._$range},set:function(e){this._$range=e,this.updateInternalVisibility()}}]),t}(i.Number),i.LiveInt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"precision",get:function(){return 0}},{key:"availableInputTypes",get:function(){return["constant","slider","mousemovex","mousemovey"]}}]),t}(i.LiveNumber),i.CanvasLiveInt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"availableInputTypes",get:function(){return["constant","slider"]}}]),t}(i.LiveInt),i.LiveFloat=function(e){function t(n,r,i,a,s,o,l,u){babelHelpers.classCallCheck(this,t);var p=void 0,c=void 0,h=void 0,f=void 0;"object"==typeof i&&("object"==typeof i.speed?(p=i.speed.value,c=i.speed.min,h=i.speed.max,f=i.speed.input):p=i.speed);var d=babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments));return d._speedAvailableMin=r.speed.availableMin,d._speedAvailableMax=r.speed.availableMax,void 0!==r.precision?d.precision=r.precision:d.availableMax>=100?d.precision=1:d.availableMax>=10?d.precision=2:d.precision=3,d._speedValue=void 0!==p?p:0,d._speedMin=void 0!==c?c:d._speedAvailableMin,d._speedMax=void 0!==h?h:d._speedAvailableMax,d._speedInput=void 0!==f?f:"constant",d._addSpeed=!(0==d._speedValue&&d._speedMin==d._speedAvailableMin&&d._speedMax==d._speedAvailableMax&&"constant"==d._speedInput),d._speed$=null,d._speed$range=null,d._$addSpeed=null,d}return babelHelpers.inherits(t,e),t.collectArgs=function(t,n,r){return r=Object.create(r),void 0===r.speed&&(r.speed={}),void 0===r.speed.availableMin&&(r.speed.availableMin=n[2]),void 0===r.speed.availableMax&&(r.speed.availableMax=n[3]),e.collectArgs.call(this,t,n,r)},t.prototype.updateInternalVisibility=function(){e.prototype.updateInternalVisibility.call(this),this._speed$range&&this._speed$range.toggle("constant"!=this._speedInput);var t=["gamepad0","gamepad1","gamepad2","gamepad3"].indexOf(this._input)<0;this._speed$&&this._speed$.toggle(this._addSpeed&&t),this._$addSpeed&&this._$addSpeed.toggle(t)},t.prototype["export"]=function(){var e=["gamepad0","gamepad1","gamepad2","gamepad3"].indexOf(this.input)<0,t=this.exportHelper(this);return e&&this.addSpeed&&this.shortenExportAssign(this.exportHelper(this.speed),t,"speed"),t},t.prototype.fix=function(){var t=e.prototype.fix.call(this),n=["gamepad0","gamepad1","gamepad2","gamepad3"].indexOf(this.input)<0;return n&&this.addSpeed?t.speed=new a(this.speed):t.speed=new a(this.speed,!0),t},babelHelpers.createClass(t,[{key:"addSpeed",get:function(){return this._addSpeed},set:function(e){this._addSpeed=e,this.updateInternalVisibility(),this.updateCallback()}},{key:"availableInputTypes",get:function(){return["constant","slider","mousemovex","mousemovey","gamepad0","gamepad1","gamepad2","gamepad3"]}},{key:"speed",get:function(){var e=this;return{get fullName(){return e.fullName+".speed"},get defaultValue(){return 0},get value(){return e._speedValue},set value(t){e._speedValue=t,e.updateCallback()},get input(){return e._speedInput},set input(t){e._speedInput=t,e.updateInternalVisibility(),e.updateCallback()},get availableMin(){return e._speedAvailableMin},get availableMax(){return e._speedAvailableMax},get min(){return e._speedMin},set min(t){e._speedMin=t,e.updateCallback()},get max(){return e._speedMax},set max(t){e._speedMax=t,e.updateCallback()},get precision(){return e.precision},get unit(){return void 0!==e.unit?e.unit+"/second":"1/second"},get availableInputTypes(){return e.availableInputTypes},get $(){return e._speed$},set $(t){e._speed$=t,e.updateInternalVisibility()},get $range(){return e._speed$range},set $range(t){e._speed$range=t,e.updateInternalVisibility()}}}},{key:"$addSpeed",get:function(){return this._$addSpeed},set:function(e){this._$addSpeed=e,this.updateInternalVisibility()}}]),t}(i.LiveNumber),i.LiveColor=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.collectArgs=function(t,n,r){r=Object.create(r),void 0===r.componentDefaultValues&&(r.componentDefaultValues=n);var i="rgba";return r.descriptions=r.componentDefaultValues.map(function(e,t){var n=i.charAt(t);return["LiveFloat",n,[0,1,-1,1],e]}),e.collectArgs.call(this,t,n,r)},t}(i.Group),t.exports=i},{19:19,35:35}],41:[function(e,t,n){"use strict";var r=e(40),i=e(21),a=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.setOptionClassWriters=function(t){e.prototype.setOptionClassWriters.call(this,t);t.get(r.Select);t.set(r.LiveNumber,function(e,n,i,a){var s=function(e){var s=e.precision,o=function(t){return t.attr("min",e.availableMin).attr("max",e.availableMax).attr("step",Math.pow(.1,s).toFixed(s))},l=function(t){return o($("<input type='number' required>")).val(e[t]).on("input change",function(){this.checkValidity()&&(e[t]=parseFloat(this.value))})},u=(a(),a()),p=void 0,c=void 0,h=void 0,f=t.get(r.Number)(e,n,i,a);return f.find("button").before(" <label for='"+u+"'>"+i("options-output.inputs")+":</label> ",p=$("<select id='"+u+"'>").append(e.availableInputTypes.map(function(e){return $("<option>").val(e).html(i("options-output.inputs."+e))})).val(e.input).change(function(){e.input=this.value})," ",e.$range=$("<span class='range'>").append(i("options-output.range")+" ").append(c=l("min")).append(" .. ").append(h=l("max"))," ").click(function(){p.val("constant").change(),c.val(e.availableMin).change(),h.val(e.availableMax).change()}),f};return e instanceof r.LiveFloat?e.$=$("<div>").append(s(e).append(" ",e.$addSpeed=$("<label> "+i("options-output.addSpeed")+"</label>").prepend($("<input type='checkbox'>").prop("checked",e.addSpeed).change(function(){e.addSpeed=this.checked}))),e.speed.$=s(e.speed)):e.$=s(e)})},t}(i);t.exports=a},{21:21,40:40}],42:[function(e,t,n){"use strict";var r=e(22),i=function(t){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,t.apply(this,arguments))}return babelHelpers.inherits(n,t),babelHelpers.createClass(n,[{key:"optionClasses",get:function(){return e(40)}},{key:"entriesDescription",get:function(){return[["Group","canvas",[["CanvasLiveInt","width",[1,1024],512,{unit:"pixel"}],["CanvasLiveInt","height",[1,1024],512,{unit:"pixel"}]]],["Group","background",[["Select","type",["none","solid"]],["LiveColor","color",[1,1,1,1],{visibilityData:{"background.type":"solid"}}]]],["Group","material",[["Select","scope",["global","vertex","face"]],["Select","data",["one","sda"]],["LiveColor","color",[1,0,0,1],{visibilityData:{"material.scope":"global","material.data":"one"}}],["LiveColor","specularColor",[.4,.4,.4],{visibilityData:{"material.scope":"global","material.data":"sda"}}],["LiveColor","diffuseColor",[.4,.4,.4],{visibilityData:{"material.scope":"global","material.data":"sda"}}],["LiveColor","ambientColor",[.2,.2,.2],{visibilityData:{"material.scope":"global","material.data":"sda"}}]]],["Group","light",[["Select","type",["off","phong","blinn"]],["Group","direction",[["LiveFloat","x",[-4,4,-4,4],-1],["LiveFloat","y",[-4,4,-4,4],1],["LiveFloat","z",[-4,4,-4,4],1]],{visibilityData:{"light.type":["phong","blinn"]}}]]],["Group","shape",[["Select","type",["square","triangle","gasket","cube","hat","terrain"]],["Select","elements",["0","8","16","32"]],["LiveInt","lod",[0,10],6,{visibilityData:{"shape.type":["gasket","hat","terrain"]}}]]],["Group","transforms",[["Select","projection",["ortho","perspective"]],["Array","model",[["LiveFloat","rotate.x",[-180,180,-360,360],0,{unit:"°"}],["LiveFloat","rotate.y",[-180,180,-360,360],0,{unit:"°"}],["LiveFloat","rotate.z",[-180,180,-360,360],0,{unit:"°"}]]]]],["Group","debug",[["Checkbox","shaders",!0],["Checkbox","arrays"],["Checkbox","inputs"],["Checkbox","animations"]]]]}}]),n}(r);t.exports=i},{22:22,40:40}],43:[function(e,t,n){"use strict";n.square=e(50),n.triangle=e(52),n.gasket=e(45),n.cube=e(44),n.hat=e(46),n.terrain=e(51)},{44:44,45:45,46:46,50:50,51:51,52:52}],44:[function(e,t,n){"use strict";var r=e(16),i=e(24),a=e(29),s=e(49),o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.writeArrays=function(){for(var e=this,t=new a(this.colorAttrs,0,this.hasColorsPerFace?void 0:[[0,0,0],[1,0,0],[0,1,0],[1,1,0],[0,0,1],[1,0,1],[0,1,1],[1,1,1]]),n=8,s=[],o=0;n>o;o++)s.push(t.getNextColorString());var l=["-0.5,-0.5,-0.5,","+0.5,-0.5,-0.5,","-0.5,+0.5,-0.5,","+0.5,+0.5,-0.5,","-0.5,-0.5,+0.5,","+0.5,-0.5,+0.5,","-0.5,+0.5,+0.5,","+0.5,+0.5,+0.5,"],u=6,p=["left","right","bottom","top","back","front"],c=["-1.0, 0.0, 0.0,","+1.0, 0.0, 0.0,"," 0.0,-1.0, 0.0,"," 0.0,+1.0, 0.0,"," 0.0, 0.0,-1.0,"," 0.0, 0.0,+1.0,"],h=[[4,6,0,2],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[5,7,4,6]],f=[0,1,2,2,1,3],d=r.b();d("// x    y    z"),this.hasNormals&&d.t("  n.x  n.y  n.z"),d.t(t.getHeaderString());var m=function(t,n,r){d(l[n]),e.hasNormals&&d.t(c[t]),e.hasColorsPerVertex?d.t(s[n]):e.hasColorsPerFace&&d.t(s[t]),r&&d.t(" // "+p[t]+" face")},v=function(){return i.b(r.bae("var vertices=new Float32Array(["),r.bae("]);")).ae(d.e())};if(!this.usesElements()){for(var b=function(e){f.forEach(function(t,n){m(e,h[e][t],0==n)})},o=0;u>o;o++)b(o);return r.bae("var nVertices=36;",v())}if(this.hasColorsPerFace||this.hasNormals){for(var g=function(e){h[e].forEach(function(t,n){m(e,t,0==n)})},o=0;u>o;o++)g(o);return r.bae(v(),"var nElements=36;","var elements=new "+this.getElementIndexJsArray()+"([","	 0,  1,  2,  2,  1,  3, // left face","	 4,  5,  6,  6,  5,  7, // right face","	 8,  9, 10, 10,  9, 11, // bottom face","	12, 13, 14, 14, 13, 15, // top face","	16, 17, 18, 18, 17, 19, // back face","	20, 21, 22, 22, 21, 23, // front face","]);")}var y=function(){for(var t=0;n>t;t++)d(l[t]),e.hasColorsPerVertex&&d.t(s[t]);for(var a=r.b(),o=function(e){a(""),f.forEach(function(t){a.t(h[e][t]+", ")}),a.t("// "+p[e]+" face")},t=0;u>t;t++)o(t);var c=function(){return i.b(r.bae("var elements=new "+e.getElementIndexJsArray()+"(["),r.bae("]);")).ae(a.e())};return{v:new Lines(v(),"var nElements=36;",c())}}();return"object"==typeof y?y.v:void 0},babelHelpers.createClass(t,[{key:"dim",get:function(){return 3}},{key:"twoSided",get:function(){return!1}}]),t}(s);t.exports=o},{16:16,24:24,29:29,49:49}],45:[function(e,t,n){"use strict";var r=e(16),i=e(24),a=e(47),s=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.getDistinctVertexCount=function(e){return"(Math.pow(3,"+e+"+1)+3)/2"},t.prototype.getFaceVertexCount=function(e){return"Math.pow(3,"+e+")*3"},t.prototype.getTotalVertexCount=function(e){return"Math.pow(3,"+e+")*3"},t.prototype.writeStoreShape=function(){var e=this,t=function(){var t=r.b();return t("vertices[nextIndexIntoVertices++]=p[0];","vertices[nextIndexIntoVertices++]=p[1];"),(e.hasColorsPerVertex||e.hasColorsPerFace)&&(t(!e.usesElements()||e.hasColorsPerFace?"colors[nextIndexIntoColors]":"colors[nextElement%colors.length]"),t.t(".forEach(function(cc){","	vertices[nextIndexIntoVertices++]=cc;","});")),e.usesElements()?t("return nextElement++;"):e.hasColorsPerVertex&&t("nextIndexIntoColors=(nextIndexIntoColors+1)%colors.length;"),t.e()},n=function(){var t=r.b();return t("if (depth<=0) {"),e.usesElements()?e.hasColorsPerFace?t("	pushElement(pushVertex(p0));","	pushElement(pushVertex(p1));","	pushElement(pushVertex(p2));","	nextIndexIntoColors=(nextIndexIntoColors+1)%colors.length;"):t("	if (es[0]===null) es[0]=pushVertex(p0);","	if (es[1]===null) es[1]=pushVertex(p1);","	if (es[2]===null) es[2]=pushVertex(p2);","	pushElement(es[0]);","	pushElement(es[1]);","	pushElement(es[2]);","	return es;"):e.hasColorsPerFace?t("	pushVertex(p0);","	pushVertex(p1);","	pushVertex(p2);","	nextIndexIntoColors=(nextIndexIntoColors+1)%colors.length;"):t("	pushVertex(p0);","	pushVertex(p1);","	pushVertex(p2);"),t("} else {","	var p01=mix(p0,p1);","	var p12=mix(p1,p2);","	var p20=mix(p2,p0);"),e.usesElements()?e.hasColorsPerFace?t("	var es0=triangle(depth-1,p0,p01,p20);","	var es1=triangle(depth-1,p1,p12,p01);","	var es2=triangle(depth-1,p2,p20,p12);"):t("	var es0=triangle(depth-1,p0,p01,p20,[es[0],null,null]);","	var es1=triangle(depth-1,p1,p12,p01,[es[1],null,es0[1]]);","	var es2=triangle(depth-1,p2,p20,p12,[es[2],es0[2],es1[1]]);","	return [es0[0],es1[0],es2[0]];"):t("	triangle(depth-1,p0,p01,p20);","	triangle(depth-1,p1,p12,p01);","	triangle(depth-1,p2,p20,p12);"),t("}"),t.e()},a=function(){var t=r.b();return t("shapeLod,","[-Math.sin(0/3*Math.PI),Math.cos(0/3*Math.PI)],","[-Math.sin(2/3*Math.PI),Math.cos(2/3*Math.PI)],","[-Math.sin(4/3*Math.PI),Math.cos(4/3*Math.PI)]"),e.usesElements()&&!e.hasColorsPerFace&&t.t(",","[null,null,null]"),t.e()},s=r.b();return s("var nextIndexIntoVertices=0;"),this.usesElements()&&(s("var nextIndexIntoElements=0;"),s("var nextElement=0;")),this.hasColorsPerVertex||this.hasColorsPerFace?(s("// p = position, cc = color component, e = element, es = elements"),s(this.writeColorData()),(!this.usesElements()||this.hasColorsPerFace)&&s("var nextIndexIntoColors=0;")):s("// p = position, e = element, es = elements"),s(i.b(r.bae("function pushVertex(p) {"),r.bae("}")).ae(t())),this.usesElements()&&s("function pushElement(e) {","	elements[nextIndexIntoElements++]=e;","}"),s("function mix(pa,pb) {","	return [","		(pa[0]+pb[0])/2,","		(pa[1]+pb[1])/2,","	];","}",(!this.usesElements()||this.hasColorsPerFace?i.b(r.bae("function triangle(depth,p0,p1,p2) {"),r.bae("}")):i.b(r.bae("function triangle(depth,p0,p1,p2,es) {"),r.bae("}"))).ae(n()),i.b(r.bae("triangle("),r.bae(");")).ae(a())),s.e()},t}(a);t.exports=s},{16:16,24:24,47:47}],46:[function(e,t,n){"use strict";var r=e(17),i=e(48),a=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.writeMeshInit=function(){return r.bae("var xyRange=4;","var xyScale=1/(4*Math.sqrt(2));")},t.prototype.writeMeshVertex=function(){var e=r.b(),t=0;return e("var r2=(x*x+y*y)/2;","var A=Math.exp(-r2)/Math.PI;","var z=A*(1-r2);","vertices[vertexOffset+"+t++ +"]=x*xyScale;","vertices[vertexOffset+"+t++ +"]=y*xyScale;","vertices[vertexOffset+"+t++ +"]=z;"),this.hasNormals&&e("var normal=normalize([(z+A)*x/xyScale,(z+A)*y/xyScale,1]);","vertices[vertexOffset+"+t++ +"]=normal[0];","vertices[vertexOffset+"+t++ +"]=normal[1];","vertices[vertexOffset+"+t++ +"]=normal[2];"),e(this.writeMeshVertexColors(t)),e.e()},t}(i);t.exports=a},{17:17,48:48}],47:[function(require,module,exports){"use strict";var Input=require(35),Option=require(40),JsLines=require(16),WrapLines=require(24),IndentLines=require(14),Listener=require(37),Colorgen=require(29),Shape=require(49),IntFeature=require(36),LodShape=function(_Shape){function LodShape(e,t,n,r,i){babelHelpers.classCallCheck(this,LodShape);var a=babelHelpers.possibleConstructorReturn(this,_Shape.call(this,e,t,n,r,i)),s=a.getMaxPossibleLod(e.lod.max),o=function(e){return Math.min(s,e)};return a.lod=Option.LiveInt.make("lod",[0,10],6)({value:o(e.lod.value),min:o(e.lod.min),max:o(e.lod.max),input:String(e.lod.input)}).fix(),a.features.push(new IntFeature("shape.lod",a.lod)),a}return babelHelpers.inherits(LodShape,_Shape),LodShape.prototype.getMaxPossibleLod=function getMaxPossibleLod(requestedMaxLod){if(!this.usesElements()||this.elementIndexBits>=31)return requestedMaxLod;for(var nVerticesFn=this.hasColorsPerFace?this.getFaceVertexCount:this.getDistinctVertexCount,indexLimit=1<<this.elementIndexBits,m=requestedMaxLod;m>=0;m--){var n=eval(nVerticesFn(m));if(indexLimit>=n)return m}},LodShape.prototype.writeColorData=function(){for(var e=JsLines.b(),t=new Colorgen(this.colorAttrs,0),n=0;4>n;n++)e("["+t.getNextColorString().slice(1,-1)+"],");return WrapLines.b(JsLines.bae("var colors=["),JsLines.bae("];")).ae(e.e())},LodShape.prototype.writeArraysAndBufferData=function(e){var t=this.hasColorsPerFace?this.getFaceVertexCount:this.getDistinctVertexCount,n=JsLines.b();return"constant"!=this.lod.input?(n("var minShapeLod="+this.lod.min+";","var maxShapeLod="+this.lod.max+";"),this.usesElements()?n("var nMaxVertices="+t("maxShapeLod")+";","var vertices=new Float32Array(nMaxVertices*"+this.getNumbersPerVertex()+");","var nMaxElements="+this.getTotalVertexCount("maxShapeLod")+";","var elements=new "+this.getElementIndexJsArray()+"(nMaxElements);",this.writeDebug(e),"var shapeLod,nVertices,nElements;","function storeShape(newShapeLod) {","	shapeLod=newShapeLod;","	nVertices="+t("shapeLod")+";","	nElements="+this.getTotalVertexCount("shapeLod")+";"):n("var nMaxVertices="+this.getTotalVertexCount("maxShapeLod")+";","var vertices=new Float32Array(nMaxVertices*"+this.getNumbersPerVertex()+");",this.writeDebug(e),"var shapeLod,nVertices;","function storeShape(newShapeLod) {","	shapeLod=newShapeLod;","	nVertices="+this.getTotalVertexCount("shapeLod")+";")):(n("var shapeLod="+this.lod+";"),this.usesElements()?n("var nVertices="+t("shapeLod")+";","var vertices=new Float32Array(nVertices*"+this.getNumbersPerVertex()+");","var nElements="+this.getTotalVertexCount("shapeLod")+";","var elements=new "+this.getElementIndexJsArray()+"(nElements);",this.writeDebug(e),"function storeShape() {"):n("var nVertices="+this.getTotalVertexCount("shapeLod")+";","var vertices=new Float32Array(nVertices*"+this.getNumbersPerVertex()+");",this.writeDebug(e),"function storeShape() {")),n(IndentLines.bae(this.writeStoreShape()),IndentLines.bae(this.writeBufferData()),"}"),n("constant"!=this.lod.input?"storeShape("+this.lod+");":"storeShape();"),n.e()},LodShape.prototype.getJsInitLines=function(e){var t=JsLines.ba(_Shape.prototype.getJsInitLines.call(this,e));if("slider"==this.lod.input){var n=new Listener.Slider("shape.lod");n.enter().log("console.log(this.id,'input value:',parseInt(this.value));").post("storeShape(parseInt(this.value));"),t(e.getListenerLines(n))}else this.lod.input instanceof Input.MouseMove&&e.canvasMousemoveListener.enter().newVarInt(this.lod.input,"shapeLod").cond("newShapeLod!=shapeLod").log("console.log('shapeLod input value:',newShapeLod);").post("storeShape(newShapeLod);");return t.e()},LodShape}(Shape);module.exports=LodShape},{14:14,16:16,24:24,29:29,35:35,36:36,37:37,40:40,49:49}],48:[function(e,t,n){"use strict";var r=e(16),i=e(14),a=e(47),s=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.getDistinctVertexCount=function(e){return"Math.pow((1<<"+e+")+1,2)"},t.prototype.getFaceVertexCount=function(e){return"Math.pow((1<<"+e+"),2)*4"},t.prototype.getTotalVertexCount=function(e){return"Math.pow((1<<"+e+"),2)*6"},t.prototype.writeMeshVertexColors=function(e){return this.hasColorsPerVertex||this.hasColorsPerFace?r.bae(this.usesElements()||this.hasColorsPerFace?"var ic=(i&1)*2+(j&1);":"var ic=((i+di)&1)*2+((j+dj)&1);","colors[ic].forEach(function(cc,icc){","	vertices[vertexOffset+"+e+"+icc]=cc;","});"):r.be()},t.prototype.writeStoreShape=function(){var e=r.b();return e("var res=(1<<shapeLod);"),this.usesElements()?this.hasColorsPerFace?e("function vertexElement(i,j,k) {","	return (i*res+j)*4+k;","}"):e("function vertexElement(i,j) {","	return i*(res+1)+j;","}"):e("function vertexElement(i,j,k) {","	return (i*res+j)*6+k;","}"),this.hasNormals&&e("function normalize(v) {","	var l=Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2]);","	return [v[0]/l,v[1]/l,v[2]/l];","}"),(this.hasColorsPerVertex||this.hasColorsPerFace)&&e(this.writeColorData()),e(this.writeMeshInit()),this.usesElements()?this.hasColorsPerFace?e("var i,j;","for (i=0;i<res;i++) {","	for (j=0;j<res;j++) {","		for (var k=0;k<4;k++) {","			var di=[0,0,1,1][k];","			var dj=[0,1,0,1][k];","			var y=(i+di)/res*xyRange*2-xyRange;","			var x=(j+dj)/res*xyRange*2-xyRange;","			var vertexOffset=vertexElement(i,j,k)*"+this.getNumbersPerVertex()+";",i.b(3).ae(this.writeMeshVertex()),"		}","	}","}","for (i=0;i<res;i++) {","	for (j=0;j<res;j++) {","		var elementOffset=(i*res+j)*6;","		elements[elementOffset+0]=vertexElement(i,j,0);","		elements[elementOffset+1]=vertexElement(i,j,1);","		elements[elementOffset+2]=vertexElement(i,j,2);","		elements[elementOffset+3]=vertexElement(i,j,2);","		elements[elementOffset+4]=vertexElement(i,j,1);","		elements[elementOffset+5]=vertexElement(i,j,3);","	}","}"):e("var i,j;","for (i=0;i<=res;i++) {","	var y=i/res*xyRange*2-xyRange;","	for (j=0;j<=res;j++) {","		var x=j/res*xyRange*2-xyRange;","		var vertexOffset=vertexElement(i,j)*"+this.getNumbersPerVertex()+";",i.b(2).ae(this.writeMeshVertex()),"	}","}","for (i=0;i<res;i++) {","	for (j=0;j<res;j++) {","		var elementOffset=(i*res+j)*6;","		elements[elementOffset+0]=vertexElement(i+0,j+0);","		elements[elementOffset+1]=vertexElement(i+0,j+1);","		elements[elementOffset+2]=vertexElement(i+1,j+0);","		elements[elementOffset+3]=vertexElement(i+1,j+0);","		elements[elementOffset+4]=vertexElement(i+0,j+1);","		elements[elementOffset+5]=vertexElement(i+1,j+1);","	}","}"):e("for (var i=0;i<res;i++) {","	for (var j=0;j<res;j++) {","		for (var k=0;k<6;k++) {","			var di=[0,0,1,1,0,1][k];","			var dj=[0,1,0,0,1,1][k];","			var y=(i+di)/res*xyRange*2-xyRange;","			var x=(j+dj)/res*xyRange*2-xyRange;","			var vertexOffset=vertexElement(i,j,k)*"+this.getNumbersPerVertex()+";",i.b(3).ae(this.writeMeshVertex()),"		}","	}","}"),e.e()},babelHelpers.createClass(t,[{key:"dim",get:function(){return 3}}]),t}(a);t.exports=s},{14:14,16:16,47:47}],49:[function(e,t,n){"use strict";var r=e(16),i=e(24),a=e(31),s=function(e){function t(n,r,i,a,s){babelHelpers.classCallCheck(this,t);var o=babelHelpers.possibleConstructorReturn(this,e.call(this));return o.elementIndexBits=parseInt(n.elements),o.hasNormals=r&&3==o.dim,o.hasColorsPerVertex=i,o.hasColorsPerFace=a,o.colorAttrs=s,o}return babelHelpers.inherits(t,e),t.prototype.usesElements=function(){return this.elementIndexBits>0},t.prototype.getNumbersPerVertex=function(){return this.dim+(this.hasNormals?3:0)+3*this.colorAttrs.length},t.prototype.getElementIndexJsArray=function(){return"Uint"+this.elementIndexBits+"Array"},t.prototype.getElementIndexGlType=function(){return 8==this.elementIndexBits?"gl.UNSIGNED_BYTE":16==this.elementIndexBits?"gl.UNSIGNED_SHORT":32==this.elementIndexBits?"gl.UNSIGNED_INT":void 0},t.prototype.writeDebug=function(e){var t=r.b();return e&&(t("console.log('vertex array byte length:',vertices.byteLength);"),this.usesElements()&&(t("console.log('element array byte length:',elements.byteLength);"),t("console.log('vertex+element array byte length:',vertices.byteLength+elements.byteLength);"))),t.e()},t.prototype.writeBufferData=function(){var e=r.b();return e("gl.bufferData(gl.ARRAY_BUFFER,vertices,gl.STATIC_DRAW);"),this.usesElements()&&e("gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,elements,gl.STATIC_DRAW);"),e.e()},t.prototype.writeArraysAndBufferData=function(e){return r.bae(this.writeArrays(),this.writeDebug(e),this.writeBufferData())},t.prototype.getJsInitLines=function(t){var n=this,a=function(e){var t=e[0][0],a=e.every(function(e){var n=e[0];return n==t}),s=!0,o=r.bae.apply(r,e.map(function(e){var t=e[0],n=e[1],r=e[2];return r?a?"'"+n+"',":"["+t+",'"+n+"'],":(s=!1,(a?"null,":"["+t+",null],")+" // attribute "+n+" disabled")})),l=r.bae("var attrLoc=gl.getAttribLocation(program,attrName);","gl.vertexAttribPointer(","	attrLoc,attrSize,gl.FLOAT,false,","	Float32Array.BYTES_PER_ELEMENT*bufferStride,","	Float32Array.BYTES_PER_ELEMENT*bufferOffset",");","gl.enableVertexAttribArray(attrLoc);");
s||(l=i.b(r.bae("if (name!==null) {"),r.bae("}")).ae(l));var u=r.bae.apply(r,(a?["var attrSize="+t+";"]:["var attrSize=attr[0];","var attrName=attr[1];"]).concat([l,"bufferOffset+=attrSize;"]));return i.b(r.bae("var bufferStride="+n.getNumbersPerVertex()+";","var bufferOffset=0;",";["),r.bae("].forEach(function("+(a?"attrName":"attr")+"){"),r.bae("});")).ae(o,u)},s=r.ba(e.prototype.getJsInitLines.call(this,t));return 32==this.elementIndexBits&&s("gl.getExtension('OES_element_index_uint');"),this.dim>2&&s("gl.enable(gl.DEPTH_TEST);"),s("gl.bindBuffer(gl.ARRAY_BUFFER,gl.createBuffer());"),this.usesElements()&&s("gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,gl.createBuffer());"),s(this.writeArraysAndBufferData(t.debugOptions.arrays)),!this.hasNormals&&this.colorAttrs.length<=0?s("var positionLoc=gl.getAttribLocation(program,'position');","gl.vertexAttribPointer(positionLoc,"+this.dim+",gl.FLOAT,false,0,0);","gl.enableVertexAttribArray(positionLoc);"):s(a([[this.dim,"position",!0]].concat(this.hasNormals?[[3,"normal",!0]]:[],this.colorAttrs.map(function(e){return[3,e.name,e.enabled]})))),s.e()},t.prototype.getJsLoopLines=function(t){var n=r.ba(e.prototype.getJsLoopLines.call(this,t));return n(this.usesElements()?"gl.drawElements(gl."+this.glPrimitive+",nElements,"+this.getElementIndexGlType()+",0);":"gl.drawArrays(gl."+this.glPrimitive+",0,nVertices);"),n.e()},babelHelpers.createClass(t,[{key:"dim",get:function(){return 2}},{key:"twoSided",get:function(){return!0}},{key:"glPrimitive",get:function(){return"TRIANGLES"}}]),t}(a);t.exports=s},{16:16,24:24,31:31}],50:[function(e,t,n){"use strict";var r=e(16),i=e(29),a=e(49),s=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.writeArrays=function(){var e=this,t=new i(this.colorAttrs,0),n=void 0,a=function(){return e.hasColorsPerFace&&!e.hasColorsPerVertex?(void 0===n&&(n=t.getNextColorString()),n):t.getNextColorString()},s=r.ba("var nVertices=4;","var vertices=new Float32Array([","	// x    y"+t.getHeaderString(),"	-0.5,-0.5,"+a(),"	+0.5,-0.5,"+a(),"	+0.5,+0.5,"+a(),"	-0.5,+0.5,"+a(),"]);");return this.usesElements()&&s("var nElements=4;","var elements=new "+this.getElementIndexJsArray()+"([0,1,2,3]);"),s.e()},babelHelpers.createClass(t,[{key:"glPrimitive",get:function(){return"TRIANGLE_FAN"}}]),t}(a);t.exports=s},{16:16,29:29,49:49}],51:[function(e,t,n){"use strict";var r=e(16),i=e(48),a=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.writeMeshInit=function(){var e=this.usesElements()&&!this.hasColorsPerFace,t=r.b();return t("var xyRange=1/Math.sqrt(2);","var zRange=xyRange;","var mask=res-1;","function zOffset(i,j) {","	return vertexElement(i,j"+(e?"":",0")+")*"+this.getNumbersPerVertex()+"+2;","}","function noise(depth) {","	var r=zRange/Math.pow(2,shapeLod-depth-1);","	return Math.random()*2*r-r;","}","vertices[2]=0.0;","var i0,i1,i2,i3;","var j0,j1,j2,j3;","for (var depth=shapeLod-1;depth>=0;depth--) {","	var d=1<<depth;","	// diamond step","	for (i2=d;i2<res;i2+=2*d) {","		for (j2=d;j2<res;j2+=2*d) {","			i1=i2-d;","			j1=j2-d;","			i3=(i2+d)&mask;","			j3=(j2+d)&mask;","			vertices[zOffset(i2,j2)]=(","				vertices[zOffset(i1,j1)]+vertices[zOffset(i1,j3)]+","				vertices[zOffset(i3,j1)]+vertices[zOffset(i3,j3)]","			)/4+noise(depth);","		}","	}","	// square step","	for (i2=d;i2<res;i2+=2*d) {","		for (j2=d;j2<res;j2+=2*d) {","			i0=(i2-2*d)&mask;","			j0=(j2-2*d)&mask;","			i1=(i2-d);","			j1=(j2-d);","			i3=(i2+d)&mask;","			j3=(j2+d)&mask;","			vertices[zOffset(i2,j1)]=(","				vertices[zOffset(i2,j0)]+vertices[zOffset(i1,j1)]+","				vertices[zOffset(i2,j2)]+vertices[zOffset(i3,j1)]","			)/4+noise(depth);","			vertices[zOffset(i1,j2)]=(","				vertices[zOffset(i0,j2)]+vertices[zOffset(i1,j1)]+","				vertices[zOffset(i2,j2)]+vertices[zOffset(i1,j3)]","			)/4+noise(depth);","		}","	}","}"),e&&t("for (i0=0;i0<res;i0++) vertices[zOffset(i0,res)]=vertices[zOffset(i0,0)];","for (j0=0;j0<res;j0++) vertices[zOffset(res,j0)]=vertices[zOffset(0,j0)];","vertices[zOffset(res,res)]=vertices[zOffset(0,0)];"),t.e()},t.prototype.writeMeshVertex=function(){var e=this.usesElements()&&!this.hasColorsPerFace,t=r.b();t("vertices[vertexOffset+0]=x;","vertices[vertexOffset+1]=y;",e?"// vertices[vertexOffset+2] already written":"vertices[vertexOffset+2]=vertices[zOffset((i+di)&mask,(j+dj)&mask)];");var n=3;return this.hasNormals&&t("var d=4*xyRange/res;","var normal=normalize([",e?"	(vertices[zOffset(i,(j-1)&mask)]-vertices[zOffset(i,(j+1)&mask)])/d,":"	(vertices[zOffset((i+di)&mask,(j+dj-1)&mask)]-vertices[zOffset((i+di)&mask,(j+dj+1)&mask)])/d,",e?"	(vertices[zOffset((i-1)&mask,j)]-vertices[zOffset((i+1)&mask,j)])/d,":"	(vertices[zOffset((i+di-1)&mask,(j+dj)&mask)]-vertices[zOffset((i+di+1)&mask,(j+dj)&mask)])/d,","1]);","vertices[vertexOffset+"+n++ +"]=normal[0];","vertices[vertexOffset+"+n++ +"]=normal[1];","vertices[vertexOffset+"+n++ +"]=normal[2];"),t(this.writeMeshVertexColors(n)),t.e()},t}(i);t.exports=a},{16:16,48:48}],52:[function(e,t,n){"use strict";var r=e(16),i=e(29),a=e(49),s=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.writeArrays=function(){var e=this,t=new i(this.colorAttrs,0),n=void 0,a=function(){return e.hasColorsPerFace&&!e.hasColorsPerVertex?(void 0===n&&(n=t.getNextColorString()),n):t.getNextColorString()},s=r.ba("var nVertices=3;","var vertices=new Float32Array([","	//                   x                      y"+t.getHeaderString(),"	-Math.sin(0/3*Math.PI), Math.cos(0/3*Math.PI),"+a(),"	-Math.sin(2/3*Math.PI), Math.cos(2/3*Math.PI),"+a(),"	-Math.sin(4/3*Math.PI), Math.cos(4/3*Math.PI),"+a(),"]);");return this.usesElements()&&s("var nElements=3;","var elements=new "+this.getElementIndexJsArray()+"([0,1,2]);"),s.e()},t}(a);t.exports=s},{16:16,29:29,49:49}],53:[function(e,t,n){"use strict";var r=e(17),i=e(31),a=e(32),s=function(e){function t(n){babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,e.call(this));r.options=n,r.rotateVectorEntries=[],r.transformSequence=new Array(n.model.entries.length);var i=["x","y","z"],s=[[],[],[]];n.model.entries.forEach(function(e,t){var n={transform:e,index:t};"rotate.x"==e.type?s[0].push(n):"rotate.y"==e.type?s[1].push(n):"rotate.z"==e.type&&s[2].push(n)});for(var o=Math.max.apply(null,s.map(function(e){return e.length})),l=function(e){for(var t=!1,n=!0,l=-1,u=0;3>u;u++){var p=e<s[u].length;if(t){if(p){n=!1;break}}else p?l=u:t=!0}var c=o>1?String(e):"",h=function(t,n){var i=new a("rotate"+(o>1?"."+e:""),t,180);return i.i18nId="transforms.model.rotate",r.features.push(i),r.rotateVectorEntries.push({vector:i,suffix:c}),i},f=function(t,n){r.transformSequence[s[n][e].index]={vector:t,component:i[n],suffix:c}};if(n)for(var d=h(s.slice(0,l+1).map(function(t){return t[e].transform}),i.slice(0,l+1)),u=0;l>=u;u++)f(d,u);else for(var u=0;3>u;u++){var p=e<s[u].length;if(p){var d=h([s[u][e].transform],i.slice(u,u+1));f(d,u)}}},u=0;o>u;u++)l(u);return r}return babelHelpers.inherits(t,e),t.prototype.use2dTransform=function(e){return e&&1==this.options.model.entries.length&&"rotate.z"==this.options.model.entries[0].type},t.prototype.getTransformMatricesLines=function(e){var t=r.ba(""),n=1,i=4+n,a=function(e){return e.length<i?("          "+e).slice(-i):e},s=function(n,r){t.t("*mat"+e+"( // "+r),n.forEach(function(n,r){r>=e||(t("	"),n.forEach(function(n,i){i>=e||(t.t(a(n)),(e-1>r||e-1>i)&&t.t(","))}))}),t(")")};return this.transformSequence.forEach(function(e){if(e){var t=e.vector.getGlslMapComponentValue("c"+e.suffix,e.component),n=e.vector.getGlslMapComponentValue("s"+e.suffix,e.component);"x"==e.component?s([["1.0","0.0","0.0","0.0"],["0.0",t,"-"+n,"0.0"],["0.0",n,t,"0.0"],["0.0","0.0","0.0","1.0"]],"rotate around x axis"):"y"==e.component?s([[t,"0.0",n,"0.0"],["0.0","1.0","0.0","0.0"],["-"+n,"0.0",t,"0.0"],["0.0","0.0","0.0","1.0"]],"rotate around y axis"):"z"==e.component&&s([[t,"-"+n,"0.0","0.0"],[n,t,"0.0","0.0"],["0.0","0.0","1.0","0.0"],["0.0","0.0","0.0","1.0"]],"rotate around z axis")}}),4==e&&"perspective"==this.options.projection&&s([["1.0","0.0","0.0","0.0"],["0.0","1.0","0.0","0.0"],["0.0","0.0","1.0","-(near+far)/2.0"],["0.0","0.0","0.0","1.0"]],"move center of coords inside view"),t.e()},t.prototype.getGlslVertexDeclarationLines=function(e){var t=r.b();return this.rotateVectorEntries.forEach(function(e){t(e.vector.getGlslDeclarationLines())}),t(this.use2dTransform(e)?"attribute vec2 position;":"attribute vec4 position;"),t.e()},t.prototype.getGlslVertexOutputLines=function(e,t,n){var i=r.b();return this.rotateVectorEntries.forEach(function(e){i(e.vector.getGlslMapDeclarationLines("c"+e.suffix,function(e){return"cos(radians("+e+"))"}),e.vector.getGlslMapDeclarationLines("s"+e.suffix,function(e){return"sin(radians("+e+"))"}))}),"perspective"==this.options.projection&&i("float fovy=45.0;","float near=1.0/tan(radians(fovy)/2.0);","float far=near+2.0;"),i(n?"vec4 transformedPosition=":"gl_Position="),this.use2dTransform(e)?i.t("vec4(position*mat2(","	cz, -sz,","	sz,  cz","),0,1)"):(i.t("position"),i.t(this.getTransformMatricesLines(4))),n&&(i.t(";"),i("gl_Position=transformedPosition")),"ortho"==this.options.projection?t?i.t("*vec4(1.0/aspect,1.0,-1.0,1.0)"):e||i.t("*vec4(1.0,1.0,-1.0,1.0)"):"perspective"==this.options.projection&&(t?i.t("*mat4(","	near/aspect, 0.0,  0.0,                   0.0,","	0.0,         near, 0.0,                   0.0,","	0.0,         0.0,  (near+far)/(near-far), 2.0*near*far/(near-far),","	0.0,         0.0,  -1.0,                  0.0",")"):i.t("*mat4(","	near, 0.0,  0.0,                   0.0,","	0.0,  near, 0.0,                   0.0,","	0.0,  0.0,  (near+far)/(near-far), 2.0*near*far/(near-far),","	0.0,  0.0,  -1.0,                  0.0",")")),i.t(";"),i.e()},t.prototype.getGlslVertexNormalTransformLines=function(){return this.getTransformMatricesLines(3)},babelHelpers.createClass(t,[{key:"eyeAtInfinity",get:function(){return"ortho"==this.options.projection}}]),t}(i);t.exports=s},{17:17,31:31,32:32}],54:[function(e,t,n){"use strict";var r=e(4),i=function(){function e(t,n,r){babelHelpers.classCallCheck(this,e),this.value=t,this.vectorName=n,this.wrapRange=r}return e.prototype.hasSpeed=function(){return 0!=this.value.speed||"constant"!=this.value.speed.input},e.prototype.hasInput=function(){return"constant"!=this.value.input||"constant"!=this.value.speed.input},e.prototype.hasInputClass=function(e){return this.value.input instanceof e||this.value.speed.input instanceof e},e.prototype.usesStartTime=function(){return"constant"==this.value.input&&0!=this.value.speed&&"constant"==this.value.speed.input},e.prototype.usesPrevTime=function(){return"constant"!=this.value.input&&0!=this.value.speed||"constant"!=this.value.speed.input},babelHelpers.createClass(e,[{key:"suffix",get:function(){var e=this.value.name.lastIndexOf(".");return 0>e?this.value.name:this.value.name.slice(e+1)}},{key:"name",get:function(){return this.vectorName+"."+this.suffix}},{key:"varName",get:function(){return r(this.name)}},{key:"varNameLoc",get:function(){return this.varName+"Loc"}},{key:"varNameSpeed",get:function(){return this.varName+"Speed"}},{key:"varNameInput",get:function(){return this.varName+"Input"}},{key:"minVarName",get:function(){return r("min."+this.name)}},{key:"maxVarName",get:function(){return r("max."+this.name)}},{key:"variable",get:function(){return"constant"!=this.value.input||this.hasSpeed()}},{key:"wrapReady",get:function(){return this.wrapRange&&this.value.min==-this.wrapRange&&this.value.max==+this.wrapRange}},{key:"wrapped",get:function(){return this.hasSpeed()&&this.wrapReady&&"slider"==this.value.input}},{key:"clamped",get:function(){return!this.wrapped&&"constant"!=this.value.speed.input&&!this.wrapReady}},{key:"capped",get:function(){return!this.wrapped&&!this.clamped&&this.hasSpeed()&&!this.wrapReady}}]),e}();t.exports=i},{4:4}],55:[function(e,t,n){"use strict";var r=e(4),i=e(9),a=e(10),s=e(35),o=e(17),l=e(16),u=e(24),p=e(37),c=e(54),h=e(39),f=function(e){function t(n,r,i){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,e.call(this));return a.name=n,a.components=[],a.componentsBySuffix={},r.forEach(function(e){var t=new c(e,n,i);a.components.push(t),a.componentsBySuffix[t.suffix]=t}),a.i18nId=n,a.nVars=0,a.modeConstant=!0,a.modeFloats=!1,a.components.forEach(function(e,t){e.variable&&(a.modeConstant=!1,a.nVars++!=t&&(a.modeFloats=!0))}),1==a.nVars&&(a.modeFloats=!0),a.modeVector=!a.modeConstant&&!a.modeFloats,a}return babelHelpers.inherits(t,e),t.prototype.makeInitialComponentValue=function(){var e={};this.components.forEach(function(t){"slider"==t.value.input||(e[t.value.name]=t.value)});var t=a.js(e);return function(e){return"slider"==e.value.input?"parseFloat(document.getElementById('"+e.name+"').value)":t[e.value.name]}},t.prototype.makeUpdatedComponentValue=function(){var e={};this.components.forEach(function(t){0!=t.value.speed||"constant"!=t.value.speed.input||t.value.input instanceof s.MouseMove||t.value.input instanceof s.Gamepad||"slider"==t.value.input||(e[t.value.name]=t.value)});var t=a.js(e);return function(e){return 0!=e.value.speed||"constant"!=e.value.speed.input||e.value.input instanceof s.MouseMove||e.value.input instanceof s.Gamepad?e.varName:"slider"==e.value.input?"parseFloat(document.getElementById('"+e.name+"').value)":t[e.value.name]}},t.prototype.getJsDeclarationLines=function(){return l.be()},t.prototype.getJsUpdateLines=function(e){return l.be()},t.prototype.addPostToListenerEntryForComponent=function(e,t){},t.prototype.addPostToListenerEntryAfterComponents=function(e,t){},t.prototype.hasInputs=function(){return e.prototype.hasInputs.call(this)||this.components.some(function(e){return e.hasInput()})},t.prototype.requestFeatureContext=function(t){e.prototype.requestFeatureContext.call(this,t),this.components.forEach(function(e){e.hasInput()&&(t.hasInputs=!0),e.hasInputClass(s.Slider)&&(t.hasSliders=!0),e.hasInputClass(s.Gamepad)&&(t.pollsGamepad=!0),e.usesStartTime()&&(t.hasStartTime=!0),e.usesPrevTime()&&(t.hasPrevTime=!0),e.wrapped&&(t.hasWrapFn=!0),e.clamped&&(t.hasClampFn=!0)})},t.prototype.getHtmlControlMessageLines=function(t){var n=this,r=o.ba(e.prototype.getHtmlControlMessageLines.call(this,t));return this.components.forEach(function(e){r(n.getHtmlControlMessageForValue(t,e.value,n.i18nId+"."+e.suffix),n.getHtmlControlMessageForValue(t,e.value.speed,n.i18nId+"."+e.suffix+".speed"))}),r.e()},t.prototype.getHtmlInputLines=function(t){var n=this,r=o.ba(e.prototype.getHtmlInputLines.call(this,t));return this.components.forEach(function(e){return r(n.getHtmlSliderLines(t,e.value,"options."+n.i18nId+"."+e.suffix,e.name,"any"),n.getHtmlSliderLines(t,e.value.speed,"options."+n.i18nId+"."+e.suffix+".speed",e.name+".speed","any"))}),r.e()},t.prototype.getJsInitLines=function(t){var n=this,r=function(e){var r=function(){var r=l.b(),i=function(i,a){if("slider"==i.input){var s=new p.Slider(a),o=s.enter();o.log("console.log(this.id,'input value:',parseFloat(this.value));"),e&&o.post(n.updateFnName+"();"),r(t.getListenerLines(s))}};return n.components.forEach(function(e){i(e.value,e.name),i(e.value.speed,e.name+".speed")}),r.e()},i=function(){var r=new p.MultipleSlider('[id^="'+n.name+'."]'),i=r.enter();return i.log("console.log(this.id,'input value:',parseFloat(this.value));"),e&&i.post(n.updateFnName+"();"),t.getListenerLines(r)},a=r(),s=i();return a.count()<=s.count()?a:s},i=l.ba(e.prototype.getJsInitLines.call(this,t));if(i(this.getJsDeclarationLines()),this.modeConstant)return i(this.getJsUpdateLines(this.makeInitialComponentValue())),i.e();var o=this.components.some(function(e){return e.hasSpeed()}),c=this.components.some(function(e){return"slider"==e.value.input}),h=this.components.some(function(e){return e.hasInputClass(s.Gamepad)}),f=function(){var e=void 0,t=void 0,r={},l={},u=[],p=[];n.components.forEach(function(e){(e.value.input instanceof s.MouseMove&&(c||o||h)||"constant"!=e.value.speed.input&&"slider"!=e.value.input)&&(r[e.value.name]=e.value,u.push(e)),e.value.speed.input instanceof s.MouseMove&&(l[e.value.name]=e.value.speed,p.push(e))}),e=a.js(r),t=a.js(l),u.forEach(function(t){return i("var "+t.varName+"="+e[t.value.name]+";")}),p.forEach(function(e){return i("var "+e.varNameSpeed+"="+t[e.value.name]+";")})};return f(),o||!c||h||i(u.b(l.bae("function "+this.updateFnName+"() {"),l.bae("}")).ae(this.getJsUpdateLines(this.makeUpdatedComponentValue())),this.updateFnName+"();"),i(r(!o&&!h)),this.components.some(function(e){return e.value.input instanceof s.MouseMove})&&!function(){o||c||h||i(n.getJsUpdateLines(n.makeInitialComponentValue()));var e=t.canvasMousemoveListener.enter();n.components.forEach(function(t){if(t.value.input instanceof s.MouseMove){var r=a.js({min:t.value.min,max:t.value.max},t.value.precision);(o||c||h?e.minMaxFloat:e.minMaxVarFloat)(t.value.input,t.varName,r.min,r.max),e.log("console.log('"+t.name+" input value:',"+t.varName+");"),o||c||h||n.addPostToListenerEntryForComponent(e,t)}}),o||h||(c?e.post(n.updateFnName+"();"):n.addPostToListenerEntryAfterComponents(e,n.makeUpdatedComponentValue()))}(),this.components.some(function(e){return e.value.speed.input instanceof s.MouseMove})&&!function(){var e=t.canvasMousemoveListener.enter();n.components.forEach(function(t){var n=a.js({min:t.value.speed.min,max:t.value.speed.max},t.value.speed.precision);t.value.speed.input instanceof s.MouseMove&&e.minMaxFloat(t.value.speed.input,t.varNameSpeed,n.min,n.max).log("console.log('"+t.name+".speed input value:',"+t.varNameSpeed+");")})}(),i.e()},t.prototype.getJsLoopLines=function(t){var n=l.ba(e.prototype.getJsLoopLines.call(this,t)),r=function(e){var t=e.charAt(0);return"-"==t||"+"==t?e:"+"+e},o=!1,u=function(e,r,i,l){if(r.input instanceof s.Gamepad){o=!0;var u=a.js({min:r.min,max:r.max,value:r.value},r.precision);n("var "+e.minVarName+l+"="+u.min+";","var "+e.maxVarName+l+"="+u.max+";","var "+e.varName+l+"="+u.value+";","if (gamepad && gamepad.axes.length>"+r.input.axis+") {","	"+e.varName+l+"="+e.minVarName+l+"+("+e.maxVarName+l+"-"+e.minVarName+l+")*(gamepad.axes["+r.input.axis+"]+1)/2;","}"),t&&t.debugOptions.inputs&&n("console.log('"+e.name+i+" input value:',"+e.varName+l+");")}};return this.components.forEach(function(e){var l=e.value;u(e,l,"",""),u(e,l.speed,".speed","Speed"),e.hasSpeed()&&!function(){o=!0;var u=void 0;u="slider"==l.speed.input?"+parseFloat(document.getElementById('"+e.name+".speed').value)":l.speed.input instanceof s.MouseMove||l.speed.input instanceof s.Gamepad?"+"+e.varNameSpeed:r(i.js(l.speed));var p=function(t,n){return t==e.varName?n.charAt(0)+"="+n.slice(1):"="+t+n};e.wrapped?p=function(e,t){return"=wrap("+e+t+","+i.js(l.max,l.precision)+")"}:e.clamped?!function(){var e=a.js({min:l.min,max:l.max},l.precision);p=function(t,n){return"=clamp("+t+n+","+e.min+","+e.max+")"}}():e.capped&&(p=function(e,t){return"=Math."+(l.speed<0?"max":"min")+"("+e+t+","+i.js(l.speed<0?l.min:l.max,l.precision)+")"});var c=function(t,n){return e.varName+p(t,u+"*"+n+"/1000")+";"};"slider"==l.input?n("var "+e.varNameInput+"=document.getElementById('"+e.name+"');","var "+c("parseFloat("+e.varNameInput+".value)","(time-prevTime)"),e.varNameInput+".value="+e.varName+";"):n(l.input instanceof s.MouseMove||"constant"!=l.speed.input?c(e.varName,"(time-prevTime)"):"var "+c(i.js(l),"(time-startTime)")),t&&t.debugOptions.animations&&n("console.log('"+e.name+" animation value:',"+e.varName+");")}()}),o&&n(this.getJsUpdateLines(this.makeUpdatedComponentValue())),n.e()},babelHelpers.createClass(t,[{key:"varName",get:function(){return r(this.name)}},{key:"updateFnName",get:function(){return r("update."+this.name)}}]),t}(h);t.exports=f},{10:10,16:16,17:17,24:24,35:35,37:37,39:39,4:4,54:54,9:9}]},{},[38])}();
//# sourceMappingURL=webgl-starter.js.map
